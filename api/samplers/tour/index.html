
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="../basic/">
      
      
        <link rel="next" href="../../report/stringify/">
      
      <link rel="icon" href="../../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.4.3, mkdocs-material-9.1.15">
    
    
      
        <title>pam.samplers.tour - Population Activity Modeller (PAM)</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.26e3688c.min.css">
      
      

    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../../assets/_mkdocstrings.css">
    
      <link rel="stylesheet" href="../../../static/extras.css">
    
    <script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    <body dir="ltr">
  
    
    
      <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#pam.samplers.tour" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../.." title="Population Activity Modeller (PAM)" class="md-header__button md-logo" aria-label="Population Activity Modeller (PAM)" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Population Activity Modeller (PAM)
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              pam.samplers.tour
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/arup-project/pam/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.4.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../.." title="Population Activity Modeller (PAM)" class="md-nav__button md-logo" aria-label="Population Activity Modeller (PAM)" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    Population Activity Modeller (PAM)
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/arup-project/pam/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.4.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../.." class="md-nav__link">
        Home
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../../installation/" class="md-nav__link">
        Installation
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../../read_data/" class="md-nav__link">
        Reading data
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../../activity_plans/" class="md-nav__link">
        Activity plans
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../../modelling_policy_impact/" class="md-nav__link">
        Modelling the imapct of policies on populations
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6" >
      
      
      
        <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0">
          Examples
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_6">
          <span class="md-nav__icon md-icon"></span>
          Examples
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../examples/01_PAM_Getting_Started/" class="md-nav__link">
        PAM Getting Started
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../examples/02_Population_Basics/" class="md-nav__link">
        Population Basics
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../examples/03_Example_Generate_Random_Population/" class="md-nav__link">
        Example Generate Random Population
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../examples/04_Example_Ingest_NTS_Diaries/" class="md-nav__link">
        Example Ingest NTS Diaries
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../examples/05_PAM_Policies_Walk_Through/" class="md-nav__link">
        PAM Policies Walk Through
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../examples/06_PAM_Complex_Policies/" class="md-nav__link">
        PAM Complex Policies
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../examples/07_PAM_Point_Sampling/" class="md-nav__link">
        PAM Point Sampling
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../examples/08_PAM_Population_Activity_Plots/" class="md-nav__link">
        PAM Population Activity Plots
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../examples/09_Travel_Plots/" class="md-nav__link">
        Travel Plots
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../examples/10_Advanced_Spatial-Sampling_Demo/" class="md-nav__link">
        Advanced Spatial-Sampling Demo
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../examples/11_Advanced_Plan_Rescheduling/" class="md-nav__link">
        Advanced Plan Rescheduling
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../examples/12_Advanced_Adding_Vehicles/" class="md-nav__link">
        Advanced Adding Vehicles
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../examples/13_Advanced_Freight_Synthesis/" class="md-nav__link">
        Advanced Freight Synthesis
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../examples/14_Advanced_Plan_Cropping/" class="md-nav__link">
        Advanced Plan Cropping
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../examples/15_Advanced_Choice/" class="md-nav__link">
        Advanced Choice
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../../get_involved/" class="md-nav__link">
        Get involved
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../cli/" class="md-nav__link">
        CLI Reference
      </a>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_9" checked>
      
      
      
        <label class="md-nav__link" for="__nav_9" id="__nav_9_label" tabindex="0">
          API Reference
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_9_label" aria-expanded="true">
        <label class="md-nav__title" for="__nav_9">
          <span class="md-nav__icon md-icon"></span>
          API Reference
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../scoring/" class="md-nav__link">
        pam.scoring
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../vehicle/" class="md-nav__link">
        pam.vehicle
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../activity/" class="md-nav__link">
        pam.activity
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../core/" class="md-nav__link">
        pam.core
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../location/" class="md-nav__link">
        pam.location
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../utils/" class="md-nav__link">
        pam.utils
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_9_7" >
      
      
      
        <label class="md-nav__link" for="__nav_9_7" id="__nav_9_7_label" tabindex="0">
          pam.write
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_9_7_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_9_7">
          <span class="md-nav__icon md-icon"></span>
          pam.write
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../write/matrices/" class="md-nav__link">
        pam.write.matrices
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../write/diary/" class="md-nav__link">
        pam.write.diary
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../write/matsim/" class="md-nav__link">
        pam.write.matsim
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_9_8" >
      
      
      
        <label class="md-nav__link" for="__nav_9_8" id="__nav_9_8_label" tabindex="0">
          pam.plot
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_9_8_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_9_8">
          <span class="md-nav__icon md-icon"></span>
          pam.plot
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../plot/stats/" class="md-nav__link">
        pam.plot.stats
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../plot/plans/" class="md-nav__link">
        pam.plot.plans
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_9_9" >
      
      
      
        <label class="md-nav__link" for="__nav_9_9" id="__nav_9_9_label" tabindex="0">
          pam.optimise
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_9_9_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_9_9">
          <span class="md-nav__icon md-icon"></span>
          pam.optimise
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../optimise/grid/" class="md-nav__link">
        pam.optimise.grid
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../optimise/random/" class="md-nav__link">
        pam.optimise.random
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_9_10" >
      
      
      
        <label class="md-nav__link" for="__nav_9_10" id="__nav_9_10_label" tabindex="0">
          pam.array
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_9_10_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_9_10">
          <span class="md-nav__icon md-icon"></span>
          pam.array
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../array/encode/" class="md-nav__link">
        pam.array.encode
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../array/distance/" class="md-nav__link">
        pam.array.distance
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../array/decode/" class="md-nav__link">
        pam.array.decode
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_9_11" >
      
      
      
        <label class="md-nav__link" for="__nav_9_11" id="__nav_9_11_label" tabindex="0">
          pam.planner
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_9_11_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_9_11">
          <span class="md-nav__icon md-icon"></span>
          pam.planner
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../planner/od/" class="md-nav__link">
        pam.planner.od
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../planner/clustering/" class="md-nav__link">
        pam.planner.clustering
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../planner/encoder/" class="md-nav__link">
        pam.planner.encoder
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../planner/utils_planner/" class="md-nav__link">
        pam.planner.utils_planner
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../planner/choice_location/" class="md-nav__link">
        pam.planner.choice_location
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../planner/zones/" class="md-nav__link">
        pam.planner.zones
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_9_12" >
      
      
      
        <label class="md-nav__link" for="__nav_9_12" id="__nav_9_12_label" tabindex="0">
          pam.read
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_9_12_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_9_12">
          <span class="md-nav__icon md-icon"></span>
          pam.read
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../read/diary/" class="md-nav__link">
        pam.read.diary
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../read/matsim/" class="md-nav__link">
        pam.read.matsim
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_9_13" >
      
      
      
        <label class="md-nav__link" for="__nav_9_13" id="__nav_9_13_label" tabindex="0">
          pam.operations
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_9_13_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_9_13">
          <span class="md-nav__icon md-icon"></span>
          pam.operations
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../operations/cropping/" class="md-nav__link">
        pam.operations.cropping
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../operations/combine/" class="md-nav__link">
        pam.operations.combine
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_9_14" checked>
      
      
      
        <label class="md-nav__link" for="__nav_9_14" id="__nav_9_14_label" tabindex="0">
          pam.samplers
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_9_14_label" aria-expanded="true">
        <label class="md-nav__title" for="__nav_9_14">
          <span class="md-nav__icon md-icon"></span>
          pam.samplers
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../time/" class="md-nav__link">
        pam.samplers.time
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../attributes/" class="md-nav__link">
        pam.samplers.attributes
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../population/" class="md-nav__link">
        pam.samplers.population
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../spatial/" class="md-nav__link">
        pam.samplers.spatial
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../facility/" class="md-nav__link">
        pam.samplers.facility
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../basic/" class="md-nav__link">
        pam.samplers.basic
      </a>
    </li>
  

            
          
            
              
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          pam.samplers.tour
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        pam.samplers.tour
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#pam.samplers.tour" class="md-nav__link">
    pam.samplers.tour
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pam.samplers.tour.ActivityDuration" class="md-nav__link">
    ActivityDuration
  </a>
  
    <nav class="md-nav" aria-label="ActivityDuration">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#pam.samplers.tour.ActivityDuration.model_activity_duration" class="md-nav__link">
    model_activity_duration()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pam.samplers.tour.ActivityDuration.model_distance" class="md-nav__link">
    model_distance()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pam.samplers.tour.ActivityDuration.model_journey_time" class="md-nav__link">
    model_journey_time()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pam.samplers.tour.ActivityDuration.model_stop_time" class="md-nav__link">
    model_stop_time()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pam.samplers.tour.FrequencySampler" class="md-nav__link">
    FrequencySampler
  </a>
  
    <nav class="md-nav" aria-label="FrequencySampler">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#pam.samplers.tour.FrequencySampler.distribution" class="md-nav__link">
    distribution
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pam.samplers.tour.FrequencySampler.frequency" class="md-nav__link">
    frequency
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pam.samplers.tour.FrequencySampler.threshold_matrix" class="md-nav__link">
    threshold_matrix
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pam.samplers.tour.FrequencySampler.threshold_value" class="md-nav__link">
    threshold_value
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pam.samplers.tour.FrequencySampler.sample" class="md-nav__link">
    sample()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pam.samplers.tour.FrequencySampler.samples" class="md-nav__link">
    samples()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pam.samplers.tour.FrequencySampler.threshold_sample" class="md-nav__link">
    threshold_sample()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pam.samplers.tour.PivotDistributionSampler" class="md-nav__link">
    PivotDistributionSampler
  </a>
  
    <nav class="md-nav" aria-label="PivotDistributionSampler">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#pam.samplers.tour.PivotDistributionSampler.demand" class="md-nav__link">
    demand
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pam.samplers.tour.PivotDistributionSampler.plot" class="md-nav__link">
    plot()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pam.samplers.tour.PivotDistributionSampler.sample" class="md-nav__link">
    sample()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pam.samplers.tour.TourPlanner" class="md-nav__link">
    TourPlanner
  </a>
  
    <nav class="md-nav" aria-label="TourPlanner">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#pam.samplers.tour.TourPlanner.d_activity" class="md-nav__link">
    d_activity
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pam.samplers.tour.TourPlanner.d_dist" class="md-nav__link">
    d_dist
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pam.samplers.tour.TourPlanner.d_freq" class="md-nav__link">
    d_freq
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pam.samplers.tour.TourPlanner.facility_sampler" class="md-nav__link">
    facility_sampler
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pam.samplers.tour.TourPlanner.hour" class="md-nav__link">
    hour
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pam.samplers.tour.TourPlanner.minute" class="md-nav__link">
    minute
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pam.samplers.tour.TourPlanner.o_activity" class="md-nav__link">
    o_activity
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pam.samplers.tour.TourPlanner.o_zone" class="md-nav__link">
    o_zone
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pam.samplers.tour.TourPlanner.stops" class="md-nav__link">
    stops
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pam.samplers.tour.TourPlanner.threshold_matrix" class="md-nav__link">
    threshold_matrix
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pam.samplers.tour.TourPlanner.threshold_value" class="md-nav__link">
    threshold_value
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pam.samplers.tour.TourPlanner.add_return_origin" class="md-nav__link">
    add_return_origin()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pam.samplers.tour.TourPlanner.add_tour_activity" class="md-nav__link">
    add_tour_activity()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pam.samplers.tour.TourPlanner.add_tour_leg" class="md-nav__link">
    add_tour_leg()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pam.samplers.tour.TourPlanner.apply" class="md-nav__link">
    apply()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pam.samplers.tour.TourPlanner.sequence_stops" class="md-nav__link">
    sequence_stops()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pam.samplers.tour.ValidateTourOD" class="md-nav__link">
    ValidateTourOD
  </a>
  
    <nav class="md-nav" aria-label="ValidateTourOD">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#pam.samplers.tour.ValidateTourOD.od_density" class="md-nav__link">
    od_density
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pam.samplers.tour.ValidateTourOD.plot_compare_density" class="md-nav__link">
    plot_compare_density()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pam.samplers.tour.ValidateTourOD.plot_density_difference" class="md-nav__link">
    plot_density_difference()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pam.samplers.tour.ValidateTourOD.plot_validate_spatial_density" class="md-nav__link">
    plot_validate_spatial_density()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pam.samplers.tour.create_density_gdf" class="md-nav__link">
    create_density_gdf()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pam.samplers.tour.interpolate" class="md-nav__link">
    interpolate()
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_9_15" >
      
      
      
        <label class="md-nav__link" for="__nav_9_15" id="__nav_9_15_label" tabindex="0">
          pam.report
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_9_15_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_9_15">
          <span class="md-nav__icon md-icon"></span>
          pam.report
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../report/stringify/" class="md-nav__link">
        pam.report.stringify
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../report/summary/" class="md-nav__link">
        pam.report.summary
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../report/benchmarks/" class="md-nav__link">
        pam.report.benchmarks
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_9_16" >
      
      
      
        <label class="md-nav__link" for="__nav_9_16" id="__nav_9_16_label" tabindex="0">
          pam.policy
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_9_16_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_9_16">
          <span class="md-nav__icon md-icon"></span>
          pam.policy
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../policy/probability_samplers/" class="md-nav__link">
        pam.policy.probability_samplers
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../policy/modifiers/" class="md-nav__link">
        pam.policy.modifiers
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../policy/policies/" class="md-nav__link">
        pam.policy.policies
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../policy/filters/" class="md-nav__link">
        pam.policy.filters
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#pam.samplers.tour" class="md-nav__link">
    pam.samplers.tour
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pam.samplers.tour.ActivityDuration" class="md-nav__link">
    ActivityDuration
  </a>
  
    <nav class="md-nav" aria-label="ActivityDuration">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#pam.samplers.tour.ActivityDuration.model_activity_duration" class="md-nav__link">
    model_activity_duration()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pam.samplers.tour.ActivityDuration.model_distance" class="md-nav__link">
    model_distance()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pam.samplers.tour.ActivityDuration.model_journey_time" class="md-nav__link">
    model_journey_time()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pam.samplers.tour.ActivityDuration.model_stop_time" class="md-nav__link">
    model_stop_time()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pam.samplers.tour.FrequencySampler" class="md-nav__link">
    FrequencySampler
  </a>
  
    <nav class="md-nav" aria-label="FrequencySampler">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#pam.samplers.tour.FrequencySampler.distribution" class="md-nav__link">
    distribution
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pam.samplers.tour.FrequencySampler.frequency" class="md-nav__link">
    frequency
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pam.samplers.tour.FrequencySampler.threshold_matrix" class="md-nav__link">
    threshold_matrix
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pam.samplers.tour.FrequencySampler.threshold_value" class="md-nav__link">
    threshold_value
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pam.samplers.tour.FrequencySampler.sample" class="md-nav__link">
    sample()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pam.samplers.tour.FrequencySampler.samples" class="md-nav__link">
    samples()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pam.samplers.tour.FrequencySampler.threshold_sample" class="md-nav__link">
    threshold_sample()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pam.samplers.tour.PivotDistributionSampler" class="md-nav__link">
    PivotDistributionSampler
  </a>
  
    <nav class="md-nav" aria-label="PivotDistributionSampler">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#pam.samplers.tour.PivotDistributionSampler.demand" class="md-nav__link">
    demand
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pam.samplers.tour.PivotDistributionSampler.plot" class="md-nav__link">
    plot()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pam.samplers.tour.PivotDistributionSampler.sample" class="md-nav__link">
    sample()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pam.samplers.tour.TourPlanner" class="md-nav__link">
    TourPlanner
  </a>
  
    <nav class="md-nav" aria-label="TourPlanner">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#pam.samplers.tour.TourPlanner.d_activity" class="md-nav__link">
    d_activity
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pam.samplers.tour.TourPlanner.d_dist" class="md-nav__link">
    d_dist
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pam.samplers.tour.TourPlanner.d_freq" class="md-nav__link">
    d_freq
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pam.samplers.tour.TourPlanner.facility_sampler" class="md-nav__link">
    facility_sampler
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pam.samplers.tour.TourPlanner.hour" class="md-nav__link">
    hour
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pam.samplers.tour.TourPlanner.minute" class="md-nav__link">
    minute
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pam.samplers.tour.TourPlanner.o_activity" class="md-nav__link">
    o_activity
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pam.samplers.tour.TourPlanner.o_zone" class="md-nav__link">
    o_zone
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pam.samplers.tour.TourPlanner.stops" class="md-nav__link">
    stops
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pam.samplers.tour.TourPlanner.threshold_matrix" class="md-nav__link">
    threshold_matrix
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pam.samplers.tour.TourPlanner.threshold_value" class="md-nav__link">
    threshold_value
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pam.samplers.tour.TourPlanner.add_return_origin" class="md-nav__link">
    add_return_origin()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pam.samplers.tour.TourPlanner.add_tour_activity" class="md-nav__link">
    add_tour_activity()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pam.samplers.tour.TourPlanner.add_tour_leg" class="md-nav__link">
    add_tour_leg()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pam.samplers.tour.TourPlanner.apply" class="md-nav__link">
    apply()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pam.samplers.tour.TourPlanner.sequence_stops" class="md-nav__link">
    sequence_stops()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pam.samplers.tour.ValidateTourOD" class="md-nav__link">
    ValidateTourOD
  </a>
  
    <nav class="md-nav" aria-label="ValidateTourOD">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#pam.samplers.tour.ValidateTourOD.od_density" class="md-nav__link">
    od_density
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pam.samplers.tour.ValidateTourOD.plot_compare_density" class="md-nav__link">
    plot_compare_density()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pam.samplers.tour.ValidateTourOD.plot_density_difference" class="md-nav__link">
    plot_density_difference()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pam.samplers.tour.ValidateTourOD.plot_validate_spatial_density" class="md-nav__link">
    plot_validate_spatial_density()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pam.samplers.tour.create_density_gdf" class="md-nav__link">
    create_density_gdf()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pam.samplers.tour.interpolate" class="md-nav__link">
    interpolate()
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
  


  <h1>pam.samplers.tour</h1>

<div class="doc doc-object doc-module">


<a id="pam.samplers.tour"></a>
  <div class="doc doc-contents first">

  

  <div class="doc doc-children">








<div class="doc doc-object doc-class">



<h2 id="pam.samplers.tour.ActivityDuration" class="doc doc-heading">
        <code>ActivityDuration</code>


<a href="#pam.samplers.tour.ActivityDuration" class="headerlink" title="Permanent link">#</a></h2>


  <div class="doc doc-contents ">

  
      <p>Object to estimate the distance, journey time, and stop time of activities. 
The last function activity_duration combines these three functions to output parameters that help build tour plans.</p>



  

  <div class="doc doc-children">









<div class="doc doc-object doc-function">



<h3 id="pam.samplers.tour.ActivityDuration.model_activity_duration" class="doc doc-heading">
<code class="highlight language-python"><span class="n">model_activity_duration</span><span class="p">(</span><span class="n">o_loc</span><span class="p">,</span> <span class="n">d_loc</span><span class="p">,</span> <span class="n">end_tm</span><span class="p">,</span> <span class="n">speed</span> <span class="o">=</span> <span class="mi">50000</span> <span class="o">/</span> <span class="mi">3600</span><span class="p">,</span> <span class="n">maxi</span> <span class="o">=</span> <span class="mi">3600</span><span class="p">,</span> <span class="n">mini</span> <span class="o">=</span> <span class="mi">600</span><span class="p">)</span></code>

<a href="#pam.samplers.tour.ActivityDuration.model_activity_duration" class="headerlink" title="Permanent link">#</a></h3>


  <div class="doc doc-contents ">
  
      <p>Returns estimated Activity Duration, which is combination of previous three functions to return parameters 
for next activity in Plan.
:param o_loc: origin facility
:param d_loc: destination facility
:param end_tm: most recent end time of previous leg
:param speed: speed of vehicle, default at 50km/hr
:param maxi: maximum stop time
:param mini: minimum stop time
:return: stop_duration, start_tm, and end_tm for new activity</p>

      <details class="quote">
        <summary>Source code in <code>pam/samplers/tour.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">model_activity_duration</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">o_loc</span><span class="p">,</span> <span class="n">d_loc</span><span class="p">,</span> <span class="n">end_tm</span><span class="p">,</span> <span class="n">speed</span><span class="o">=</span><span class="mi">50000</span><span class="o">/</span><span class="mi">3600</span><span class="p">,</span> <span class="n">maxi</span><span class="o">=</span><span class="mi">3600</span><span class="p">,</span> <span class="n">mini</span><span class="o">=</span><span class="mi">600</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot; </span>
<span class="sd">    Returns estimated Activity Duration, which is combination of previous three functions to return parameters </span>
<span class="sd">    for next activity in Plan.</span>
<span class="sd">    :param o_loc: origin facility</span>
<span class="sd">    :param d_loc: destination facility</span>
<span class="sd">    :param end_tm: most recent end time of previous leg</span>
<span class="sd">    :param speed: speed of vehicle, default at 50km/hr</span>
<span class="sd">    :param maxi: maximum stop time</span>
<span class="sd">    :param mini: minimum stop time</span>
<span class="sd">    :return: stop_duration, start_tm, and end_tm for new activity</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">trip_distance</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">model_distance</span><span class="p">(</span><span class="n">o_loc</span><span class="p">,</span> <span class="n">d_loc</span><span class="p">)</span>
    <span class="n">trip_duration</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">model_journey_time</span><span class="p">(</span><span class="n">trip_distance</span><span class="p">,</span> <span class="n">speed</span><span class="p">)</span>
    <span class="n">stop_duration</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">model_stop_time</span><span class="p">(</span><span class="n">trip_duration</span><span class="p">,</span> <span class="n">maxi</span><span class="p">,</span> <span class="n">mini</span><span class="p">)</span>

    <span class="n">start_tm</span> <span class="o">=</span> <span class="n">end_tm</span>
    <span class="n">end_tm</span> <span class="o">=</span> <span class="n">end_tm</span> <span class="o">+</span> <span class="nb">int</span><span class="p">(</span><span class="n">trip_duration</span><span class="o">/</span><span class="mi">60</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">stop_duration</span><span class="p">,</span> <span class="n">start_tm</span><span class="p">,</span> <span class="n">end_tm</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="pam.samplers.tour.ActivityDuration.model_distance" class="doc doc-heading">
<code class="highlight language-python"><span class="n">model_distance</span><span class="p">(</span><span class="n">o</span><span class="p">,</span> <span class="n">d</span><span class="p">,</span> <span class="n">scale</span> <span class="o">=</span> <span class="mf">1.4</span><span class="p">)</span></code>

<a href="#pam.samplers.tour.ActivityDuration.model_distance" class="headerlink" title="Permanent link">#</a></h3>


  <div class="doc doc-contents ">
  
      <p>Models distance between two shapely points</p>

      <details class="quote">
        <summary>Source code in <code>pam/samplers/tour.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">model_distance</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">o</span><span class="p">,</span> <span class="n">d</span><span class="p">,</span> <span class="n">scale</span><span class="o">=</span><span class="mf">1.4</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Models distance between two shapely points</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">o</span><span class="o">.</span><span class="n">distance</span><span class="p">(</span><span class="n">d</span><span class="p">)</span> <span class="o">*</span> <span class="n">scale</span>                                                                                                                 
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="pam.samplers.tour.ActivityDuration.model_journey_time" class="doc doc-heading">
<code class="highlight language-python"><span class="n">model_journey_time</span><span class="p">(</span><span class="n">distance</span><span class="p">,</span> <span class="n">speed</span> <span class="o">=</span> <span class="mi">50000</span> <span class="o">/</span> <span class="mi">3600</span><span class="p">)</span></code>

<a href="#pam.samplers.tour.ActivityDuration.model_journey_time" class="headerlink" title="Permanent link">#</a></h3>


  <div class="doc doc-contents ">
  
      <p>:param distance: in m
:param speed: in m/s, default 50km/hr
:return: modelled journey time</p>

      <details class="quote">
        <summary>Source code in <code>pam/samplers/tour.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">model_journey_time</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">distance</span><span class="p">,</span> <span class="n">speed</span><span class="o">=</span><span class="mi">50000</span><span class="o">/</span><span class="mi">3600</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    :param distance: in m</span>
<span class="sd">    :param speed: in m/s, default 50km/hr</span>
<span class="sd">    :return: modelled journey time</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">distance</span> <span class="o">/</span> <span class="n">speed</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="pam.samplers.tour.ActivityDuration.model_stop_time" class="doc doc-heading">
<code class="highlight language-python"><span class="n">model_stop_time</span><span class="p">(</span><span class="n">time</span><span class="p">,</span> <span class="n">maxi</span> <span class="o">=</span> <span class="mi">3600</span><span class="p">,</span> <span class="n">mini</span> <span class="o">=</span> <span class="mi">600</span><span class="p">)</span></code>

<a href="#pam.samplers.tour.ActivityDuration.model_stop_time" class="headerlink" title="Permanent link">#</a></h3>


  <div class="doc doc-contents ">
  
      <p>Returns a duration that is between the minimum amount of seconds, an input journey time, or maximum time.
:param time: in s
:param maxi: maximum time for a journey
:param mini: minimum time for a journey
:return: maximum value between minimum time or the minimum of journey time and maximum time</p>

      <details class="quote">
        <summary>Source code in <code>pam/samplers/tour.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">model_stop_time</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">time</span><span class="p">,</span> <span class="n">maxi</span><span class="o">=</span><span class="mi">3600</span><span class="p">,</span> <span class="n">mini</span><span class="o">=</span><span class="mi">600</span><span class="p">):</span> 
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Returns a duration that is between the minimum amount of seconds, an input journey time, or maximum time.</span>
<span class="sd">    :param time: in s</span>
<span class="sd">    :param maxi: maximum time for a journey</span>
<span class="sd">    :param mini: minimum time for a journey</span>
<span class="sd">    :return: maximum value between minimum time or the minimum of journey time and maximum time</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="nb">max</span><span class="p">([</span><span class="n">mini</span><span class="p">,</span> <span class="nb">min</span><span class="p">([</span><span class="n">time</span><span class="p">,</span> <span class="n">maxi</span><span class="p">])])</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>



  </div>

  </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="pam.samplers.tour.FrequencySampler" class="doc doc-heading">
<code class="highlight language-python"><span class="n">FrequencySampler</span><span class="p">(</span><span class="n">dist</span><span class="p">,</span> <span class="n">freq</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">threshold_matrix</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">threshold_value</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span></code>

<a href="#pam.samplers.tour.FrequencySampler" class="headerlink" title="Permanent link">#</a></h2>


  <div class="doc doc-contents ">

  
      <p>Object for initiating and sampling from frequency weighted distributing. 
This object includes three samplers: a single sample, multiple samples, or sample based on a threshold value 
(requires a threshold matrix).</p>

  
      <p>:param dist: a dictionary of an input distribution
:param freq: a parameter to weight the samplers
:param threshold_matrix: a dataframe that will be reduced based on a specified threshold_value.
:param threshold_value: a value to filter the threshold_matrix. This is the maximum allowed value.</p>

          <details class="quote">
            <summary>Source code in <code>pam/samplers/tour.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dist</span><span class="p">,</span> <span class="n">freq</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">threshold_matrix</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">threshold_value</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    :param dist: a dictionary of an input distribution</span>
<span class="sd">    :param freq: a parameter to weight the samplers</span>
<span class="sd">    :param threshold_matrix: a dataframe that will be reduced based on a specified threshold_value.</span>
<span class="sd">    :param threshold_value: a value to filter the threshold_matrix. This is the maximum allowed value.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">distribution</span> <span class="o">=</span> <span class="n">dist</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">frequency</span> <span class="o">=</span> <span class="n">freq</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">threshold_matrix</span> <span class="o">=</span> <span class="n">threshold_matrix</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">threshold_value</span> <span class="o">=</span> <span class="n">threshold_value</span>
</code></pre></div></td></tr></table></div>
          </details>

  

  <div class="doc doc-children">







<div class="doc doc-object doc-attribute">



<h3 id="pam.samplers.tour.FrequencySampler.distribution" class="doc doc-heading">
<code class="highlight language-python"><span class="n">distribution</span> <span class="o">=</span> <span class="n">dist</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#pam.samplers.tour.FrequencySampler.distribution" class="headerlink" title="Permanent link">#</a></h3>


  <div class="doc doc-contents ">
  </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="pam.samplers.tour.FrequencySampler.frequency" class="doc doc-heading">
<code class="highlight language-python"><span class="n">frequency</span> <span class="o">=</span> <span class="n">freq</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#pam.samplers.tour.FrequencySampler.frequency" class="headerlink" title="Permanent link">#</a></h3>


  <div class="doc doc-contents ">
  </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="pam.samplers.tour.FrequencySampler.threshold_matrix" class="doc doc-heading">
<code class="highlight language-python"><span class="n">threshold_matrix</span> <span class="o">=</span> <span class="n">threshold_matrix</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#pam.samplers.tour.FrequencySampler.threshold_matrix" class="headerlink" title="Permanent link">#</a></h3>


  <div class="doc doc-contents ">
  </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="pam.samplers.tour.FrequencySampler.threshold_value" class="doc doc-heading">
<code class="highlight language-python"><span class="n">threshold_value</span> <span class="o">=</span> <span class="n">threshold_value</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#pam.samplers.tour.FrequencySampler.threshold_value" class="headerlink" title="Permanent link">#</a></h3>


  <div class="doc doc-contents ">
  </div>

</div>



<div class="doc doc-object doc-function">



<h3 id="pam.samplers.tour.FrequencySampler.sample" class="doc doc-heading">
<code class="highlight language-python"><span class="n">sample</span><span class="p">()</span></code>

<a href="#pam.samplers.tour.FrequencySampler.sample" class="headerlink" title="Permanent link">#</a></h3>


  <div class="doc doc-contents ">
  
      <p>:return: single object or list of objects sampled from distribution</p>

      <details class="quote">
        <summary>Source code in <code>pam/samplers/tour.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">sample</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    :return: single object or list of objects sampled from distribution</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">random</span><span class="o">.</span><span class="n">choices</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">distribution</span><span class="p">,</span> <span class="n">weights</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">frequency</span><span class="p">,</span> <span class="n">k</span><span class="o">=</span><span class="mi">1</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="pam.samplers.tour.FrequencySampler.samples" class="doc doc-heading">
<code class="highlight language-python"><span class="n">samples</span><span class="p">(</span><span class="n">n</span> <span class="o">=</span> <span class="mi">1</span><span class="p">)</span></code>

<a href="#pam.samplers.tour.FrequencySampler.samples" class="headerlink" title="Permanent link">#</a></h3>


  <div class="doc doc-contents ">
  
      <p>:param n: number of samples to be returned
:return: single object or list of objects sampled from distribution</p>

      <details class="quote">
        <summary>Source code in <code>pam/samplers/tour.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">samples</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">n</span><span class="o">=</span><span class="mi">1</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    :param n: number of samples to be returned</span>
<span class="sd">    :return: single object or list of objects sampled from distribution</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">random</span><span class="o">.</span><span class="n">choices</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">distribution</span><span class="p">,</span> <span class="n">weights</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">frequency</span><span class="p">,</span> <span class="n">k</span><span class="o">=</span><span class="n">n</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="pam.samplers.tour.FrequencySampler.threshold_sample" class="doc doc-heading">
<code class="highlight language-python"><span class="n">threshold_sample</span><span class="p">()</span></code>

<a href="#pam.samplers.tour.FrequencySampler.threshold_sample" class="headerlink" title="Permanent link">#</a></h3>


  <div class="doc doc-contents ">
  
      <p>Returns a sampler of a distribution that has been reduced based on a threshold value.</p>

      <details class="quote">
        <summary>Source code in <code>pam/samplers/tour.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">threshold_sample</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Returns a sampler of a distribution that has been reduced based on a threshold value.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">d_list</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">threshold_matrix</span>
    <span class="n">d_list</span> <span class="o">=</span> <span class="n">d_list</span><span class="p">[</span><span class="n">d_list</span><span class="o">&lt;=</span><span class="bp">self</span><span class="o">.</span><span class="n">threshold_value</span><span class="p">]</span><span class="o">.</span><span class="n">index</span>
    <span class="n">d_threshold</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">distribution</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">distribution</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">isin</span><span class="p">(</span><span class="n">d_list</span><span class="p">)]</span>

    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">d_threshold</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
        <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span><span class="s1">&#39;No destinations within this threshold value, change threshold&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="kc">None</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">random</span><span class="o">.</span><span class="n">choices</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">d_threshold</span><span class="o">.</span><span class="n">index</span><span class="p">),</span> <span class="n">weights</span><span class="o">=</span><span class="nb">list</span><span class="p">(</span><span class="n">d_threshold</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">frequency</span><span class="p">]),</span> <span class="n">k</span><span class="o">=</span><span class="mi">1</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>        
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>



  </div>

  </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="pam.samplers.tour.PivotDistributionSampler" class="doc doc-heading">
<code class="highlight language-python"><span class="n">PivotDistributionSampler</span><span class="p">(</span><span class="n">bins</span><span class="p">,</span> <span class="n">pivots</span><span class="p">,</span> <span class="n">total</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span></code>

<a href="#pam.samplers.tour.PivotDistributionSampler" class="headerlink" title="Permanent link">#</a></h2>


  <div class="doc doc-contents ">

  
      <p>Defines a distribution, a sampler, and plots based on input values. The resulting distribution can be sampled
for inputs required to build an agent plan (i.e, time of day, repetition of activities).</p>

  
      <p>Builds a dict distribution based on bins (i.e, hours) and pivots (i.e, hourly demand). 
The interpolate function defined above is applied to estimate values within the bin range where the input pivot does not specify a value.
:param bins: a range or dictionary of values
:param pivots: a dictionary of values associated with the bins</p>

          <details class="quote">
            <summary>Source code in <code>pam/samplers/tour.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span>
<span class="normal">75</span>
<span class="normal">76</span>
<span class="normal">77</span>
<span class="normal">78</span>
<span class="normal">79</span>
<span class="normal">80</span>
<span class="normal">81</span>
<span class="normal">82</span>
<span class="normal">83</span>
<span class="normal">84</span>
<span class="normal">85</span>
<span class="normal">86</span>
<span class="normal">87</span>
<span class="normal">88</span>
<span class="normal">89</span>
<span class="normal">90</span>
<span class="normal">91</span>
<span class="normal">92</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bins</span><span class="p">,</span> <span class="n">pivots</span><span class="p">,</span> <span class="n">total</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Builds a dict distribution based on bins (i.e, hours) and pivots (i.e, hourly demand). </span>
<span class="sd">    The interpolate function defined above is applied to estimate values within the bin range where the input pivot does not specify a value.</span>
<span class="sd">    :param bins: a range or dictionary of values</span>
<span class="sd">    :param pivots: a dictionary of values associated with the bins</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">demand</span> <span class="o">=</span> <span class="p">{}</span>

    <span class="k">if</span> <span class="n">bins</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">pivots</span><span class="p">:</span>
        <span class="n">pivots</span><span class="p">[</span><span class="n">bins</span><span class="p">[</span><span class="mi">0</span><span class="p">]]</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">if</span> <span class="n">bins</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">+</span><span class="mi">1</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">pivots</span><span class="p">:</span>
        <span class="n">pivots</span><span class="p">[</span><span class="n">bins</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>

    <span class="n">pivot_keys</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">pivots</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>

    <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">pivot_keys</span><span class="p">)</span><span class="o">-</span><span class="mi">1</span><span class="p">):</span>
        <span class="n">ka</span> <span class="o">=</span> <span class="n">pivot_keys</span><span class="p">[</span><span class="n">k</span><span class="p">]</span>
        <span class="n">kb</span> <span class="o">=</span> <span class="n">pivot_keys</span><span class="p">[</span><span class="n">k</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span>
        <span class="n">pivot_a</span> <span class="o">=</span> <span class="n">pivots</span><span class="p">[</span><span class="n">ka</span><span class="p">]</span>
        <span class="n">pivot_b</span> <span class="o">=</span> <span class="n">pivots</span><span class="p">[</span><span class="n">kb</span><span class="p">]</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">bins</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">ka</span> <span class="o">&lt;=</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">kb</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">demand</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">interpolate</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">ka</span><span class="p">,</span> <span class="n">pivot_a</span><span class="p">,</span> <span class="n">kb</span><span class="p">,</span> <span class="n">pivot_b</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">continue</span>       

    <span class="k">if</span> <span class="n">total</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">dist_sum</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">demand</span><span class="o">.</span><span class="n">values</span><span class="p">())</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">bins</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">demand</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">demand</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">/</span><span class="n">dist_sum</span><span class="p">)</span><span class="o">*</span><span class="n">total</span>
</code></pre></div></td></tr></table></div>
          </details>

  

  <div class="doc doc-children">







<div class="doc doc-object doc-attribute">



<h3 id="pam.samplers.tour.PivotDistributionSampler.demand" class="doc doc-heading">
<code class="highlight language-python"><span class="n">demand</span> <span class="o">=</span> <span class="p">{}</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#pam.samplers.tour.PivotDistributionSampler.demand" class="headerlink" title="Permanent link">#</a></h3>


  <div class="doc doc-contents ">
  </div>

</div>



<div class="doc doc-object doc-function">



<h3 id="pam.samplers.tour.PivotDistributionSampler.plot" class="doc doc-heading">
<code class="highlight language-python"><span class="n">plot</span><span class="p">(</span><span class="n">plot_title</span><span class="p">,</span> <span class="n">x_label</span><span class="p">,</span> <span class="n">y_label</span><span class="p">)</span></code>

<a href="#pam.samplers.tour.PivotDistributionSampler.plot" class="headerlink" title="Permanent link">#</a></h3>


  <div class="doc doc-contents ">
  
      <p>Plots distribution to validate the distribution aligns with expected hourly demand.</p>

      <details class="quote">
        <summary>Source code in <code>pam/samplers/tour.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">plot</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">plot_title</span><span class="p">,</span> <span class="n">x_label</span><span class="p">,</span> <span class="n">y_label</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Plots distribution to validate the distribution aligns with expected hourly demand.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span><span class="mi">4</span><span class="p">))</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">bar</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">demand</span><span class="o">.</span><span class="n">keys</span><span class="p">()),</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">demand</span><span class="o">.</span><span class="n">values</span><span class="p">()))</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">demand</span><span class="o">.</span><span class="n">keys</span><span class="p">()),</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">demand</span><span class="o">.</span><span class="n">values</span><span class="p">()),</span> <span class="n">c</span> <span class="o">=</span> <span class="s1">&#39;orange&#39;</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="n">plot_title</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="n">x_label</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="n">y_label</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">fig</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="pam.samplers.tour.PivotDistributionSampler.sample" class="doc doc-heading">
<code class="highlight language-python"><span class="n">sample</span><span class="p">()</span></code>

<a href="#pam.samplers.tour.PivotDistributionSampler.sample" class="headerlink" title="Permanent link">#</a></h3>


  <div class="doc doc-contents ">

      <details class="quote">
        <summary>Source code in <code>pam/samplers/tour.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">108</span>
<span class="normal">109</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">sample</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">random</span><span class="o">.</span><span class="n">choices</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">demand</span><span class="o">.</span><span class="n">keys</span><span class="p">()),</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">demand</span><span class="o">.</span><span class="n">values</span><span class="p">()),</span> <span class="n">k</span><span class="o">=</span><span class="mi">1</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>



  </div>

  </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="pam.samplers.tour.TourPlanner" class="doc doc-heading">
<code class="highlight language-python"><span class="n">TourPlanner</span><span class="p">(</span><span class="n">stops</span><span class="p">,</span> <span class="n">hour</span><span class="p">,</span> <span class="n">minute</span><span class="p">,</span> <span class="n">o_zone</span><span class="p">,</span> <span class="n">d_dist</span><span class="p">,</span> <span class="n">d_freq</span><span class="p">,</span> <span class="n">facility_sampler</span><span class="p">,</span> <span class="n">activity_params</span><span class="p">,</span> <span class="n">threshold_matrix</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">threshold_value</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span></code>

<a href="#pam.samplers.tour.TourPlanner" class="headerlink" title="Permanent link">#</a></h2>


  <div class="doc doc-contents ">

  
      <p>Object to plan the tour of the agent. This includes sequencing the stops and adding the activity and leg via an apply method.</p>

  
      <p>:params stops: # of stops
:params hour: input of sampled hour
:params minute: input of sampled minute
:params o_zone: origin zone
:params d_dist: distribution of destination zones
:params d_freq: frequency value to sample of destination distribution
:params facility_sampler: returned object from FacilitySampler
:params activity_params: dictionary of str of origin activity (str) and destination activity (str)
:params threshold_matrix: dataframe that will be reduced based on threshold value
:params threshold_value: maximum threshold value allowed between origin and destination in threshold_matrix.</p>

          <details class="quote">
            <summary>Source code in <code>pam/samplers/tour.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">stops</span><span class="p">,</span> <span class="n">hour</span><span class="p">,</span> <span class="n">minute</span><span class="p">,</span> <span class="n">o_zone</span><span class="p">,</span> <span class="n">d_dist</span><span class="p">,</span> <span class="n">d_freq</span><span class="p">,</span> <span class="n">facility_sampler</span><span class="p">,</span> <span class="n">activity_params</span><span class="p">,</span> <span class="n">threshold_matrix</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">threshold_value</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    :params stops: # of stops</span>
<span class="sd">    :params hour: input of sampled hour</span>
<span class="sd">    :params minute: input of sampled minute</span>
<span class="sd">    :params o_zone: origin zone</span>
<span class="sd">    :params d_dist: distribution of destination zones</span>
<span class="sd">    :params d_freq: frequency value to sample of destination distribution</span>
<span class="sd">    :params facility_sampler: returned object from FacilitySampler</span>
<span class="sd">    :params activity_params: dictionary of str of origin activity (str) and destination activity (str)</span>
<span class="sd">    :params threshold_matrix: dataframe that will be reduced based on threshold value</span>
<span class="sd">    :params threshold_value: maximum threshold value allowed between origin and destination in threshold_matrix.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">stops</span> <span class="o">=</span> <span class="n">stops</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">hour</span> <span class="o">=</span> <span class="n">hour</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">minute</span> <span class="o">=</span> <span class="n">minute</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">o_zone</span> <span class="o">=</span> <span class="n">o_zone</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">threshold_matrix</span> <span class="o">=</span> <span class="n">threshold_matrix</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">d_dist</span> <span class="o">=</span> <span class="n">d_dist</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">d_freq</span> <span class="o">=</span> <span class="n">d_freq</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">threshold_value</span> <span class="o">=</span> <span class="n">threshold_value</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">facility_sampler</span> <span class="o">=</span> <span class="n">facility_sampler</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">o_activity</span> <span class="o">=</span> <span class="n">activity_params</span><span class="p">[</span><span class="s1">&#39;o_activity&#39;</span><span class="p">]</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">d_activity</span> <span class="o">=</span> <span class="n">activity_params</span><span class="p">[</span><span class="s1">&#39;d_activity&#39;</span><span class="p">]</span>
</code></pre></div></td></tr></table></div>
          </details>

  

  <div class="doc doc-children">







<div class="doc doc-object doc-attribute">



<h3 id="pam.samplers.tour.TourPlanner.d_activity" class="doc doc-heading">
<code class="highlight language-python"><span class="n">d_activity</span> <span class="o">=</span> <span class="n">activity_params</span><span class="p">[</span><span class="s1">&#39;d_activity&#39;</span><span class="p">]</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#pam.samplers.tour.TourPlanner.d_activity" class="headerlink" title="Permanent link">#</a></h3>


  <div class="doc doc-contents ">
  </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="pam.samplers.tour.TourPlanner.d_dist" class="doc doc-heading">
<code class="highlight language-python"><span class="n">d_dist</span> <span class="o">=</span> <span class="n">d_dist</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#pam.samplers.tour.TourPlanner.d_dist" class="headerlink" title="Permanent link">#</a></h3>


  <div class="doc doc-contents ">
  </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="pam.samplers.tour.TourPlanner.d_freq" class="doc doc-heading">
<code class="highlight language-python"><span class="n">d_freq</span> <span class="o">=</span> <span class="n">d_freq</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#pam.samplers.tour.TourPlanner.d_freq" class="headerlink" title="Permanent link">#</a></h3>


  <div class="doc doc-contents ">
  </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="pam.samplers.tour.TourPlanner.facility_sampler" class="doc doc-heading">
<code class="highlight language-python"><span class="n">facility_sampler</span> <span class="o">=</span> <span class="n">facility_sampler</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#pam.samplers.tour.TourPlanner.facility_sampler" class="headerlink" title="Permanent link">#</a></h3>


  <div class="doc doc-contents ">
  </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="pam.samplers.tour.TourPlanner.hour" class="doc doc-heading">
<code class="highlight language-python"><span class="n">hour</span> <span class="o">=</span> <span class="n">hour</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#pam.samplers.tour.TourPlanner.hour" class="headerlink" title="Permanent link">#</a></h3>


  <div class="doc doc-contents ">
  </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="pam.samplers.tour.TourPlanner.minute" class="doc doc-heading">
<code class="highlight language-python"><span class="n">minute</span> <span class="o">=</span> <span class="n">minute</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#pam.samplers.tour.TourPlanner.minute" class="headerlink" title="Permanent link">#</a></h3>


  <div class="doc doc-contents ">
  </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="pam.samplers.tour.TourPlanner.o_activity" class="doc doc-heading">
<code class="highlight language-python"><span class="n">o_activity</span> <span class="o">=</span> <span class="n">activity_params</span><span class="p">[</span><span class="s1">&#39;o_activity&#39;</span><span class="p">]</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#pam.samplers.tour.TourPlanner.o_activity" class="headerlink" title="Permanent link">#</a></h3>


  <div class="doc doc-contents ">
  </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="pam.samplers.tour.TourPlanner.o_zone" class="doc doc-heading">
<code class="highlight language-python"><span class="n">o_zone</span> <span class="o">=</span> <span class="n">o_zone</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#pam.samplers.tour.TourPlanner.o_zone" class="headerlink" title="Permanent link">#</a></h3>


  <div class="doc doc-contents ">
  </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="pam.samplers.tour.TourPlanner.stops" class="doc doc-heading">
<code class="highlight language-python"><span class="n">stops</span> <span class="o">=</span> <span class="n">stops</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#pam.samplers.tour.TourPlanner.stops" class="headerlink" title="Permanent link">#</a></h3>


  <div class="doc doc-contents ">
  </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="pam.samplers.tour.TourPlanner.threshold_matrix" class="doc doc-heading">
<code class="highlight language-python"><span class="n">threshold_matrix</span> <span class="o">=</span> <span class="n">threshold_matrix</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#pam.samplers.tour.TourPlanner.threshold_matrix" class="headerlink" title="Permanent link">#</a></h3>


  <div class="doc doc-contents ">
  </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="pam.samplers.tour.TourPlanner.threshold_value" class="doc doc-heading">
<code class="highlight language-python"><span class="n">threshold_value</span> <span class="o">=</span> <span class="n">threshold_value</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#pam.samplers.tour.TourPlanner.threshold_value" class="headerlink" title="Permanent link">#</a></h3>


  <div class="doc doc-contents ">
  </div>

</div>



<div class="doc doc-object doc-function">



<h3 id="pam.samplers.tour.TourPlanner.add_return_origin" class="doc doc-heading">
<code class="highlight language-python"><span class="n">add_return_origin</span><span class="p">(</span><span class="n">agent</span><span class="p">,</span> <span class="n">k</span><span class="p">,</span> <span class="n">o_loc</span><span class="p">,</span> <span class="n">d_zone</span><span class="p">,</span> <span class="n">d_loc</span><span class="p">,</span> <span class="n">end_tm</span><span class="p">)</span></code>

<a href="#pam.samplers.tour.TourPlanner.add_return_origin" class="headerlink" title="Permanent link">#</a></h3>


  <div class="doc doc-contents ">
  
      <p>Driver returns to origin, from their most recent stop to the origin location.
:params agent: agent for which the leg &amp; activity will be added to Plan
:params k: when used in a for loop, k populates the next sequence valuey
:params o_loc: origin facility of leg &amp; activity
:params d_zone: destination zone of leg &amp; activity
:params d_loc: destination facility of leg &amp; activity
:params end_tm: obtained from ActivityDuration object
:params speed: default setting of 50km/hr
:return: end_tm after returning to origin.</p>

      <details class="quote">
        <summary>Source code in <code>pam/samplers/tour.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">356</span>
<span class="normal">357</span>
<span class="normal">358</span>
<span class="normal">359</span>
<span class="normal">360</span>
<span class="normal">361</span>
<span class="normal">362</span>
<span class="normal">363</span>
<span class="normal">364</span>
<span class="normal">365</span>
<span class="normal">366</span>
<span class="normal">367</span>
<span class="normal">368</span>
<span class="normal">369</span>
<span class="normal">370</span>
<span class="normal">371</span>
<span class="normal">372</span>
<span class="normal">373</span>
<span class="normal">374</span>
<span class="normal">375</span>
<span class="normal">376</span>
<span class="normal">377</span>
<span class="normal">378</span>
<span class="normal">379</span>
<span class="normal">380</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">add_return_origin</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">agent</span><span class="p">,</span> <span class="n">k</span><span class="p">,</span> <span class="n">o_loc</span><span class="p">,</span> <span class="n">d_zone</span><span class="p">,</span> <span class="n">d_loc</span><span class="p">,</span> <span class="n">end_tm</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot; </span>
<span class="sd">    Driver returns to origin, from their most recent stop to the origin location.</span>
<span class="sd">    :params agent: agent for which the leg &amp; activity will be added to Plan</span>
<span class="sd">    :params k: when used in a for loop, k populates the next sequence valuey</span>
<span class="sd">    :params o_loc: origin facility of leg &amp; activity</span>
<span class="sd">    :params d_zone: destination zone of leg &amp; activity</span>
<span class="sd">    :params d_loc: destination facility of leg &amp; activity</span>
<span class="sd">    :params end_tm: obtained from ActivityDuration object</span>
<span class="sd">    :params speed: default setting of 50km/hr</span>
<span class="sd">    :return: end_tm after returning to origin.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">trip_distance</span> <span class="o">=</span> <span class="n">ActivityDuration</span><span class="p">()</span><span class="o">.</span><span class="n">model_distance</span><span class="p">(</span><span class="n">o_loc</span><span class="p">,</span> <span class="n">d_loc</span><span class="p">)</span>
    <span class="n">trip_duration</span> <span class="o">=</span> <span class="n">ActivityDuration</span><span class="p">()</span><span class="o">.</span><span class="n">model_journey_time</span><span class="p">(</span><span class="n">trip_distance</span><span class="p">)</span>

    <span class="n">start_tm</span> <span class="o">=</span> <span class="n">end_tm</span>
    <span class="n">end_tm</span> <span class="o">=</span> <span class="n">end_tm</span> <span class="o">+</span> <span class="nb">int</span><span class="p">(</span><span class="n">trip_duration</span><span class="o">/</span><span class="mi">60</span><span class="p">)</span>

    <span class="n">end_tm</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">add_tour_leg</span><span class="p">(</span><span class="n">agent</span><span class="o">=</span><span class="n">agent</span><span class="p">,</span> <span class="n">k</span><span class="o">=</span><span class="n">k</span><span class="p">,</span> <span class="n">o_zone</span><span class="o">=</span><span class="n">d_zone</span><span class="p">,</span> <span class="n">o_loc</span><span class="o">=</span><span class="n">d_loc</span><span class="p">,</span> <span class="n">d_zone</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">o_zone</span><span class="p">,</span> <span class="n">d_loc</span><span class="o">=</span><span class="n">o_loc</span><span class="p">,</span> <span class="n">start_tm</span><span class="o">=</span><span class="n">start_tm</span><span class="p">,</span> <span class="n">end_tm</span><span class="o">=</span><span class="n">end_tm</span><span class="p">)</span>

    <span class="n">time_params</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;start_tm&#39;</span><span class="p">:</span><span class="n">end_tm</span><span class="p">,</span> <span class="s1">&#39;end_tm&#39;</span><span class="p">:</span><span class="n">END_OF_DAY</span><span class="p">}</span>
    <span class="n">end_tm</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">add_tour_activity</span><span class="p">(</span><span class="n">agent</span><span class="o">=</span><span class="n">agent</span><span class="p">,</span> <span class="n">k</span><span class="o">=</span><span class="n">k</span><span class="p">,</span> <span class="n">zone</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">o_zone</span><span class="p">,</span><span class="n">loc</span><span class="o">=</span><span class="n">o_loc</span><span class="p">,</span> <span class="n">activity_type</span><span class="o">=</span><span class="s1">&#39;return_origin&#39;</span><span class="p">,</span><span class="n">time_params</span><span class="o">=</span><span class="n">time_params</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">end_tm</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="pam.samplers.tour.TourPlanner.add_tour_activity" class="doc doc-heading">
<code class="highlight language-python"><span class="n">add_tour_activity</span><span class="p">(</span><span class="n">agent</span><span class="p">,</span> <span class="n">k</span><span class="p">,</span> <span class="n">zone</span><span class="p">,</span> <span class="n">loc</span><span class="p">,</span> <span class="n">activity_type</span><span class="p">,</span> <span class="n">time_params</span><span class="p">)</span></code>

<a href="#pam.samplers.tour.TourPlanner.add_tour_activity" class="headerlink" title="Permanent link">#</a></h3>


  <div class="doc doc-contents ">
  
      <p>Add activity to tour plan.
:params agent: agent for which the activity will be added to Plan
:params k: when used in a for loop, k populates the next sequence value
:params zone: zone where activity takes place
:params loc: facility location where activity takes place
:params activity_type: str, this function has specific logic for 'return_origin'
:params time_params: dictionary of time_params that may be time samplers or times of previous journeys
:return: end_tm of activity</p>

      <details class="quote">
        <summary>Source code in <code>pam/samplers/tour.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span>
<span class="normal">295</span>
<span class="normal">296</span>
<span class="normal">297</span>
<span class="normal">298</span>
<span class="normal">299</span>
<span class="normal">300</span>
<span class="normal">301</span>
<span class="normal">302</span>
<span class="normal">303</span>
<span class="normal">304</span>
<span class="normal">305</span>
<span class="normal">306</span>
<span class="normal">307</span>
<span class="normal">308</span>
<span class="normal">309</span>
<span class="normal">310</span>
<span class="normal">311</span>
<span class="normal">312</span>
<span class="normal">313</span>
<span class="normal">314</span>
<span class="normal">315</span>
<span class="normal">316</span>
<span class="normal">317</span>
<span class="normal">318</span>
<span class="normal">319</span>
<span class="normal">320</span>
<span class="normal">321</span>
<span class="normal">322</span>
<span class="normal">323</span>
<span class="normal">324</span>
<span class="normal">325</span>
<span class="normal">326</span>
<span class="normal">327</span>
<span class="normal">328</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">add_tour_activity</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">agent</span><span class="p">,</span> <span class="n">k</span><span class="p">,</span> <span class="n">zone</span><span class="p">,</span> <span class="n">loc</span><span class="p">,</span> <span class="n">activity_type</span><span class="p">,</span> <span class="n">time_params</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Add activity to tour plan.</span>
<span class="sd">    :params agent: agent for which the activity will be added to Plan</span>
<span class="sd">    :params k: when used in a for loop, k populates the next sequence value</span>
<span class="sd">    :params zone: zone where activity takes place</span>
<span class="sd">    :params loc: facility location where activity takes place</span>
<span class="sd">    :params activity_type: str, this function has specific logic for &#39;return_origin&#39;</span>
<span class="sd">    :params time_params: dictionary of time_params that may be time samplers or times of previous journeys</span>
<span class="sd">    :return: end_tm of activity</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">if</span> <span class="n">activity_type</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">o_activity</span><span class="p">:</span>
        <span class="n">start_tm</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">end_tm</span> <span class="o">=</span> <span class="p">(</span><span class="n">time_params</span><span class="p">[</span><span class="s1">&#39;hour&#39;</span><span class="p">]</span><span class="o">*</span><span class="mi">60</span><span class="p">)</span> <span class="o">+</span> <span class="n">time_params</span><span class="p">[</span><span class="s1">&#39;minute&#39;</span><span class="p">]</span>
        <span class="n">seq</span> <span class="o">=</span> <span class="mi">1</span>
        <span class="n">act</span> <span class="o">=</span> <span class="n">activity_type</span>
    <span class="k">elif</span> <span class="n">activity_type</span> <span class="o">==</span> <span class="s1">&#39;return_origin&#39;</span><span class="p">:</span>
        <span class="n">start_tm</span> <span class="o">=</span> <span class="n">time_params</span><span class="p">[</span><span class="s1">&#39;start_tm&#39;</span><span class="p">]</span> <span class="c1"># end_tm</span>
        <span class="n">end_tm</span> <span class="o">=</span> <span class="n">time_params</span><span class="p">[</span><span class="s1">&#39;end_tm&#39;</span><span class="p">]</span>  <span class="c1"># END_OF_DAY we&#39;ll let pam trim this to 24 hours later</span>
        <span class="n">seq</span> <span class="o">=</span> <span class="n">k</span><span class="o">+</span><span class="mi">2</span>
        <span class="n">act</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">o_activity</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">start_tm</span> <span class="o">=</span> <span class="n">time_params</span><span class="p">[</span><span class="s1">&#39;end_tm&#39;</span><span class="p">]</span>
        <span class="n">end_tm</span> <span class="o">=</span> <span class="n">time_params</span><span class="p">[</span><span class="s1">&#39;end_tm&#39;</span><span class="p">]</span> <span class="o">+</span> <span class="nb">int</span><span class="p">(</span><span class="n">time_params</span><span class="p">[</span><span class="s1">&#39;stop_duration&#39;</span><span class="p">]</span><span class="o">/</span><span class="mi">60</span><span class="p">)</span>
        <span class="n">seq</span> <span class="o">=</span> <span class="n">k</span><span class="o">+</span><span class="mi">2</span>
        <span class="n">act</span> <span class="o">=</span> <span class="n">activity_type</span>

    <span class="c1"># Activity plan requires mtdt format, but int format needs to passed for other functions to calculate new start time.</span>
    <span class="c1"># END_OF_DAY is already in mtdt format, adding an exception to keep set mtdt format when not END_OF_DAY.</span>
    <span class="k">if</span> <span class="n">end_tm</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">END_OF_DAY</span><span class="p">:</span>
        <span class="n">end_tm_mtdt</span> <span class="o">=</span> <span class="n">mtdt</span><span class="p">(</span><span class="n">end_tm</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">end_tm_mtdt</span><span class="o">=</span><span class="n">end_tm</span>

    <span class="n">agent</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">Activity</span><span class="p">(</span>
        <span class="n">seq</span><span class="o">=</span><span class="n">seq</span><span class="p">,</span>
        <span class="n">act</span><span class="o">=</span><span class="n">act</span><span class="p">,</span>
        <span class="n">area</span><span class="o">=</span><span class="n">zone</span><span class="p">,</span>
        <span class="n">loc</span><span class="o">=</span><span class="n">loc</span><span class="p">,</span>
        <span class="n">start_time</span><span class="o">=</span><span class="n">mtdt</span><span class="p">(</span><span class="n">start_tm</span><span class="p">),</span>
        <span class="n">end_time</span><span class="o">=</span><span class="n">end_tm_mtdt</span>
    <span class="p">))</span>

    <span class="k">return</span> <span class="n">end_tm</span>        
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="pam.samplers.tour.TourPlanner.add_tour_leg" class="doc doc-heading">
<code class="highlight language-python"><span class="n">add_tour_leg</span><span class="p">(</span><span class="n">agent</span><span class="p">,</span> <span class="n">k</span><span class="p">,</span> <span class="n">o_zone</span><span class="p">,</span> <span class="n">o_loc</span><span class="p">,</span> <span class="n">d_zone</span><span class="p">,</span> <span class="n">d_loc</span><span class="p">,</span> <span class="n">start_tm</span><span class="p">,</span> <span class="n">end_tm</span><span class="p">)</span></code>

<a href="#pam.samplers.tour.TourPlanner.add_tour_leg" class="headerlink" title="Permanent link">#</a></h3>


  <div class="doc doc-contents ">
  
      <p>Leg to Next Delivery.
:params agent: agent for which the leg will be added to Plan
:params k: when used in a for loop, k populates the next sequence value
:params o_zone: origin zone of leg
:params o_loc: origin facility of leg
:params d_zone: destination zone of leg
:params d_loc: destination facility of leg
:params start_tm, end_tm: obtained from ActivityDuration object
:returns: new end_tm after leg is added to plan</p>

      <details class="quote">
        <summary>Source code in <code>pam/samplers/tour.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">330</span>
<span class="normal">331</span>
<span class="normal">332</span>
<span class="normal">333</span>
<span class="normal">334</span>
<span class="normal">335</span>
<span class="normal">336</span>
<span class="normal">337</span>
<span class="normal">338</span>
<span class="normal">339</span>
<span class="normal">340</span>
<span class="normal">341</span>
<span class="normal">342</span>
<span class="normal">343</span>
<span class="normal">344</span>
<span class="normal">345</span>
<span class="normal">346</span>
<span class="normal">347</span>
<span class="normal">348</span>
<span class="normal">349</span>
<span class="normal">350</span>
<span class="normal">351</span>
<span class="normal">352</span>
<span class="normal">353</span>
<span class="normal">354</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">add_tour_leg</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">agent</span><span class="p">,</span> <span class="n">k</span><span class="p">,</span> <span class="n">o_zone</span><span class="p">,</span> <span class="n">o_loc</span><span class="p">,</span> <span class="n">d_zone</span><span class="p">,</span> <span class="n">d_loc</span><span class="p">,</span> <span class="n">start_tm</span><span class="p">,</span> <span class="n">end_tm</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot; </span>
<span class="sd">    Leg to Next Delivery.</span>
<span class="sd">    :params agent: agent for which the leg will be added to Plan</span>
<span class="sd">    :params k: when used in a for loop, k populates the next sequence value</span>
<span class="sd">    :params o_zone: origin zone of leg</span>
<span class="sd">    :params o_loc: origin facility of leg</span>
<span class="sd">    :params d_zone: destination zone of leg</span>
<span class="sd">    :params d_loc: destination facility of leg</span>
<span class="sd">    :params start_tm, end_tm: obtained from ActivityDuration object</span>
<span class="sd">    :returns: new end_tm after leg is added to plan</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">agent</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">Leg</span><span class="p">(</span>
        <span class="n">seq</span><span class="o">=</span><span class="n">k</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span>
        <span class="n">mode</span><span class="o">=</span><span class="s1">&#39;car&#39;</span><span class="p">,</span> 
        <span class="n">start_area</span><span class="o">=</span><span class="n">o_zone</span><span class="p">,</span>
        <span class="n">end_area</span><span class="o">=</span><span class="n">d_zone</span><span class="p">,</span>
        <span class="n">start_loc</span><span class="o">=</span><span class="n">o_loc</span><span class="p">,</span>
        <span class="n">end_loc</span><span class="o">=</span><span class="n">d_loc</span><span class="p">,</span>
        <span class="n">start_time</span><span class="o">=</span><span class="n">mtdt</span><span class="p">(</span><span class="n">start_tm</span><span class="p">),</span>
        <span class="n">end_time</span><span class="o">=</span><span class="n">mtdt</span><span class="p">(</span><span class="n">end_tm</span><span class="p">),</span> 
    <span class="p">))</span>

    <span class="k">return</span> <span class="n">end_tm</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="pam.samplers.tour.TourPlanner.apply" class="doc doc-heading">
<code class="highlight language-python"><span class="n">apply</span><span class="p">(</span><span class="n">agent</span><span class="p">,</span> <span class="n">o_loc</span><span class="p">,</span> <span class="n">d_zones</span><span class="p">,</span> <span class="n">d_locs</span><span class="p">)</span></code>

<a href="#pam.samplers.tour.TourPlanner.apply" class="headerlink" title="Permanent link">#</a></h3>


  <div class="doc doc-contents ">
  
      <p>Apply the above functions to the agent to build a plan. 
:params agent: agent to build a plan fory
:params o_loc: origin facility of leg &amp; activity
:params d_zones: destination zones of leg &amp; activity
:params d_locs: destination facilities of leg &amp; activity</p>

      <details class="quote">
        <summary>Source code in <code>pam/samplers/tour.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">382</span>
<span class="normal">383</span>
<span class="normal">384</span>
<span class="normal">385</span>
<span class="normal">386</span>
<span class="normal">387</span>
<span class="normal">388</span>
<span class="normal">389</span>
<span class="normal">390</span>
<span class="normal">391</span>
<span class="normal">392</span>
<span class="normal">393</span>
<span class="normal">394</span>
<span class="normal">395</span>
<span class="normal">396</span>
<span class="normal">397</span>
<span class="normal">398</span>
<span class="normal">399</span>
<span class="normal">400</span>
<span class="normal">401</span>
<span class="normal">402</span>
<span class="normal">403</span>
<span class="normal">404</span>
<span class="normal">405</span>
<span class="normal">406</span>
<span class="normal">407</span>
<span class="normal">408</span>
<span class="normal">409</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">apply</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">agent</span><span class="p">,</span> <span class="n">o_loc</span><span class="p">,</span> <span class="n">d_zones</span><span class="p">,</span> <span class="n">d_locs</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Apply the above functions to the agent to build a plan. </span>
<span class="sd">    :params agent: agent to build a plan fory</span>
<span class="sd">    :params o_loc: origin facility of leg &amp; activity</span>
<span class="sd">    :params d_zones: destination zones of leg &amp; activity</span>
<span class="sd">    :params d_locs: destination facilities of leg &amp; activity</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">time_params</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;hour&#39;</span><span class="p">:</span><span class="bp">self</span><span class="o">.</span><span class="n">hour</span><span class="p">,</span> <span class="s1">&#39;minute&#39;</span><span class="p">:</span><span class="bp">self</span><span class="o">.</span><span class="n">minute</span><span class="p">}</span>
    <span class="n">end_tm</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">add_tour_activity</span><span class="p">(</span><span class="n">agent</span><span class="o">=</span><span class="n">agent</span><span class="p">,</span> <span class="n">k</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">zone</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">o_zone</span><span class="p">,</span> <span class="n">loc</span><span class="o">=</span><span class="n">o_loc</span><span class="p">,</span> <span class="n">activity_type</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">o_activity</span><span class="p">,</span> <span class="n">time_params</span><span class="o">=</span><span class="n">time_params</span><span class="p">)</span>

    <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">stops</span><span class="p">):</span>
        <span class="n">stop_duration</span><span class="p">,</span> <span class="n">start_tm</span><span class="p">,</span> <span class="n">end_tm</span> <span class="o">=</span> <span class="n">ActivityDuration</span><span class="p">()</span><span class="o">.</span><span class="n">model_activity_duration</span><span class="p">(</span><span class="n">o_loc</span><span class="p">,</span> <span class="n">d_locs</span><span class="p">[</span><span class="n">k</span><span class="p">],</span> <span class="n">end_tm</span><span class="p">)</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">mtdt</span><span class="p">(</span><span class="n">end_tm</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="n">END_OF_DAY</span><span class="p">)</span> <span class="o">|</span> <span class="p">(</span><span class="n">mtdt</span><span class="p">(</span><span class="n">end_tm</span> <span class="o">+</span> <span class="nb">int</span><span class="p">(</span><span class="n">stop_duration</span><span class="o">/</span><span class="mi">60</span><span class="p">))</span> <span class="o">&gt;=</span> <span class="n">END_OF_DAY</span><span class="p">):</span>
            <span class="k">break</span>               
        <span class="k">elif</span> <span class="n">k</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">end_tm</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">add_tour_leg</span><span class="p">(</span><span class="n">agent</span><span class="o">=</span><span class="n">agent</span><span class="p">,</span> <span class="n">k</span><span class="o">=</span><span class="n">k</span><span class="p">,</span> <span class="n">o_zone</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">o_zone</span><span class="p">,</span> <span class="n">o_loc</span><span class="o">=</span><span class="n">o_loc</span><span class="p">,</span> <span class="n">d_zone</span><span class="o">=</span><span class="n">d_zones</span><span class="p">[</span><span class="n">k</span><span class="p">],</span> <span class="n">d_loc</span><span class="o">=</span><span class="n">d_locs</span><span class="p">[</span><span class="n">k</span><span class="p">],</span> <span class="n">start_tm</span><span class="o">=</span><span class="n">start_tm</span><span class="p">,</span> <span class="n">end_tm</span><span class="o">=</span><span class="n">end_tm</span><span class="p">)</span>

            <span class="n">time_params</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;end_tm&#39;</span><span class="p">:</span><span class="n">end_tm</span><span class="p">,</span> <span class="s1">&#39;stop_duration&#39;</span><span class="p">:</span><span class="n">stop_duration</span><span class="p">}</span>
            <span class="n">end_tm</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">add_tour_activity</span><span class="p">(</span><span class="n">agent</span><span class="o">=</span><span class="n">agent</span><span class="p">,</span> <span class="n">k</span><span class="o">=</span><span class="n">k</span><span class="p">,</span> <span class="n">zone</span><span class="o">=</span><span class="n">d_zones</span><span class="p">[</span><span class="n">k</span><span class="p">],</span> <span class="n">loc</span><span class="o">=</span><span class="n">d_locs</span><span class="p">[</span><span class="n">k</span><span class="p">],</span> <span class="n">activity_type</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">d_activity</span><span class="p">,</span> <span class="n">time_params</span><span class="o">=</span><span class="n">time_params</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span> 
            <span class="n">end_tm</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">add_tour_leg</span><span class="p">(</span><span class="n">agent</span><span class="o">=</span><span class="n">agent</span><span class="p">,</span> <span class="n">k</span><span class="o">=</span><span class="n">k</span><span class="p">,</span> <span class="n">o_zone</span><span class="o">=</span><span class="n">d_zones</span><span class="p">[</span><span class="n">k</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span> <span class="n">o_loc</span><span class="o">=</span><span class="n">d_locs</span><span class="p">[</span><span class="n">k</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span> <span class="n">d_zone</span><span class="o">=</span><span class="n">d_zones</span><span class="p">[</span><span class="n">k</span><span class="p">],</span> <span class="n">d_loc</span><span class="o">=</span><span class="n">d_locs</span><span class="p">[</span><span class="n">k</span><span class="p">],</span> <span class="n">start_tm</span><span class="o">=</span><span class="n">start_tm</span><span class="p">,</span> <span class="n">end_tm</span><span class="o">=</span><span class="n">end_tm</span><span class="p">)</span>

            <span class="n">time_params</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;end_tm&#39;</span><span class="p">:</span><span class="n">end_tm</span><span class="p">,</span> <span class="s1">&#39;stop_duration&#39;</span><span class="p">:</span><span class="n">stop_duration</span><span class="p">}</span>
            <span class="n">end_tm</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">add_tour_activity</span><span class="p">(</span><span class="n">agent</span><span class="o">=</span><span class="n">agent</span><span class="p">,</span> <span class="n">k</span><span class="o">=</span><span class="n">k</span><span class="p">,</span> <span class="n">zone</span><span class="o">=</span><span class="n">d_zones</span><span class="p">[</span><span class="n">k</span><span class="p">],</span> <span class="n">loc</span><span class="o">=</span><span class="n">d_locs</span><span class="p">[</span><span class="n">k</span><span class="p">],</span> <span class="n">activity_type</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">d_activity</span><span class="p">,</span> <span class="n">time_params</span><span class="o">=</span><span class="n">time_params</span><span class="p">)</span>

    <span class="n">end_tm</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">add_return_origin</span><span class="p">(</span><span class="n">agent</span><span class="o">=</span><span class="n">agent</span><span class="p">,</span> <span class="n">k</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">stops</span><span class="p">,</span> <span class="n">o_loc</span><span class="o">=</span><span class="n">o_loc</span><span class="p">,</span> <span class="n">d_zone</span><span class="o">=</span><span class="n">d_zones</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">stops</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span> <span class="n">d_loc</span><span class="o">=</span><span class="n">d_locs</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">stops</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span> <span class="n">end_tm</span><span class="o">=</span><span class="n">end_tm</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="pam.samplers.tour.TourPlanner.sequence_stops" class="doc doc-heading">
<code class="highlight language-python"><span class="n">sequence_stops</span><span class="p">()</span></code>

<a href="#pam.samplers.tour.TourPlanner.sequence_stops" class="headerlink" title="Permanent link">#</a></h3>


  <div class="doc doc-contents ">
  
      <p>Creates a sequence for a number of stops. Sequence is determined by distance from origin. 
:returns: o_loc, d_zones and d_locs (dataframe of sequenced destinations)</p>
<p>TODO - Method to sequence stops with different logic (i.e, minimise distance between stops).</p>

      <details class="quote">
        <summary>Source code in <code>pam/samplers/tour.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">sequence_stops</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Creates a sequence for a number of stops. Sequence is determined by distance from origin. </span>
<span class="sd">    :returns: o_loc, d_zones and d_locs (dataframe of sequenced destinations)</span>

<span class="sd">    TODO - Method to sequence stops with different logic (i.e, minimise distance between stops). </span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">o_loc</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">facility_sampler</span><span class="o">.</span><span class="n">sample</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">o_zone</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">o_activity</span><span class="p">)</span>

    <span class="n">d_seq</span> <span class="o">=</span> <span class="p">[]</span>

    <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">stops</span><span class="p">):</span>
        <span class="c1"># If threshold matrix is none, sample a random d_zone, else select a d_zone within threshold value</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">threshold_matrix</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">d_zone</span> <span class="o">=</span> <span class="n">FrequencySampler</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">d_dist</span><span class="o">.</span><span class="n">index</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">d_dist</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">d_freq</span><span class="p">])</span><span class="o">.</span><span class="n">sample</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">d_zone</span> <span class="o">=</span> <span class="n">FrequencySampler</span><span class="p">(</span><span class="n">dist</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">d_dist</span><span class="p">,</span>
                                      <span class="n">freq</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">d_freq</span><span class="p">,</span>
                                      <span class="n">threshold_matrix</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">threshold_matrix</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">o_zone</span><span class="p">],</span>
                                      <span class="n">threshold_value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">threshold_value</span>
                                      <span class="p">)</span><span class="o">.</span><span class="n">threshold_sample</span><span class="p">()</span>
        <span class="c1"># once d_zone is selected, select a specific point location for d_activity                          </span>
        <span class="n">d_facility</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">facility_sampler</span><span class="o">.</span><span class="n">sample</span><span class="p">(</span><span class="n">d_zone</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">d_activity</span><span class="p">)</span>

        <span class="c1"># append to a dictionary to sequence destinations</span>
        <span class="n">d_seq</span><span class="o">.</span><span class="n">append</span><span class="p">({</span>
            <span class="s1">&#39;stops&#39;</span><span class="p">:</span> <span class="n">j</span><span class="p">,</span>
            <span class="s1">&#39;destination_zone&#39;</span><span class="p">:</span> <span class="n">d_zone</span><span class="p">,</span>
            <span class="s1">&#39;destination_facility&#39;</span><span class="p">:</span> <span class="n">d_facility</span><span class="p">,</span>
            <span class="s1">&#39;distance&#39;</span><span class="p">:</span> <span class="n">ActivityDuration</span><span class="p">()</span><span class="o">.</span><span class="n">model_distance</span><span class="p">(</span><span class="n">o_loc</span><span class="p">,</span> <span class="n">d_facility</span><span class="p">)</span>
        <span class="p">})</span>

    <span class="c1"># sort distance: furthest facility to closest facility to origin facility. The final stop should be closest to origin.</span>
    <span class="n">d_seq</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">d_seq</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">item</span><span class="p">:</span> <span class="n">item</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;distance&#39;</span><span class="p">),</span> <span class="n">reverse</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">d_zones</span> <span class="o">=</span> <span class="p">[</span><span class="n">item</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;destination_zone&#39;</span><span class="p">)</span> <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">d_seq</span><span class="p">]</span>
    <span class="n">d_locs</span> <span class="o">=</span> <span class="p">[</span><span class="n">item</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;destination_facility&#39;</span><span class="p">)</span> <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">d_seq</span><span class="p">]</span>

    <span class="k">return</span> <span class="n">o_loc</span><span class="p">,</span> <span class="n">d_zones</span><span class="p">,</span> <span class="n">d_locs</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>



  </div>

  </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="pam.samplers.tour.ValidateTourOD" class="doc doc-heading">
<code class="highlight language-python"><span class="n">ValidateTourOD</span><span class="p">(</span><span class="n">trips</span><span class="p">,</span> <span class="n">zone</span><span class="p">,</span> <span class="n">o_dist</span><span class="p">,</span> <span class="n">d_dist</span><span class="p">,</span> <span class="n">o_activity</span><span class="p">,</span> <span class="n">d_activity</span><span class="p">,</span> <span class="n">o_freq</span><span class="p">,</span> <span class="n">d_freq</span><span class="p">)</span></code>

<a href="#pam.samplers.tour.ValidateTourOD" class="headerlink" title="Permanent link">#</a></h2>


  <div class="doc doc-contents ">

  
      <p>Object to build a dataframe that produces both spatial and statistical plots to validate the tour origin and 
destinations align with input data.</p>

  
      <p>Create a dataframe that counts the number of origin and destination activities. 
Merge this against the density information from the input origin and destination samplers.
:params trips: dataframe, the legs.csv output after building population
:params zone: zones geodataframe
:params o_dist, d_dist: samplers containing origin and destination distributions to be sampled.
:params o_activity, d_activity: activities utilised within the o_dist and d_dist
:params o_freq, d_freq: frequencies that are used to sample origin and destination distributions.</p>

          <details class="quote">
            <summary>Source code in <code>pam/samplers/tour.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">418</span>
<span class="normal">419</span>
<span class="normal">420</span>
<span class="normal">421</span>
<span class="normal">422</span>
<span class="normal">423</span>
<span class="normal">424</span>
<span class="normal">425</span>
<span class="normal">426</span>
<span class="normal">427</span>
<span class="normal">428</span>
<span class="normal">429</span>
<span class="normal">430</span>
<span class="normal">431</span>
<span class="normal">432</span>
<span class="normal">433</span>
<span class="normal">434</span>
<span class="normal">435</span>
<span class="normal">436</span>
<span class="normal">437</span>
<span class="normal">438</span>
<span class="normal">439</span>
<span class="normal">440</span>
<span class="normal">441</span>
<span class="normal">442</span>
<span class="normal">443</span>
<span class="normal">444</span>
<span class="normal">445</span>
<span class="normal">446</span>
<span class="normal">447</span>
<span class="normal">448</span>
<span class="normal">449</span>
<span class="normal">450</span>
<span class="normal">451</span>
<span class="normal">452</span>
<span class="normal">453</span>
<span class="normal">454</span>
<span class="normal">455</span>
<span class="normal">456</span>
<span class="normal">457</span>
<span class="normal">458</span>
<span class="normal">459</span>
<span class="normal">460</span>
<span class="normal">461</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">trips</span><span class="p">,</span> <span class="n">zone</span><span class="p">,</span> <span class="n">o_dist</span><span class="p">,</span> <span class="n">d_dist</span><span class="p">,</span> <span class="n">o_activity</span><span class="p">,</span> <span class="n">d_activity</span><span class="p">,</span> <span class="n">o_freq</span><span class="p">,</span> <span class="n">d_freq</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Create a dataframe that counts the number of origin and destination activities. </span>
<span class="sd">    Merge this against the density information from the input origin and destination samplers.</span>
<span class="sd">    :params trips: dataframe, the legs.csv output after building population</span>
<span class="sd">    :params zone: zones geodataframe</span>
<span class="sd">    :params o_dist, d_dist: samplers containing origin and destination distributions to be sampled.</span>
<span class="sd">    :params o_activity, d_activity: activities utilised within the o_dist and d_dist</span>
<span class="sd">    :params o_freq, d_freq: frequencies that are used to sample origin and destination distributions.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="c1"># Create a dataframe to plot od trips and compare against facility density and flows density.</span>
    <span class="n">df_trips_o</span> <span class="o">=</span> <span class="n">trips</span><span class="p">[</span><span class="n">trips</span><span class="p">[</span><span class="s1">&#39;origin activity&#39;</span><span class="p">]</span><span class="o">==</span><span class="n">o_activity</span><span class="p">]</span><span class="o">.</span><span class="n">groupby</span><span class="p">([</span><span class="s1">&#39;ozone&#39;</span><span class="p">])</span><span class="o">.</span><span class="n">agg</span><span class="p">({</span><span class="s1">&#39;pid&#39;</span><span class="p">:</span><span class="s1">&#39;count&#39;</span><span class="p">})</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span>
    <span class="n">df_trips_o</span><span class="o">.</span><span class="n">rename</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;pid&#39;</span><span class="p">:</span><span class="s1">&#39;origin_trips&#39;</span><span class="p">},</span> <span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">df_trips_o</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="s1">&#39;ozone&#39;</span><span class="p">,</span> <span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

    <span class="n">df_trips_d</span> <span class="o">=</span> <span class="n">trips</span><span class="p">[</span><span class="n">trips</span><span class="p">[</span><span class="s1">&#39;destination activity&#39;</span><span class="p">]</span><span class="o">==</span><span class="n">d_activity</span><span class="p">]</span><span class="o">.</span><span class="n">groupby</span><span class="p">([</span><span class="s1">&#39;dzone&#39;</span><span class="p">])</span><span class="o">.</span><span class="n">agg</span><span class="p">({</span><span class="s1">&#39;pid&#39;</span><span class="p">:</span><span class="s1">&#39;count&#39;</span><span class="p">})</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span>
    <span class="n">df_trips_d</span><span class="o">.</span><span class="n">rename</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;pid&#39;</span><span class="p">:</span><span class="s1">&#39;destination_trips&#39;</span><span class="p">},</span> <span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">df_trips_d</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="s1">&#39;dzone&#39;</span><span class="p">,</span> <span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">od_density</span> <span class="o">=</span> <span class="n">zone</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>

    <span class="c1"># Merge in trips information</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">od_density</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">od_density</span><span class="p">,</span> <span class="n">df_trips_o</span><span class="p">,</span> <span class="n">left_on</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">od_density</span><span class="o">.</span><span class="n">index</span><span class="p">,</span> <span class="n">right_on</span><span class="o">=</span><span class="n">df_trips_o</span><span class="o">.</span><span class="n">index</span><span class="p">,</span> <span class="n">how</span><span class="o">=</span><span class="s1">&#39;left&#39;</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">od_density</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">od_density</span><span class="p">,</span> <span class="n">df_trips_d</span><span class="p">,</span> <span class="n">left_on</span><span class="o">=</span><span class="s1">&#39;key_0&#39;</span><span class="p">,</span> <span class="n">right_on</span><span class="o">=</span><span class="n">df_trips_d</span><span class="o">.</span><span class="n">index</span><span class="p">,</span> <span class="n">how</span><span class="o">=</span><span class="s1">&#39;left&#39;</span><span class="p">)</span>

    <span class="c1"># Merge in density information</span>
    <span class="n">o_density</span> <span class="o">=</span> <span class="n">o_dist</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span>
    <span class="n">o_density</span> <span class="o">=</span> <span class="n">o_density</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="n">o_dist</span><span class="o">.</span><span class="n">index</span><span class="p">)</span><span class="o">.</span><span class="n">agg</span><span class="p">({</span><span class="n">o_freq</span><span class="p">:</span><span class="s1">&#39;sum&#39;</span><span class="p">})</span>
    <span class="n">d_density</span> <span class="o">=</span> <span class="n">d_dist</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span>
    <span class="n">d_density</span> <span class="o">=</span> <span class="n">d_density</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="n">d_dist</span><span class="o">.</span><span class="n">index</span><span class="p">)</span><span class="o">.</span><span class="n">agg</span><span class="p">({</span><span class="n">d_freq</span><span class="p">:</span><span class="s1">&#39;sum&#39;</span><span class="p">})</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">od_density</span><span class="p">[</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">o_activity</span><span class="si">}</span><span class="s1">_density&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">od_density</span><span class="o">.</span><span class="n">key_0</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="n">o_density</span><span class="p">[</span><span class="n">o_freq</span><span class="p">])</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">od_density</span><span class="p">[</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">d_activity</span><span class="si">}</span><span class="s1">_density&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">od_density</span><span class="o">.</span><span class="n">key_0</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="n">d_density</span><span class="p">[</span><span class="n">d_freq</span><span class="p">])</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">od_density</span><span class="o">.</span><span class="n">rename</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;key_0&#39;</span><span class="p">:</span><span class="n">zone</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">name</span><span class="p">},</span> <span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">od_density</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="n">zone</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

    <span class="c1"># Add in features for analysis</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">od_density</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">od_density</span><span class="o">.</span><span class="n">fillna</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">od_density</span><span class="p">[</span><span class="s1">&#39;origin_trip_density&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">od_density</span><span class="o">.</span><span class="n">origin_trips</span><span class="o">/</span><span class="bp">self</span><span class="o">.</span><span class="n">od_density</span><span class="o">.</span><span class="n">origin_trips</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">od_density</span><span class="p">[</span><span class="s1">&#39;destination_trip_density&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">od_density</span><span class="o">.</span><span class="n">destination_trips</span><span class="o">/</span><span class="bp">self</span><span class="o">.</span><span class="n">od_density</span><span class="o">.</span><span class="n">destination_trips</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">od_density</span><span class="p">[</span><span class="s1">&#39;origin_diff&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">od_density</span><span class="p">[</span><span class="s1">&#39;origin_trip_density&#39;</span><span class="p">]</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">od_density</span><span class="p">[</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">o_activity</span><span class="si">}</span><span class="s1">_density&#39;</span><span class="p">]</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">od_density</span><span class="p">[</span><span class="s1">&#39;destination_diff&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">od_density</span><span class="p">[</span><span class="s1">&#39;destination_trip_density&#39;</span><span class="p">]</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">od_density</span><span class="p">[</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">d_activity</span><span class="si">}</span><span class="s1">_density&#39;</span><span class="p">]</span>
</code></pre></div></td></tr></table></div>
          </details>

  

  <div class="doc doc-children">







<div class="doc doc-object doc-attribute">



<h3 id="pam.samplers.tour.ValidateTourOD.od_density" class="doc doc-heading">
<code class="highlight language-python"><span class="n">od_density</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">od_density</span><span class="o">.</span><span class="n">fillna</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#pam.samplers.tour.ValidateTourOD.od_density" class="headerlink" title="Permanent link">#</a></h3>


  <div class="doc doc-contents ">
  </div>

</div>



<div class="doc doc-object doc-function">



<h3 id="pam.samplers.tour.ValidateTourOD.plot_compare_density" class="doc doc-heading">
<code class="highlight language-python"><span class="n">plot_compare_density</span><span class="p">(</span><span class="n">title_1</span><span class="p">,</span> <span class="n">title_2</span><span class="p">,</span> <span class="n">o_activity</span><span class="p">,</span> <span class="n">d_activity</span><span class="p">)</span></code>

<a href="#pam.samplers.tour.ValidateTourOD.plot_compare_density" class="headerlink" title="Permanent link">#</a></h3>


  <div class="doc doc-contents ">
  
      <p>Compares density of input origin/destination activities and trips. As density of locations increases, so should trips.
:params title_1, title_2: str input for plot title names.
:params o_activity, d_activity: str of activities that are used to measure density of locations</p>

      <details class="quote">
        <summary>Source code in <code>pam/samplers/tour.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">488</span>
<span class="normal">489</span>
<span class="normal">490</span>
<span class="normal">491</span>
<span class="normal">492</span>
<span class="normal">493</span>
<span class="normal">494</span>
<span class="normal">495</span>
<span class="normal">496</span>
<span class="normal">497</span>
<span class="normal">498</span>
<span class="normal">499</span>
<span class="normal">500</span>
<span class="normal">501</span>
<span class="normal">502</span>
<span class="normal">503</span>
<span class="normal">504</span>
<span class="normal">505</span>
<span class="normal">506</span>
<span class="normal">507</span>
<span class="normal">508</span>
<span class="normal">509</span>
<span class="normal">510</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">plot_compare_density</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">title_1</span><span class="p">,</span> <span class="n">title_2</span><span class="p">,</span> <span class="n">o_activity</span><span class="p">,</span> <span class="n">d_activity</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Compares density of input origin/destination activities and trips. As density of locations increases, so should trips.</span>
<span class="sd">    :params title_1, title_2: str input for plot title names.</span>
<span class="sd">    :params o_activity, d_activity: str of activities that are used to measure density of locations</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">15</span><span class="p">,</span><span class="mi">7</span><span class="p">))</span>

    <span class="n">m1</span><span class="p">,</span><span class="n">b1</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">polyfit</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">od_density</span><span class="p">[</span><span class="n">o_activity</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">od_density</span><span class="o">.</span><span class="n">origin_trip_density</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
    <span class="n">m2</span><span class="p">,</span><span class="n">b2</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">polyfit</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">od_density</span><span class="p">[</span><span class="n">d_activity</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">od_density</span><span class="o">.</span><span class="n">destination_trip_density</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>

    <span class="n">ax</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">o_activity</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s1">&#39;origin_trip_density&#39;</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">od_density</span><span class="p">)</span>
    <span class="n">ax</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">od_density</span><span class="p">[</span><span class="n">o_activity</span><span class="p">],</span> <span class="p">(</span><span class="n">m1</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">od_density</span><span class="p">[</span><span class="n">o_activity</span><span class="p">]</span> <span class="o">+</span> <span class="n">b1</span><span class="p">),</span> <span class="n">label</span> <span class="o">=</span> <span class="s1">&#39;y = </span><span class="si">{:.2f}</span><span class="s1"> + </span><span class="si">{:.2f}</span><span class="s1">*x&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">m1</span><span class="p">,</span> <span class="n">b1</span><span class="p">))</span>
    <span class="n">ax</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">loc</span><span class="o">=</span><span class="s1">&#39;lower right&#39;</span><span class="p">)</span> 
    <span class="n">ax</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="n">title_1</span><span class="p">)</span>

    <span class="n">ax</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">d_activity</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s1">&#39;destination_trip_density&#39;</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">od_density</span><span class="p">)</span>
    <span class="n">ax</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">od_density</span><span class="p">[</span><span class="n">o_activity</span><span class="p">],</span> <span class="p">(</span><span class="n">m2</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">od_density</span><span class="p">[</span><span class="n">o_activity</span><span class="p">]</span> <span class="o">+</span> <span class="n">b2</span><span class="p">),</span> <span class="n">label</span> <span class="o">=</span> <span class="s1">&#39;y = </span><span class="si">{:.2f}</span><span class="s1"> + </span><span class="si">{:.2f}</span><span class="s1">*x&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">m2</span><span class="p">,</span> <span class="n">b2</span><span class="p">))</span>
    <span class="n">ax</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">loc</span><span class="o">=</span><span class="s1">&#39;lower right&#39;</span><span class="p">)</span> 
    <span class="n">ax</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="n">title_2</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">fig</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="pam.samplers.tour.ValidateTourOD.plot_density_difference" class="doc doc-heading">
<code class="highlight language-python"><span class="n">plot_density_difference</span><span class="p">(</span><span class="n">title_1</span><span class="p">,</span> <span class="n">title_2</span><span class="p">,</span> <span class="n">cmap</span> <span class="o">=</span> <span class="s1">&#39;coolwarm&#39;</span><span class="p">)</span></code>

<a href="#pam.samplers.tour.ValidateTourOD.plot_density_difference" class="headerlink" title="Permanent link">#</a></h3>


  <div class="doc doc-contents ">
  
      <p>Creates a spatial plot of the difference between input and output densities.
:params title_1, title_2: str input for plot title names.</p>

      <details class="quote">
        <summary>Source code in <code>pam/samplers/tour.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">512</span>
<span class="normal">513</span>
<span class="normal">514</span>
<span class="normal">515</span>
<span class="normal">516</span>
<span class="normal">517</span>
<span class="normal">518</span>
<span class="normal">519</span>
<span class="normal">520</span>
<span class="normal">521</span>
<span class="normal">522</span>
<span class="normal">523</span>
<span class="normal">524</span>
<span class="normal">525</span>
<span class="normal">526</span>
<span class="normal">527</span>
<span class="normal">528</span>
<span class="normal">529</span>
<span class="normal">530</span>
<span class="normal">531</span>
<span class="normal">532</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">plot_density_difference</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">title_1</span><span class="p">,</span> <span class="n">title_2</span><span class="p">,</span> <span class="n">cmap</span><span class="o">=</span><span class="s1">&#39;coolwarm&#39;</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Creates a spatial plot of the difference between input and output densities.</span>
<span class="sd">    :params title_1, title_2: str input for plot title names.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">20</span><span class="p">,</span><span class="mi">10</span><span class="p">))</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">od_density</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="s1">&#39;origin_diff&#39;</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">cmap</span><span class="o">=</span><span class="n">cmap</span><span class="p">)</span>
    <span class="n">ax</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">axis</span><span class="p">(</span><span class="s1">&#39;off&#39;</span><span class="p">)</span>
    <span class="n">ax</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="n">title_1</span><span class="p">)</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">od_density</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="s1">&#39;destination_diff&#39;</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">cmap</span><span class="o">=</span><span class="n">cmap</span><span class="p">)</span>
    <span class="n">ax</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">axis</span><span class="p">(</span><span class="s1">&#39;off&#39;</span><span class="p">)</span>
    <span class="n">ax</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="n">title_2</span><span class="p">)</span>

    <span class="n">im</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">gca</span><span class="p">()</span><span class="o">.</span><span class="n">get_children</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span>
    <span class="n">cax</span> <span class="o">=</span> <span class="n">fig</span><span class="o">.</span><span class="n">add_axes</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mf">0.2</span><span class="p">,</span><span class="mf">0.03</span><span class="p">,</span><span class="mf">0.6</span><span class="p">])</span> 
    <span class="n">plt</span><span class="o">.</span><span class="n">colorbar</span><span class="p">(</span><span class="n">im</span><span class="p">,</span> <span class="n">cax</span><span class="o">=</span><span class="n">cax</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">fig</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="pam.samplers.tour.ValidateTourOD.plot_validate_spatial_density" class="doc doc-heading">
<code class="highlight language-python"><span class="n">plot_validate_spatial_density</span><span class="p">(</span><span class="n">title_1</span><span class="p">,</span> <span class="n">title_2</span><span class="p">,</span> <span class="n">density_metric</span><span class="p">,</span> <span class="n">density_trips</span><span class="p">,</span> <span class="n">cmap</span> <span class="o">=</span> <span class="s1">&#39;coolwarm&#39;</span><span class="p">)</span></code>

<a href="#pam.samplers.tour.ValidateTourOD.plot_validate_spatial_density" class="headerlink" title="Permanent link">#</a></h3>


  <div class="doc doc-contents ">
  
      <p>Creates a spatial plot between input densities and resulting trips to validate trips spatially align with input densities.
:params title_1, title_2: str input for plot title names.
:params density_metric: the measure for density output from the above dataframe, in the format of 'activity_density'
:params density_trips: the measure of trips that require validation, either 'origin_trips' or 'destination_trips'.</p>

      <details class="quote">
        <summary>Source code in <code>pam/samplers/tour.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">464</span>
<span class="normal">465</span>
<span class="normal">466</span>
<span class="normal">467</span>
<span class="normal">468</span>
<span class="normal">469</span>
<span class="normal">470</span>
<span class="normal">471</span>
<span class="normal">472</span>
<span class="normal">473</span>
<span class="normal">474</span>
<span class="normal">475</span>
<span class="normal">476</span>
<span class="normal">477</span>
<span class="normal">478</span>
<span class="normal">479</span>
<span class="normal">480</span>
<span class="normal">481</span>
<span class="normal">482</span>
<span class="normal">483</span>
<span class="normal">484</span>
<span class="normal">485</span>
<span class="normal">486</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">plot_validate_spatial_density</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">title_1</span><span class="p">,</span> <span class="n">title_2</span><span class="p">,</span> <span class="n">density_metric</span><span class="p">,</span> <span class="n">density_trips</span><span class="p">,</span> <span class="n">cmap</span><span class="o">=</span><span class="s1">&#39;coolwarm&#39;</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Creates a spatial plot between input densities and resulting trips to validate trips spatially align with input densities.</span>
<span class="sd">    :params title_1, title_2: str input for plot title names.</span>
<span class="sd">    :params density_metric: the measure for density output from the above dataframe, in the format of &#39;activity_density&#39;</span>
<span class="sd">    :params density_trips: the measure of trips that require validation, either &#39;origin_trips&#39; or &#39;destination_trips&#39;.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">20</span><span class="p">,</span><span class="mi">10</span><span class="p">))</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">od_density</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">density_metric</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">cmap</span><span class="o">=</span><span class="n">cmap</span><span class="p">)</span>
    <span class="n">ax</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">axis</span><span class="p">(</span><span class="s1">&#39;off&#39;</span><span class="p">)</span>
    <span class="n">ax</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="n">title_1</span><span class="p">)</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">od_density</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">density_trips</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">cmap</span><span class="o">=</span><span class="n">cmap</span><span class="p">)</span>
    <span class="n">ax</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">axis</span><span class="p">(</span><span class="s1">&#39;off&#39;</span><span class="p">)</span>
    <span class="n">ax</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="n">title_2</span><span class="p">)</span>

    <span class="n">im</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">gca</span><span class="p">()</span><span class="o">.</span><span class="n">get_children</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span>
    <span class="n">cax</span> <span class="o">=</span> <span class="n">fig</span><span class="o">.</span><span class="n">add_axes</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mf">0.2</span><span class="p">,</span><span class="mf">0.03</span><span class="p">,</span><span class="mf">0.6</span><span class="p">])</span> 
    <span class="n">plt</span><span class="o">.</span><span class="n">colorbar</span><span class="p">(</span><span class="n">im</span><span class="p">,</span> <span class="n">cax</span><span class="o">=</span><span class="n">cax</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">fig</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>



  </div>

  </div>

</div>


<div class="doc doc-object doc-function">



<h2 id="pam.samplers.tour.create_density_gdf" class="doc doc-heading">
<code class="highlight language-python"><span class="n">create_density_gdf</span><span class="p">(</span><span class="n">facility_zone</span><span class="p">,</span> <span class="n">zone</span><span class="p">,</span> <span class="n">activity</span><span class="p">,</span> <span class="n">normalise</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span></code>

<a href="#pam.samplers.tour.create_density_gdf" class="headerlink" title="Permanent link">#</a></h2>


  <div class="doc doc-contents ">
  
      <p>Returns a geodataframe that calculates the spatial density of input activity. The normalise flag
allows for the user to decide what variable to normalise density against.
:param facility_zone: a geodataframe that is the spatial join between facility and zone information
:param zone: a geodataframe with zones information
:param activity: a list of activities (in string format) that are within facility data
:return: a geodataframe that measures the density of activities in each zone.</p>

      <details class="quote">
        <summary>Source code in <code>pam/samplers/tour.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">create_density_gdf</span><span class="p">(</span><span class="n">facility_zone</span><span class="p">,</span> <span class="n">zone</span><span class="p">,</span> <span class="n">activity</span><span class="p">,</span> <span class="n">normalise</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Returns a geodataframe that calculates the spatial density of input activity. The normalise flag</span>
<span class="sd">    allows for the user to decide what variable to normalise density against.</span>
<span class="sd">    :param facility_zone: a geodataframe that is the spatial join between facility and zone information</span>
<span class="sd">    :param zone: a geodataframe with zones information</span>
<span class="sd">    :param activity: a list of activities (in string format) that are within facility data</span>
<span class="sd">    :return: a geodataframe that measures the density of activities in each zone. </span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">if</span> <span class="n">normalise</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">density</span> <span class="o">=</span> <span class="n">facility_zone</span><span class="o">.</span><span class="n">groupby</span><span class="p">([</span><span class="n">facility_zone</span><span class="o">.</span><span class="n">index</span><span class="p">,</span> <span class="s1">&#39;activity&#39;</span><span class="p">,</span> <span class="n">normalise</span><span class="p">])</span><span class="o">.</span><span class="n">agg</span><span class="p">({</span><span class="s1">&#39;id&#39;</span><span class="p">:</span><span class="s1">&#39;count&#39;</span><span class="p">})</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span>    
        <span class="n">density</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="n">facility_zone</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="n">density</span> <span class="o">=</span> <span class="n">density</span><span class="p">[</span><span class="n">density</span><span class="p">[</span><span class="s1">&#39;activity&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">isin</span><span class="p">(</span><span class="n">activity</span><span class="p">)]</span>
        <span class="n">density</span><span class="p">[</span><span class="s1">&#39;density&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">density</span><span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">]</span><span class="o">/</span><span class="n">density</span><span class="p">[</span><span class="n">normalise</span><span class="p">]</span>
        <span class="n">total_density</span> <span class="o">=</span> <span class="n">density</span><span class="p">[</span><span class="o">~</span><span class="p">(</span><span class="n">density</span><span class="p">[</span><span class="n">normalise</span><span class="p">]</span><span class="o">==</span><span class="mi">0</span><span class="p">)][</span><span class="s1">&#39;density&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
        <span class="n">density</span><span class="p">[</span><span class="s1">&#39;density&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">density</span><span class="p">[</span><span class="s1">&#39;density&#39;</span><span class="p">]</span><span class="o">/</span><span class="n">total_density</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">density</span> <span class="o">=</span> <span class="n">facility_zone</span><span class="o">.</span><span class="n">groupby</span><span class="p">([</span><span class="n">facility_zone</span><span class="o">.</span><span class="n">index</span><span class="p">,</span> <span class="s1">&#39;activity&#39;</span><span class="p">])</span><span class="o">.</span><span class="n">agg</span><span class="p">({</span><span class="s1">&#39;id&#39;</span><span class="p">:</span><span class="s1">&#39;count&#39;</span><span class="p">})</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span>    
        <span class="n">density</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="n">facility_zone</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="n">density</span> <span class="o">=</span> <span class="n">density</span><span class="p">[</span><span class="n">density</span><span class="p">[</span><span class="s1">&#39;activity&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">isin</span><span class="p">(</span><span class="n">activity</span><span class="p">)]</span>
        <span class="n">density</span><span class="p">[</span><span class="s1">&#39;density&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">density</span><span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">]</span><span class="o">/</span><span class="n">density</span><span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>

    <span class="c1"># Convert back to geodataframe for merging.</span>
    <span class="n">density</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span><span class="n">density</span><span class="p">,</span> <span class="n">zone</span><span class="p">[</span><span class="s1">&#39;geometry&#39;</span><span class="p">],</span> <span class="n">left_on</span> <span class="o">=</span> <span class="n">density</span><span class="o">.</span><span class="n">index</span><span class="p">,</span> <span class="n">right_on</span><span class="o">=</span><span class="n">zone</span><span class="o">.</span><span class="n">index</span><span class="p">,</span> <span class="n">how</span><span class="o">=</span><span class="s1">&#39;left&#39;</span><span class="p">)</span>
    <span class="n">density</span><span class="o">.</span><span class="n">rename</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;key_0&#39;</span><span class="p">:</span><span class="n">facility_zone</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">name</span><span class="p">},</span> <span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">density</span> <span class="o">=</span> <span class="n">gp</span><span class="o">.</span><span class="n">GeoDataFrame</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">density</span><span class="p">,</span> <span class="n">geometry</span><span class="o">=</span><span class="s1">&#39;geometry&#39;</span><span class="p">)</span>
    <span class="n">density</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="n">facility_zone</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">np</span><span class="o">.</span><span class="n">isinf</span><span class="p">(</span><span class="n">density</span><span class="p">[</span><span class="s1">&#39;density&#39;</span><span class="p">])</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span><span class="o">&gt;=</span><span class="mi">1</span><span class="p">:</span>
        <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span><span class="s1">&#39;Your density gdf has infinite values&#39;</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">density</span> 
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h2 id="pam.samplers.tour.interpolate" class="doc doc-heading">
<code class="highlight language-python"><span class="n">interpolate</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">ai</span><span class="p">,</span> <span class="n">a</span><span class="p">,</span> <span class="n">bi</span><span class="p">,</span> <span class="n">b</span><span class="p">)</span></code>

<a href="#pam.samplers.tour.interpolate" class="headerlink" title="Permanent link">#</a></h2>


  <div class="doc doc-contents ">
  
      <p>:param i, ai, a, bi, b: input values to build distribution between values a and b</p>

      <details class="quote">
        <summary>Source code in <code>pam/samplers/tour.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">interpolate</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">ai</span><span class="p">,</span> <span class="n">a</span><span class="p">,</span> <span class="n">bi</span><span class="p">,</span> <span class="n">b</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    :param i, ai, a, bi, b: input values to build distribution between values a and b</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">a</span> <span class="o">+</span> <span class="p">(</span><span class="n">i</span><span class="o">-</span><span class="n">ai</span><span class="p">)</span> <span class="o">*</span> <span class="p">(</span><span class="n">b</span><span class="o">-</span><span class="n">a</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span><span class="n">bi</span><span class="o">-</span><span class="n">ai</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>



  </div>

  </div>

</div>





                
              </article>
            </div>
          
          
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": "../../..", "features": [], "search": "../../../assets/javascripts/workers/search.208ed371.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../../assets/javascripts/bundle.b4d07000.min.js"></script>
      
    
  </body>
</html>