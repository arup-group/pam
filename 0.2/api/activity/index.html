
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="../vehicle/">
      
      
        <link rel="next" href="../core/">
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.4.3, mkdocs-material-9.1.15">
    
    
      
        <title>pam.activity - Population Activity Modeller (PAM)</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.26e3688c.min.css">
      
      

    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../assets/_mkdocstrings.css">
    
      <link rel="stylesheet" href="../../static/extras.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    <body dir="ltr">
  
    
    
      <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#pam.activity" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <div data-md-color-scheme="default" data-md-component="outdated" hidden>
        
      </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="Population Activity Modeller (PAM)" class="md-header__button md-logo" aria-label="Population Activity Modeller (PAM)" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Population Activity Modeller (PAM)
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              pam.activity
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/arup-group/pam/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.4.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Population Activity Modeller (PAM)" class="md-nav__button md-logo" aria-label="Population Activity Modeller (PAM)" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    Population Activity Modeller (PAM)
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/arup-group/pam/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.4.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        Home
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../installation/" class="md-nav__link">
        Installation
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../read_data/" class="md-nav__link">
        Reading data
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../activity_plans/" class="md-nav__link">
        Activity plans
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../modelling_policy_impact/" class="md-nav__link">
        Modelling the impact of policies on populations
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6" >
      
      
      
        <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0">
          Examples
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_6">
          <span class="md-nav__icon md-icon"></span>
          Examples
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../examples/01_PAM_Getting_Started/" class="md-nav__link">
        PAM Getting Started
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../examples/02_Population_Basics/" class="md-nav__link">
        Population Basics
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../examples/03_Example_Generate_Random_Population/" class="md-nav__link">
        Example Generate Random Population
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../examples/04_Example_Ingest_NTS_Diaries/" class="md-nav__link">
        Example Ingest NTS Diaries
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../examples/05_PAM_Policies_Walk_Through/" class="md-nav__link">
        PAM Policies Walk Through
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../examples/06_PAM_Complex_Policies/" class="md-nav__link">
        PAM Complex Policies
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../examples/07_PAM_Point_Sampling/" class="md-nav__link">
        PAM Point Sampling
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../examples/08_PAM_Population_Activity_Plots/" class="md-nav__link">
        PAM Population Activity Plots
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../examples/09_Travel_Plots/" class="md-nav__link">
        Travel Plots
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../examples/10_Advanced_Spatial-Sampling_Demo/" class="md-nav__link">
        Advanced Spatial-Sampling Demo
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../examples/11_Advanced_Plan_Rescheduling/" class="md-nav__link">
        Advanced Plan Rescheduling
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../examples/12_Advanced_Adding_Vehicles/" class="md-nav__link">
        Advanced Adding Vehicles
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../examples/13_Advanced_Freight_Synthesis/" class="md-nav__link">
        Advanced Freight Synthesis
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../examples/14_Advanced_Plan_Cropping/" class="md-nav__link">
        Advanced Plan Cropping
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../examples/15_Advanced_Choice/" class="md-nav__link">
        Advanced Choice
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../get_involved/" class="md-nav__link">
        Get involved
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../cli/" class="md-nav__link">
        CLI Reference
      </a>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_9" checked>
      
      
      
        <label class="md-nav__link" for="__nav_9" id="__nav_9_label" tabindex="0">
          API Reference
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_9_label" aria-expanded="true">
        <label class="md-nav__title" for="__nav_9">
          <span class="md-nav__icon md-icon"></span>
          API Reference
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../scoring/" class="md-nav__link">
        pam.scoring
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../vehicle/" class="md-nav__link">
        pam.vehicle
      </a>
    </li>
  

            
          
            
              
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          pam.activity
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        pam.activity
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#pam.activity" class="md-nav__link">
    pam.activity
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pam.activity.Activity" class="md-nav__link">
    Activity
  </a>
  
    <nav class="md-nav" aria-label="Activity">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#pam.activity.Activity.act" class="md-nav__link">
    act
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pam.activity.Activity.end_time" class="md-nav__link">
    end_time
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pam.activity.Activity.freq" class="md-nav__link">
    freq
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pam.activity.Activity.location" class="md-nav__link">
    location
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pam.activity.Activity.seq" class="md-nav__link">
    seq
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pam.activity.Activity.start_time" class="md-nav__link">
    start_time
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pam.activity.Activity.is_exact" class="md-nav__link">
    is_exact()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pam.activity.Activity.isin_exact" class="md-nav__link">
    isin_exact()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pam.activity.Activity.validate_matsim" class="md-nav__link">
    validate_matsim()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pam.activity.Leg" class="md-nav__link">
    Leg
  </a>
  
    <nav class="md-nav" aria-label="Leg">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#pam.activity.Leg.act" class="md-nav__link">
    act
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pam.activity.Leg.attributes" class="md-nav__link">
    attributes
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pam.activity.Leg.boarding_time" class="md-nav__link">
    boarding_time
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pam.activity.Leg.d_stop" class="md-nav__link">
    d_stop
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pam.activity.Leg.distance" class="md-nav__link">
    distance
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pam.activity.Leg.end_location" class="md-nav__link">
    end_location
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pam.activity.Leg.end_time" class="md-nav__link">
    end_time
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pam.activity.Leg.euclidean_distance" class="md-nav__link">
    euclidean_distance
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pam.activity.Leg.freq" class="md-nav__link">
    freq
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pam.activity.Leg.mode" class="md-nav__link">
    mode
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pam.activity.Leg.network_route" class="md-nav__link">
    network_route
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pam.activity.Leg.o_stop" class="md-nav__link">
    o_stop
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pam.activity.Leg.purp" class="md-nav__link">
    purp
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pam.activity.Leg.route" class="md-nav__link">
    route
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pam.activity.Leg.route_id" class="md-nav__link">
    route_id
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pam.activity.Leg.seq" class="md-nav__link">
    seq
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pam.activity.Leg.service_id" class="md-nav__link">
    service_id
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pam.activity.Leg.start_location" class="md-nav__link">
    start_location
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pam.activity.Leg.start_time" class="md-nav__link">
    start_time
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pam.activity.Plan" class="md-nav__link">
    Plan
  </a>
  
    <nav class="md-nav" aria-label="Plan">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#pam.activity.Plan.activities" class="md-nav__link">
    activities
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pam.activity.Plan.activity_classes" class="md-nav__link">
    activity_classes
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pam.activity.Plan.closed" class="md-nav__link">
    closed
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pam.activity.Plan.day" class="md-nav__link">
    day
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pam.activity.Plan.first" class="md-nav__link">
    first
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pam.activity.Plan.home" class="md-nav__link">
    home
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pam.activity.Plan.home_based" class="md-nav__link">
    home_based
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pam.activity.Plan.home_location" class="md-nav__link">
    home_location
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pam.activity.Plan.is_valid" class="md-nav__link">
    is_valid
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pam.activity.Plan.last" class="md-nav__link">
    last
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pam.activity.Plan.legs" class="md-nav__link">
    legs
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pam.activity.Plan.length" class="md-nav__link">
    length
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pam.activity.Plan.logger" class="md-nav__link">
    logger
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pam.activity.Plan.mode_classes" class="md-nav__link">
    mode_classes
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pam.activity.Plan.plan_freq" class="md-nav__link">
    plan_freq
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pam.activity.Plan.score" class="md-nav__link">
    score
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pam.activity.Plan.valid_end_of_day_time" class="md-nav__link">
    valid_end_of_day_time
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pam.activity.Plan.valid_locations" class="md-nav__link">
    valid_locations
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pam.activity.Plan.valid_sequence" class="md-nav__link">
    valid_sequence
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pam.activity.Plan.valid_start_of_day_time" class="md-nav__link">
    valid_start_of_day_time
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pam.activity.Plan.valid_time_sequence" class="md-nav__link">
    valid_time_sequence
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pam.activity.Plan.activity_tours" class="md-nav__link">
    activity_tours()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pam.activity.Plan.add" class="md-nav__link">
    add()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pam.activity.Plan.autocomplete_matsim" class="md-nav__link">
    autocomplete_matsim()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pam.activity.Plan.change_duration" class="md-nav__link">
    change_duration()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pam.activity.Plan.clear" class="md-nav__link">
    clear()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pam.activity.Plan.closed_duration" class="md-nav__link">
    closed_duration()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pam.activity.Plan.combine_matching_activities" class="md-nav__link">
    combine_matching_activities()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pam.activity.Plan.combine_wrapped_activities" class="md-nav__link">
    combine_wrapped_activities()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pam.activity.Plan.crop" class="md-nav__link">
    crop()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pam.activity.Plan.expand" class="md-nav__link">
    expand()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pam.activity.Plan.fill_plan" class="md-nav__link">
    fill_plan()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pam.activity.Plan.finalise_activity_end_times" class="md-nav__link">
    finalise_activity_end_times()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pam.activity.Plan.fix" class="md-nav__link">
    fix()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pam.activity.Plan.fix_location_consistency" class="md-nav__link">
    fix_location_consistency()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pam.activity.Plan.fix_time_consistency" class="md-nav__link">
    fix_time_consistency()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pam.activity.Plan.get" class="md-nav__link">
    get()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pam.activity.Plan.get_home_duration" class="md-nav__link">
    get_home_duration()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pam.activity.Plan.get_leg_tour" class="md-nav__link">
    get_leg_tour()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pam.activity.Plan.infer_activities_from_tour_purpose" class="md-nav__link">
    infer_activities_from_tour_purpose()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pam.activity.Plan.infer_activity_idxs" class="md-nav__link">
    infer_activity_idxs()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pam.activity.Plan.join_activities" class="md-nav__link">
    join_activities()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pam.activity.Plan.mode_shift" class="md-nav__link">
    mode_shift()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pam.activity.Plan.move_activity" class="md-nav__link">
    move_activity()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pam.activity.Plan.plot" class="md-nav__link">
    plot()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pam.activity.Plan.position_of" class="md-nav__link">
    position_of()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pam.activity.Plan.print" class="md-nav__link">
    print()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pam.activity.Plan.remove_activity" class="md-nav__link">
    remove_activity()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pam.activity.Plan.reversed" class="md-nav__link">
    reversed()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pam.activity.Plan.set_leg_purposes" class="md-nav__link">
    set_leg_purposes()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pam.activity.Plan.simplify_pt_trips" class="md-nav__link">
    simplify_pt_trips()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pam.activity.Plan.stay_at_home" class="md-nav__link">
    stay_at_home()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pam.activity.Plan.trip_legs" class="md-nav__link">
    trip_legs()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pam.activity.Plan.trips" class="md-nav__link">
    trips()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pam.activity.Plan.validate" class="md-nav__link">
    validate()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pam.activity.Plan.validate_locations" class="md-nav__link">
    validate_locations()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pam.activity.Plan.validate_sequence" class="md-nav__link">
    validate_sequence()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pam.activity.Plan.validate_times" class="md-nav__link">
    validate_times()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pam.activity.PlanComponent" class="md-nav__link">
    PlanComponent
  </a>
  
    <nav class="md-nav" aria-label="PlanComponent">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#pam.activity.PlanComponent.duration" class="md-nav__link">
    duration
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pam.activity.PlanComponent.hours" class="md-nav__link">
    hours
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pam.activity.PlanComponent.shift_duration" class="md-nav__link">
    shift_duration()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pam.activity.PlanComponent.shift_end_time" class="md-nav__link">
    shift_end_time()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pam.activity.PlanComponent.shift_start_time" class="md-nav__link">
    shift_start_time()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pam.activity.Route" class="md-nav__link">
    Route
  </a>
  
    <nav class="md-nav" aria-label="Route">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#pam.activity.Route.distance" class="md-nav__link">
    distance
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pam.activity.Route.exists" class="md-nav__link">
    exists
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pam.activity.Route.is_routed" class="md-nav__link">
    is_routed
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pam.activity.Route.is_teleported" class="md-nav__link">
    is_teleported
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pam.activity.Route.is_transit" class="md-nav__link">
    is_transit
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pam.activity.Route.network_route" class="md-nav__link">
    network_route
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pam.activity.Route.transit" class="md-nav__link">
    transit
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pam.activity.Route.type" class="md-nav__link">
    type
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pam.activity.Route.xml" class="md-nav__link">
    xml
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pam.activity.Route.get" class="md-nav__link">
    get()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pam.activity.RouteV11" class="md-nav__link">
    RouteV11
  </a>
  
    <nav class="md-nav" aria-label="RouteV11">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#pam.activity.RouteV11.is_transit" class="md-nav__link">
    is_transit
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pam.activity.RouteV11.transit" class="md-nav__link">
    transit
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pam.activity.Trip" class="md-nav__link">
    Trip
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../core/" class="md-nav__link">
        pam.core
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../location/" class="md-nav__link">
        pam.location
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../utils/" class="md-nav__link">
        pam.utils
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_9_7" >
      
      
      
        <label class="md-nav__link" for="__nav_9_7" id="__nav_9_7_label" tabindex="0">
          pam.write
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_9_7_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_9_7">
          <span class="md-nav__icon md-icon"></span>
          pam.write
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../write/matrices/" class="md-nav__link">
        pam.write.matrices
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../write/diary/" class="md-nav__link">
        pam.write.diary
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../write/matsim/" class="md-nav__link">
        pam.write.matsim
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_9_8" >
      
      
      
        <label class="md-nav__link" for="__nav_9_8" id="__nav_9_8_label" tabindex="0">
          pam.plot
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_9_8_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_9_8">
          <span class="md-nav__icon md-icon"></span>
          pam.plot
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../plot/stats/" class="md-nav__link">
        pam.plot.stats
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../plot/plans/" class="md-nav__link">
        pam.plot.plans
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_9_9" >
      
      
      
        <label class="md-nav__link" for="__nav_9_9" id="__nav_9_9_label" tabindex="0">
          pam.optimise
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_9_9_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_9_9">
          <span class="md-nav__icon md-icon"></span>
          pam.optimise
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../optimise/grid/" class="md-nav__link">
        pam.optimise.grid
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../optimise/random/" class="md-nav__link">
        pam.optimise.random
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_9_10" >
      
      
      
        <label class="md-nav__link" for="__nav_9_10" id="__nav_9_10_label" tabindex="0">
          pam.array
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_9_10_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_9_10">
          <span class="md-nav__icon md-icon"></span>
          pam.array
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../array/encode/" class="md-nav__link">
        pam.array.encode
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../array/distance/" class="md-nav__link">
        pam.array.distance
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../array/decode/" class="md-nav__link">
        pam.array.decode
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_9_11" >
      
      
      
        <label class="md-nav__link" for="__nav_9_11" id="__nav_9_11_label" tabindex="0">
          pam.planner
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_9_11_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_9_11">
          <span class="md-nav__icon md-icon"></span>
          pam.planner
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../planner/od/" class="md-nav__link">
        pam.planner.od
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../planner/clustering/" class="md-nav__link">
        pam.planner.clustering
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../planner/encoder/" class="md-nav__link">
        pam.planner.encoder
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../planner/utils_planner/" class="md-nav__link">
        pam.planner.utils_planner
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../planner/choice_location/" class="md-nav__link">
        pam.planner.choice_location
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../planner/zones/" class="md-nav__link">
        pam.planner.zones
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_9_12" >
      
      
      
        <label class="md-nav__link" for="__nav_9_12" id="__nav_9_12_label" tabindex="0">
          pam.read
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_9_12_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_9_12">
          <span class="md-nav__icon md-icon"></span>
          pam.read
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../read/diary/" class="md-nav__link">
        pam.read.diary
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../read/matsim/" class="md-nav__link">
        pam.read.matsim
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_9_13" >
      
      
      
        <label class="md-nav__link" for="__nav_9_13" id="__nav_9_13_label" tabindex="0">
          pam.operations
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_9_13_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_9_13">
          <span class="md-nav__icon md-icon"></span>
          pam.operations
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../operations/cropping/" class="md-nav__link">
        pam.operations.cropping
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../operations/combine/" class="md-nav__link">
        pam.operations.combine
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_9_14" >
      
      
      
        <label class="md-nav__link" for="__nav_9_14" id="__nav_9_14_label" tabindex="0">
          pam.samplers
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_9_14_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_9_14">
          <span class="md-nav__icon md-icon"></span>
          pam.samplers
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../samplers/time/" class="md-nav__link">
        pam.samplers.time
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../samplers/attributes/" class="md-nav__link">
        pam.samplers.attributes
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../samplers/population/" class="md-nav__link">
        pam.samplers.population
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../samplers/spatial/" class="md-nav__link">
        pam.samplers.spatial
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../samplers/facility/" class="md-nav__link">
        pam.samplers.facility
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../samplers/basic/" class="md-nav__link">
        pam.samplers.basic
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../samplers/tour/" class="md-nav__link">
        pam.samplers.tour
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_9_15" >
      
      
      
        <label class="md-nav__link" for="__nav_9_15" id="__nav_9_15_label" tabindex="0">
          pam.report
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_9_15_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_9_15">
          <span class="md-nav__icon md-icon"></span>
          pam.report
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../report/stringify/" class="md-nav__link">
        pam.report.stringify
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../report/summary/" class="md-nav__link">
        pam.report.summary
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../report/benchmarks/" class="md-nav__link">
        pam.report.benchmarks
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_9_16" >
      
      
      
        <label class="md-nav__link" for="__nav_9_16" id="__nav_9_16_label" tabindex="0">
          pam.policy
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_9_16_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_9_16">
          <span class="md-nav__icon md-icon"></span>
          pam.policy
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../policy/probability_samplers/" class="md-nav__link">
        pam.policy.probability_samplers
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../policy/modifiers/" class="md-nav__link">
        pam.policy.modifiers
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../policy/policies/" class="md-nav__link">
        pam.policy.policies
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../policy/filters/" class="md-nav__link">
        pam.policy.filters
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#pam.activity" class="md-nav__link">
    pam.activity
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pam.activity.Activity" class="md-nav__link">
    Activity
  </a>
  
    <nav class="md-nav" aria-label="Activity">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#pam.activity.Activity.act" class="md-nav__link">
    act
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pam.activity.Activity.end_time" class="md-nav__link">
    end_time
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pam.activity.Activity.freq" class="md-nav__link">
    freq
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pam.activity.Activity.location" class="md-nav__link">
    location
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pam.activity.Activity.seq" class="md-nav__link">
    seq
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pam.activity.Activity.start_time" class="md-nav__link">
    start_time
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pam.activity.Activity.is_exact" class="md-nav__link">
    is_exact()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pam.activity.Activity.isin_exact" class="md-nav__link">
    isin_exact()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pam.activity.Activity.validate_matsim" class="md-nav__link">
    validate_matsim()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pam.activity.Leg" class="md-nav__link">
    Leg
  </a>
  
    <nav class="md-nav" aria-label="Leg">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#pam.activity.Leg.act" class="md-nav__link">
    act
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pam.activity.Leg.attributes" class="md-nav__link">
    attributes
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pam.activity.Leg.boarding_time" class="md-nav__link">
    boarding_time
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pam.activity.Leg.d_stop" class="md-nav__link">
    d_stop
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pam.activity.Leg.distance" class="md-nav__link">
    distance
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pam.activity.Leg.end_location" class="md-nav__link">
    end_location
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pam.activity.Leg.end_time" class="md-nav__link">
    end_time
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pam.activity.Leg.euclidean_distance" class="md-nav__link">
    euclidean_distance
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pam.activity.Leg.freq" class="md-nav__link">
    freq
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pam.activity.Leg.mode" class="md-nav__link">
    mode
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pam.activity.Leg.network_route" class="md-nav__link">
    network_route
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pam.activity.Leg.o_stop" class="md-nav__link">
    o_stop
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pam.activity.Leg.purp" class="md-nav__link">
    purp
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pam.activity.Leg.route" class="md-nav__link">
    route
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pam.activity.Leg.route_id" class="md-nav__link">
    route_id
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pam.activity.Leg.seq" class="md-nav__link">
    seq
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pam.activity.Leg.service_id" class="md-nav__link">
    service_id
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pam.activity.Leg.start_location" class="md-nav__link">
    start_location
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pam.activity.Leg.start_time" class="md-nav__link">
    start_time
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pam.activity.Plan" class="md-nav__link">
    Plan
  </a>
  
    <nav class="md-nav" aria-label="Plan">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#pam.activity.Plan.activities" class="md-nav__link">
    activities
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pam.activity.Plan.activity_classes" class="md-nav__link">
    activity_classes
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pam.activity.Plan.closed" class="md-nav__link">
    closed
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pam.activity.Plan.day" class="md-nav__link">
    day
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pam.activity.Plan.first" class="md-nav__link">
    first
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pam.activity.Plan.home" class="md-nav__link">
    home
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pam.activity.Plan.home_based" class="md-nav__link">
    home_based
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pam.activity.Plan.home_location" class="md-nav__link">
    home_location
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pam.activity.Plan.is_valid" class="md-nav__link">
    is_valid
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pam.activity.Plan.last" class="md-nav__link">
    last
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pam.activity.Plan.legs" class="md-nav__link">
    legs
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pam.activity.Plan.length" class="md-nav__link">
    length
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pam.activity.Plan.logger" class="md-nav__link">
    logger
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pam.activity.Plan.mode_classes" class="md-nav__link">
    mode_classes
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pam.activity.Plan.plan_freq" class="md-nav__link">
    plan_freq
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pam.activity.Plan.score" class="md-nav__link">
    score
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pam.activity.Plan.valid_end_of_day_time" class="md-nav__link">
    valid_end_of_day_time
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pam.activity.Plan.valid_locations" class="md-nav__link">
    valid_locations
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pam.activity.Plan.valid_sequence" class="md-nav__link">
    valid_sequence
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pam.activity.Plan.valid_start_of_day_time" class="md-nav__link">
    valid_start_of_day_time
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pam.activity.Plan.valid_time_sequence" class="md-nav__link">
    valid_time_sequence
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pam.activity.Plan.activity_tours" class="md-nav__link">
    activity_tours()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pam.activity.Plan.add" class="md-nav__link">
    add()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pam.activity.Plan.autocomplete_matsim" class="md-nav__link">
    autocomplete_matsim()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pam.activity.Plan.change_duration" class="md-nav__link">
    change_duration()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pam.activity.Plan.clear" class="md-nav__link">
    clear()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pam.activity.Plan.closed_duration" class="md-nav__link">
    closed_duration()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pam.activity.Plan.combine_matching_activities" class="md-nav__link">
    combine_matching_activities()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pam.activity.Plan.combine_wrapped_activities" class="md-nav__link">
    combine_wrapped_activities()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pam.activity.Plan.crop" class="md-nav__link">
    crop()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pam.activity.Plan.expand" class="md-nav__link">
    expand()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pam.activity.Plan.fill_plan" class="md-nav__link">
    fill_plan()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pam.activity.Plan.finalise_activity_end_times" class="md-nav__link">
    finalise_activity_end_times()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pam.activity.Plan.fix" class="md-nav__link">
    fix()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pam.activity.Plan.fix_location_consistency" class="md-nav__link">
    fix_location_consistency()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pam.activity.Plan.fix_time_consistency" class="md-nav__link">
    fix_time_consistency()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pam.activity.Plan.get" class="md-nav__link">
    get()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pam.activity.Plan.get_home_duration" class="md-nav__link">
    get_home_duration()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pam.activity.Plan.get_leg_tour" class="md-nav__link">
    get_leg_tour()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pam.activity.Plan.infer_activities_from_tour_purpose" class="md-nav__link">
    infer_activities_from_tour_purpose()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pam.activity.Plan.infer_activity_idxs" class="md-nav__link">
    infer_activity_idxs()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pam.activity.Plan.join_activities" class="md-nav__link">
    join_activities()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pam.activity.Plan.mode_shift" class="md-nav__link">
    mode_shift()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pam.activity.Plan.move_activity" class="md-nav__link">
    move_activity()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pam.activity.Plan.plot" class="md-nav__link">
    plot()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pam.activity.Plan.position_of" class="md-nav__link">
    position_of()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pam.activity.Plan.print" class="md-nav__link">
    print()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pam.activity.Plan.remove_activity" class="md-nav__link">
    remove_activity()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pam.activity.Plan.reversed" class="md-nav__link">
    reversed()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pam.activity.Plan.set_leg_purposes" class="md-nav__link">
    set_leg_purposes()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pam.activity.Plan.simplify_pt_trips" class="md-nav__link">
    simplify_pt_trips()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pam.activity.Plan.stay_at_home" class="md-nav__link">
    stay_at_home()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pam.activity.Plan.trip_legs" class="md-nav__link">
    trip_legs()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pam.activity.Plan.trips" class="md-nav__link">
    trips()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pam.activity.Plan.validate" class="md-nav__link">
    validate()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pam.activity.Plan.validate_locations" class="md-nav__link">
    validate_locations()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pam.activity.Plan.validate_sequence" class="md-nav__link">
    validate_sequence()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pam.activity.Plan.validate_times" class="md-nav__link">
    validate_times()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pam.activity.PlanComponent" class="md-nav__link">
    PlanComponent
  </a>
  
    <nav class="md-nav" aria-label="PlanComponent">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#pam.activity.PlanComponent.duration" class="md-nav__link">
    duration
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pam.activity.PlanComponent.hours" class="md-nav__link">
    hours
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pam.activity.PlanComponent.shift_duration" class="md-nav__link">
    shift_duration()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pam.activity.PlanComponent.shift_end_time" class="md-nav__link">
    shift_end_time()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pam.activity.PlanComponent.shift_start_time" class="md-nav__link">
    shift_start_time()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pam.activity.Route" class="md-nav__link">
    Route
  </a>
  
    <nav class="md-nav" aria-label="Route">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#pam.activity.Route.distance" class="md-nav__link">
    distance
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pam.activity.Route.exists" class="md-nav__link">
    exists
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pam.activity.Route.is_routed" class="md-nav__link">
    is_routed
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pam.activity.Route.is_teleported" class="md-nav__link">
    is_teleported
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pam.activity.Route.is_transit" class="md-nav__link">
    is_transit
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pam.activity.Route.network_route" class="md-nav__link">
    network_route
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pam.activity.Route.transit" class="md-nav__link">
    transit
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pam.activity.Route.type" class="md-nav__link">
    type
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pam.activity.Route.xml" class="md-nav__link">
    xml
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pam.activity.Route.get" class="md-nav__link">
    get()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pam.activity.RouteV11" class="md-nav__link">
    RouteV11
  </a>
  
    <nav class="md-nav" aria-label="RouteV11">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#pam.activity.RouteV11.is_transit" class="md-nav__link">
    is_transit
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pam.activity.RouteV11.transit" class="md-nav__link">
    transit
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pam.activity.Trip" class="md-nav__link">
    Trip
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
  


  <h1>pam.activity</h1>

<div class="doc doc-object doc-module">


<a id="pam.activity"></a>
  <div class="doc doc-contents first">

  

  <div class="doc doc-children">








<div class="doc doc-object doc-class">



<h2 id="pam.activity.Activity" class="doc doc-heading">
<code class="highlight language-python"><span class="n">Activity</span><span class="p">(</span><span class="n">seq</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">act</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">area</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">link</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">loc</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">start_time</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">end_time</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">freq</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span></code>

<a href="#pam.activity.Activity" class="headerlink" title="Permanent link">#</a></h2>


  <div class="doc doc-contents ">
      <p class="doc doc-class-bases">
        Bases: <code><a class="autorefs autorefs-internal" title="pam.activity.PlanComponent" href="#pam.activity.PlanComponent">PlanComponent</a></code></p>



          <details class="quote">
            <summary>Source code in <code>pam/activity.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">966</span>
<span class="normal">967</span>
<span class="normal">968</span>
<span class="normal">969</span>
<span class="normal">970</span>
<span class="normal">971</span>
<span class="normal">972</span>
<span class="normal">973</span>
<span class="normal">974</span>
<span class="normal">975</span>
<span class="normal">976</span>
<span class="normal">977</span>
<span class="normal">978</span>
<span class="normal">979</span>
<span class="normal">980</span>
<span class="normal">981</span>
<span class="normal">982</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">seq</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">act</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">area</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">link</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">loc</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">start_time</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">end_time</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">freq</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
<span class="p">):</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">seq</span> <span class="o">=</span> <span class="n">seq</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">act</span> <span class="o">=</span> <span class="n">act</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">location</span> <span class="o">=</span> <span class="n">Location</span><span class="p">(</span><span class="n">loc</span><span class="o">=</span><span class="n">loc</span><span class="p">,</span> <span class="n">link</span><span class="o">=</span><span class="n">link</span><span class="p">,</span> <span class="n">area</span><span class="o">=</span><span class="n">area</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">start_time</span> <span class="o">=</span> <span class="n">start_time</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">end_time</span> <span class="o">=</span> <span class="n">end_time</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">freq</span><span class="o">=</span><span class="n">freq</span>
</code></pre></div></td></tr></table></div>
          </details>

  

  <div class="doc doc-children">







<div class="doc doc-object doc-attribute">



<h3 id="pam.activity.Activity.act" class="doc doc-heading">
<code class="highlight language-python"><span class="n">act</span> <span class="o">=</span> <span class="n">act</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#pam.activity.Activity.act" class="headerlink" title="Permanent link">#</a></h3>


  <div class="doc doc-contents ">
  </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="pam.activity.Activity.end_time" class="doc doc-heading">
<code class="highlight language-python"><span class="n">end_time</span> <span class="o">=</span> <span class="n">end_time</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#pam.activity.Activity.end_time" class="headerlink" title="Permanent link">#</a></h3>


  <div class="doc doc-contents ">
  </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="pam.activity.Activity.freq" class="doc doc-heading">
<code class="highlight language-python"><span class="n">freq</span> <span class="o">=</span> <span class="n">freq</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#pam.activity.Activity.freq" class="headerlink" title="Permanent link">#</a></h3>


  <div class="doc doc-contents ">
  </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="pam.activity.Activity.location" class="doc doc-heading">
<code class="highlight language-python"><span class="n">location</span> <span class="o">=</span> <span class="n">Location</span><span class="p">(</span><span class="n">loc</span><span class="o">=</span><span class="n">loc</span><span class="p">,</span> <span class="n">link</span><span class="o">=</span><span class="n">link</span><span class="p">,</span> <span class="n">area</span><span class="o">=</span><span class="n">area</span><span class="p">)</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#pam.activity.Activity.location" class="headerlink" title="Permanent link">#</a></h3>


  <div class="doc doc-contents ">
  </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="pam.activity.Activity.seq" class="doc doc-heading">
<code class="highlight language-python"><span class="n">seq</span> <span class="o">=</span> <span class="n">seq</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#pam.activity.Activity.seq" class="headerlink" title="Permanent link">#</a></h3>


  <div class="doc doc-contents ">
  </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="pam.activity.Activity.start_time" class="doc doc-heading">
<code class="highlight language-python"><span class="n">start_time</span> <span class="o">=</span> <span class="n">start_time</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#pam.activity.Activity.start_time" class="headerlink" title="Permanent link">#</a></h3>


  <div class="doc doc-contents ">
  </div>

</div>



<div class="doc doc-object doc-function">



<h3 id="pam.activity.Activity.is_exact" class="doc doc-heading">
<code class="highlight language-python"><span class="n">is_exact</span><span class="p">(</span><span class="n">other</span><span class="p">)</span></code>

<a href="#pam.activity.Activity.is_exact" class="headerlink" title="Permanent link">#</a></h3>


  <div class="doc doc-contents ">

      <details class="quote">
        <summary>Source code in <code>pam/activity.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">995</span>
<span class="normal">996</span>
<span class="normal">997</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">is_exact</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
    <span class="k">return</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">location</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">location</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">act</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">act</span><span class="p">)</span> \
           <span class="ow">and</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">start_time</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">start_time</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">end_time</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">end_time</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="pam.activity.Activity.isin_exact" class="doc doc-heading">
<code class="highlight language-python"><span class="n">isin_exact</span><span class="p">(</span><span class="n">activities</span><span class="p">:</span> <span class="nb">list</span><span class="p">)</span></code>

<a href="#pam.activity.Activity.isin_exact" class="headerlink" title="Permanent link">#</a></h3>


  <div class="doc doc-contents ">

      <details class="quote">
        <summary>Source code in <code>pam/activity.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 999</span>
<span class="normal">1000</span>
<span class="normal">1001</span>
<span class="normal">1002</span>
<span class="normal">1003</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">isin_exact</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">activities</span><span class="p">:</span> <span class="nb">list</span><span class="p">):</span>
    <span class="k">for</span> <span class="n">other</span> <span class="ow">in</span> <span class="n">activities</span><span class="p">:</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_exact</span><span class="p">(</span><span class="n">other</span><span class="p">):</span>
            <span class="k">return</span> <span class="kc">True</span>
    <span class="k">return</span> <span class="kc">False</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="pam.activity.Activity.validate_matsim" class="doc doc-heading">
<code class="highlight language-python"><span class="n">validate_matsim</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="kc">None</span></code>

<a href="#pam.activity.Activity.validate_matsim" class="headerlink" title="Permanent link">#</a></h3>


  <div class="doc doc-contents ">
  
      <p>Checks if activity has required fields for a valid matsim plan.</p>

      <details class="quote">
        <summary>Source code in <code>pam/activity.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1005</span>
<span class="normal">1006</span>
<span class="normal">1007</span>
<span class="normal">1008</span>
<span class="normal">1009</span>
<span class="normal">1010</span>
<span class="normal">1011</span>
<span class="normal">1012</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">validate_matsim</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Checks if activity has required fields for a valid matsim plan.&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">act</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">InvalidMATSimError</span><span class="p">(</span><span class="s2">&quot;Activity requires a type.&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">start_time</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">end_time</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">InvalidMATSimError</span><span class="p">(</span><span class="s2">&quot;Activity requires either start time or end_time.&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">location</span><span class="o">.</span><span class="n">loc</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">location</span><span class="o">.</span><span class="n">link</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">InvalidMATSimError</span><span class="p">(</span><span class="s2">&quot;Activity requires link id or x,y coordinates.&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>



  </div>

  </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="pam.activity.Leg" class="doc doc-heading">
<code class="highlight language-python"><span class="n">Leg</span><span class="p">(</span><span class="n">seq</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">mode</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">start_area</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">end_area</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">start_link</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">end_link</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">start_loc</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">end_loc</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">start_time</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">end_time</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">distance</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">purp</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">freq</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">attributes</span> <span class="o">=</span> <span class="p">{},</span> <span class="n">route</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span></code>

<a href="#pam.activity.Leg" class="headerlink" title="Permanent link">#</a></h2>


  <div class="doc doc-contents ">
      <p class="doc doc-class-bases">
        Bases: <code><a class="autorefs autorefs-internal" title="pam.activity.PlanComponent" href="#pam.activity.PlanComponent">PlanComponent</a></code></p>



          <details class="quote">
            <summary>Source code in <code>pam/activity.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1018</span>
<span class="normal">1019</span>
<span class="normal">1020</span>
<span class="normal">1021</span>
<span class="normal">1022</span>
<span class="normal">1023</span>
<span class="normal">1024</span>
<span class="normal">1025</span>
<span class="normal">1026</span>
<span class="normal">1027</span>
<span class="normal">1028</span>
<span class="normal">1029</span>
<span class="normal">1030</span>
<span class="normal">1031</span>
<span class="normal">1032</span>
<span class="normal">1033</span>
<span class="normal">1034</span>
<span class="normal">1035</span>
<span class="normal">1036</span>
<span class="normal">1037</span>
<span class="normal">1038</span>
<span class="normal">1039</span>
<span class="normal">1040</span>
<span class="normal">1041</span>
<span class="normal">1042</span>
<span class="normal">1043</span>
<span class="normal">1044</span>
<span class="normal">1045</span>
<span class="normal">1046</span>
<span class="normal">1047</span>
<span class="normal">1048</span>
<span class="normal">1049</span>
<span class="normal">1050</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">seq</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">mode</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">start_area</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">end_area</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">start_link</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">end_link</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">start_loc</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">end_loc</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">start_time</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">end_time</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">distance</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">purp</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">freq</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">attributes</span><span class="o">=</span><span class="p">{},</span>
        <span class="n">route</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
<span class="p">):</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">seq</span> <span class="o">=</span> <span class="n">seq</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">purp</span> <span class="o">=</span> <span class="n">purp</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">mode</span> <span class="o">=</span> <span class="n">mode</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">start_location</span> <span class="o">=</span> <span class="n">Location</span><span class="p">(</span><span class="n">loc</span><span class="o">=</span><span class="n">start_loc</span><span class="p">,</span> <span class="n">link</span><span class="o">=</span><span class="n">start_link</span><span class="p">,</span> <span class="n">area</span><span class="o">=</span><span class="n">start_area</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">end_location</span> <span class="o">=</span> <span class="n">Location</span><span class="p">(</span><span class="n">loc</span><span class="o">=</span><span class="n">end_loc</span><span class="p">,</span> <span class="n">link</span><span class="o">=</span><span class="n">end_link</span><span class="p">,</span> <span class="n">area</span><span class="o">=</span><span class="n">end_area</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">start_time</span> <span class="o">=</span> <span class="n">start_time</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">end_time</span> <span class="o">=</span> <span class="n">end_time</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">freq</span> <span class="o">=</span> <span class="n">freq</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_distance</span> <span class="o">=</span> <span class="n">distance</span>
    <span class="c1"># relevant for simulated plans</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">attributes</span> <span class="o">=</span> <span class="n">attributes</span>
    <span class="k">if</span> <span class="n">route</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">route</span> <span class="o">=</span> <span class="n">route</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">route</span> <span class="o">=</span> <span class="n">Route</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
          </details>

  

  <div class="doc doc-children">







<div class="doc doc-object doc-attribute">



<h3 id="pam.activity.Leg.act" class="doc doc-heading">
<code class="highlight language-python"><span class="n">act</span> <span class="o">=</span> <span class="s1">&#39;travel&#39;</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#pam.activity.Leg.act" class="headerlink" title="Permanent link">#</a></h3>


  <div class="doc doc-contents ">
  </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="pam.activity.Leg.attributes" class="doc doc-heading">
<code class="highlight language-python"><span class="n">attributes</span> <span class="o">=</span> <span class="n">attributes</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#pam.activity.Leg.attributes" class="headerlink" title="Permanent link">#</a></h3>


  <div class="doc doc-contents ">
  </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="pam.activity.Leg.boarding_time" class="doc doc-heading">
<code class="highlight language-python"><span class="n">boarding_time</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#pam.activity.Leg.boarding_time" class="headerlink" title="Permanent link">#</a></h3>


  <div class="doc doc-contents ">
  </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="pam.activity.Leg.d_stop" class="doc doc-heading">
<code class="highlight language-python"><span class="n">d_stop</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#pam.activity.Leg.d_stop" class="headerlink" title="Permanent link">#</a></h3>


  <div class="doc doc-contents ">
  </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="pam.activity.Leg.distance" class="doc doc-heading">
<code class="highlight language-python"><span class="n">distance</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#pam.activity.Leg.distance" class="headerlink" title="Permanent link">#</a></h3>


  <div class="doc doc-contents ">
  
      <p>Distance, assumed to be in m in either case</p>
  </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="pam.activity.Leg.end_location" class="doc doc-heading">
<code class="highlight language-python"><span class="n">end_location</span> <span class="o">=</span> <span class="n">Location</span><span class="p">(</span><span class="n">loc</span><span class="o">=</span><span class="n">end_loc</span><span class="p">,</span> <span class="n">link</span><span class="o">=</span><span class="n">end_link</span><span class="p">,</span> <span class="n">area</span><span class="o">=</span><span class="n">end_area</span><span class="p">)</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#pam.activity.Leg.end_location" class="headerlink" title="Permanent link">#</a></h3>


  <div class="doc doc-contents ">
  </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="pam.activity.Leg.end_time" class="doc doc-heading">
<code class="highlight language-python"><span class="n">end_time</span> <span class="o">=</span> <span class="n">end_time</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#pam.activity.Leg.end_time" class="headerlink" title="Permanent link">#</a></h3>


  <div class="doc doc-contents ">
  </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="pam.activity.Leg.euclidean_distance" class="doc doc-heading">
<code class="highlight language-python"><span class="n">euclidean_distance</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#pam.activity.Leg.euclidean_distance" class="headerlink" title="Permanent link">#</a></h3>


  <div class="doc doc-contents ">
  </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="pam.activity.Leg.freq" class="doc doc-heading">
<code class="highlight language-python"><span class="n">freq</span> <span class="o">=</span> <span class="n">freq</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#pam.activity.Leg.freq" class="headerlink" title="Permanent link">#</a></h3>


  <div class="doc doc-contents ">
  </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="pam.activity.Leg.mode" class="doc doc-heading">
<code class="highlight language-python"><span class="n">mode</span> <span class="o">=</span> <span class="n">mode</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#pam.activity.Leg.mode" class="headerlink" title="Permanent link">#</a></h3>


  <div class="doc doc-contents ">
  </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="pam.activity.Leg.network_route" class="doc doc-heading">
<code class="highlight language-python"><span class="n">network_route</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#pam.activity.Leg.network_route" class="headerlink" title="Permanent link">#</a></h3>


  <div class="doc doc-contents ">
  </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="pam.activity.Leg.o_stop" class="doc doc-heading">
<code class="highlight language-python"><span class="n">o_stop</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#pam.activity.Leg.o_stop" class="headerlink" title="Permanent link">#</a></h3>


  <div class="doc doc-contents ">
  </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="pam.activity.Leg.purp" class="doc doc-heading">
<code class="highlight language-python"><span class="n">purp</span> <span class="o">=</span> <span class="n">purp</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#pam.activity.Leg.purp" class="headerlink" title="Permanent link">#</a></h3>


  <div class="doc doc-contents ">
  </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="pam.activity.Leg.route" class="doc doc-heading">
<code class="highlight language-python"><span class="n">route</span> <span class="o">=</span> <span class="n">route</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#pam.activity.Leg.route" class="headerlink" title="Permanent link">#</a></h3>


  <div class="doc doc-contents ">
  </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="pam.activity.Leg.route_id" class="doc doc-heading">
<code class="highlight language-python"><span class="n">route_id</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#pam.activity.Leg.route_id" class="headerlink" title="Permanent link">#</a></h3>


  <div class="doc doc-contents ">
  </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="pam.activity.Leg.seq" class="doc doc-heading">
<code class="highlight language-python"><span class="n">seq</span> <span class="o">=</span> <span class="n">seq</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#pam.activity.Leg.seq" class="headerlink" title="Permanent link">#</a></h3>


  <div class="doc doc-contents ">
  </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="pam.activity.Leg.service_id" class="doc doc-heading">
<code class="highlight language-python"><span class="n">service_id</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#pam.activity.Leg.service_id" class="headerlink" title="Permanent link">#</a></h3>


  <div class="doc doc-contents ">
  </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="pam.activity.Leg.start_location" class="doc doc-heading">
<code class="highlight language-python"><span class="n">start_location</span> <span class="o">=</span> <span class="n">Location</span><span class="p">(</span><span class="n">loc</span><span class="o">=</span><span class="n">start_loc</span><span class="p">,</span> <span class="n">link</span><span class="o">=</span><span class="n">start_link</span><span class="p">,</span> <span class="n">area</span><span class="o">=</span><span class="n">start_area</span><span class="p">)</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#pam.activity.Leg.start_location" class="headerlink" title="Permanent link">#</a></h3>


  <div class="doc doc-contents ">
  </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="pam.activity.Leg.start_time" class="doc doc-heading">
<code class="highlight language-python"><span class="n">start_time</span> <span class="o">=</span> <span class="n">start_time</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#pam.activity.Leg.start_time" class="headerlink" title="Permanent link">#</a></h3>


  <div class="doc doc-contents ">
  </div>

</div>





  </div>

  </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="pam.activity.Plan" class="doc doc-heading">
<code class="highlight language-python"><span class="n">Plan</span><span class="p">(</span><span class="n">home_area</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">home_location</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Location</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">home_loc</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Location</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">freq</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Location</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span></code>

<a href="#pam.activity.Plan" class="headerlink" title="Permanent link">#</a></h2>


  <div class="doc doc-contents ">



          <details class="quote">
            <summary>Source code in <code>pam/activity.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">home_area</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">home_location</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Location</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">home_loc</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">freq</span><span class="o">=</span><span class="kc">None</span>
    <span class="p">):</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">day</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">if</span> <span class="n">home_location</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">home_location</span> <span class="o">=</span> <span class="n">home_location</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">home_location</span> <span class="o">=</span> <span class="n">Location</span><span class="p">()</span>
    <span class="k">if</span> <span class="n">home_area</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">home_location</span><span class="o">.</span><span class="n">area</span> <span class="o">=</span> <span class="n">home_area</span>
    <span class="k">if</span> <span class="n">home_loc</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">home_location</span><span class="o">.</span><span class="n">loc</span> <span class="o">=</span> <span class="n">home_loc</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">logger</span> <span class="o">=</span> <span class="n">logging</span><span class="o">.</span><span class="n">getLogger</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">plan_freq</span> <span class="o">=</span> <span class="n">freq</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">score</span> <span class="o">=</span> <span class="kc">None</span>
</code></pre></div></td></tr></table></div>
          </details>

  

  <div class="doc doc-children">







<div class="doc doc-object doc-attribute">



<h3 id="pam.activity.Plan.activities" class="doc doc-heading">
<code class="highlight language-python"><span class="n">activities</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#pam.activity.Plan.activities" class="headerlink" title="Permanent link">#</a></h3>


  <div class="doc doc-contents ">
  </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="pam.activity.Plan.activity_classes" class="doc doc-heading">
<code class="highlight language-python"><span class="n">activity_classes</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#pam.activity.Plan.activity_classes" class="headerlink" title="Permanent link">#</a></h3>


  <div class="doc doc-contents ">
  </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="pam.activity.Plan.closed" class="doc doc-heading">
<code class="highlight language-python"><span class="n">closed</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#pam.activity.Plan.closed" class="headerlink" title="Permanent link">#</a></h3>


  <div class="doc doc-contents ">
  
      <p>Check if plan starts and stops at the same facility (based on activity and location)
:return: Bool</p>
  </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="pam.activity.Plan.day" class="doc doc-heading">
<code class="highlight language-python"><span class="n">day</span> <span class="o">=</span> <span class="p">[]</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#pam.activity.Plan.day" class="headerlink" title="Permanent link">#</a></h3>


  <div class="doc doc-contents ">
  </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="pam.activity.Plan.first" class="doc doc-heading">
<code class="highlight language-python"><span class="n">first</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#pam.activity.Plan.first" class="headerlink" title="Permanent link">#</a></h3>


  <div class="doc doc-contents ">
  </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="pam.activity.Plan.home" class="doc doc-heading">
<code class="highlight language-python"><span class="n">home</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#pam.activity.Plan.home" class="headerlink" title="Permanent link">#</a></h3>


  <div class="doc doc-contents ">
  </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="pam.activity.Plan.home_based" class="doc doc-heading">
<code class="highlight language-python"><span class="n">home_based</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#pam.activity.Plan.home_based" class="headerlink" title="Permanent link">#</a></h3>


  <div class="doc doc-contents ">
  </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="pam.activity.Plan.home_location" class="doc doc-heading">
<code class="highlight language-python"><span class="n">home_location</span> <span class="o">=</span> <span class="n">home_location</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#pam.activity.Plan.home_location" class="headerlink" title="Permanent link">#</a></h3>


  <div class="doc doc-contents ">
  </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="pam.activity.Plan.is_valid" class="doc doc-heading">
<code class="highlight language-python"><span class="n">is_valid</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#pam.activity.Plan.is_valid" class="headerlink" title="Permanent link">#</a></h3>


  <div class="doc doc-contents ">
  
      <p>Check for sequence, time and location structure and consistency.
Note that this also checks that plan ends at END_OF_DAY.
:return: bool</p>
  </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="pam.activity.Plan.last" class="doc doc-heading">
<code class="highlight language-python"><span class="n">last</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#pam.activity.Plan.last" class="headerlink" title="Permanent link">#</a></h3>


  <div class="doc doc-contents ">
  </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="pam.activity.Plan.legs" class="doc doc-heading">
<code class="highlight language-python"><span class="n">legs</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#pam.activity.Plan.legs" class="headerlink" title="Permanent link">#</a></h3>


  <div class="doc doc-contents ">
  </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="pam.activity.Plan.length" class="doc doc-heading">
<code class="highlight language-python"><span class="n">length</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#pam.activity.Plan.length" class="headerlink" title="Permanent link">#</a></h3>


  <div class="doc doc-contents ">
  </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="pam.activity.Plan.logger" class="doc doc-heading">
<code class="highlight language-python"><span class="n">logger</span> <span class="o">=</span> <span class="n">logging</span><span class="o">.</span><span class="n">getLogger</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#pam.activity.Plan.logger" class="headerlink" title="Permanent link">#</a></h3>


  <div class="doc doc-contents ">
  </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="pam.activity.Plan.mode_classes" class="doc doc-heading">
<code class="highlight language-python"><span class="n">mode_classes</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#pam.activity.Plan.mode_classes" class="headerlink" title="Permanent link">#</a></h3>


  <div class="doc doc-contents ">
  </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="pam.activity.Plan.plan_freq" class="doc doc-heading">
<code class="highlight language-python"><span class="n">plan_freq</span> <span class="o">=</span> <span class="n">freq</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#pam.activity.Plan.plan_freq" class="headerlink" title="Permanent link">#</a></h3>


  <div class="doc doc-contents ">
  </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="pam.activity.Plan.score" class="doc doc-heading">
<code class="highlight language-python"><span class="n">score</span> <span class="o">=</span> <span class="kc">None</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#pam.activity.Plan.score" class="headerlink" title="Permanent link">#</a></h3>


  <div class="doc doc-contents ">
  </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="pam.activity.Plan.valid_end_of_day_time" class="doc doc-heading">
<code class="highlight language-python"><span class="n">valid_end_of_day_time</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#pam.activity.Plan.valid_end_of_day_time" class="headerlink" title="Permanent link">#</a></h3>


  <div class="doc doc-contents ">
  
      <p>Check that start and end time of Activities and Legs are consistent.
:return: bool</p>
  </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="pam.activity.Plan.valid_locations" class="doc doc-heading">
<code class="highlight language-python"><span class="n">valid_locations</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#pam.activity.Plan.valid_locations" class="headerlink" title="Permanent link">#</a></h3>


  <div class="doc doc-contents ">
  
      <p>Check that locations are consistent across Activities and Legs.
:return: bool</p>
  </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="pam.activity.Plan.valid_sequence" class="doc doc-heading">
<code class="highlight language-python"><span class="n">valid_sequence</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#pam.activity.Plan.valid_sequence" class="headerlink" title="Permanent link">#</a></h3>


  <div class="doc doc-contents ">
  
      <p>Check sequence of Activities and Legs.
:return: bool</p>
  </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="pam.activity.Plan.valid_start_of_day_time" class="doc doc-heading">
<code class="highlight language-python"><span class="n">valid_start_of_day_time</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#pam.activity.Plan.valid_start_of_day_time" class="headerlink" title="Permanent link">#</a></h3>


  <div class="doc doc-contents ">
  
      <p>Check that start and end time of Activities and Legs are consistent.
:return: bool</p>
  </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="pam.activity.Plan.valid_time_sequence" class="doc doc-heading">
<code class="highlight language-python"><span class="n">valid_time_sequence</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#pam.activity.Plan.valid_time_sequence" class="headerlink" title="Permanent link">#</a></h3>


  <div class="doc doc-contents ">
  
      <p>Check that start and end time of Activities and Legs are consistent.
:return: bool</p>
  </div>

</div>



<div class="doc doc-object doc-function">



<h3 id="pam.activity.Plan.activity_tours" class="doc doc-heading">
<code class="highlight language-python"><span class="n">activity_tours</span><span class="p">()</span></code>

<a href="#pam.activity.Plan.activity_tours" class="headerlink" title="Permanent link">#</a></h3>


  <div class="doc doc-contents ">

      <details class="quote">
        <summary>Source code in <code>pam/activity.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">activity_tours</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="n">tours</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">tour</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">act</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">activities</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">act</span><span class="o">.</span><span class="n">act</span> <span class="o">==</span> <span class="s1">&#39;home&#39;</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">tour</span><span class="p">:</span>
                <span class="n">tours</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">tour</span><span class="p">)</span>
            <span class="n">tour</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">tour</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">act</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">tour</span><span class="p">:</span>
        <span class="n">tours</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">tour</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">tours</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="pam.activity.Plan.add" class="doc doc-heading">
<code class="highlight language-python"><span class="n">add</span><span class="p">(</span><span class="n">p</span><span class="p">)</span></code>

<a href="#pam.activity.Plan.add" class="headerlink" title="Permanent link">#</a></h3>


  <div class="doc doc-contents ">
  
      <p>Safely add a new component to the plan.
:param p:
:return:</p>

      <details class="quote">
        <summary>Source code in <code>pam/activity.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">add</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Safely add a new component to the plan.</span>
<span class="sd">    :param p:</span>
<span class="sd">    :return:</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">p</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">p</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">c</span><span class="p">)</span>

    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">p</span><span class="p">,</span> <span class="n">Activity</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">day</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">day</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span> <span class="n">Activity</span><span class="p">):</span>  <span class="c1"># enforce act-leg-act seq</span>
            <span class="k">raise</span> <span class="n">PAMSequenceValidationError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Failed to add to plan, next component must be a Trip or Leg.&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">day</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>

    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">p</span><span class="p">,</span> <span class="n">Leg</span><span class="p">)</span> <span class="ow">or</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">p</span><span class="p">,</span> <span class="n">Trip</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">day</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">PAMSequenceValidationError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Failed to add to plan, first component must be Activity instance.&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">day</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span> <span class="n">Activity</span><span class="p">):</span>  <span class="c1"># enforce act-leg-act seq</span>
            <span class="k">raise</span> <span class="n">PAMSequenceValidationError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Failed to add to plan, next component must be Activity instance.&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">day</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>

    <span class="k">else</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">UserWarning</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Cannot add type: </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">p</span><span class="p">)</span><span class="si">}</span><span class="s2"> to plan.&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="pam.activity.Plan.autocomplete_matsim" class="doc doc-heading">
<code class="highlight language-python"><span class="n">autocomplete_matsim</span><span class="p">()</span></code>

<a href="#pam.activity.Plan.autocomplete_matsim" class="headerlink" title="Permanent link">#</a></h3>


  <div class="doc doc-contents ">
  
      <p>complete leg start and end locations</p>

      <details class="quote">
        <summary>Source code in <code>pam/activity.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">560</span>
<span class="normal">561</span>
<span class="normal">562</span>
<span class="normal">563</span>
<span class="normal">564</span>
<span class="normal">565</span>
<span class="normal">566</span>
<span class="normal">567</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">autocomplete_matsim</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    complete leg start and end locations</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">for</span> <span class="n">seq</span><span class="p">,</span> <span class="n">component</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">component</span><span class="p">,</span> <span class="n">Leg</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">day</span><span class="p">[</span><span class="n">seq</span><span class="p">]</span><span class="o">.</span><span class="n">start_location</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">day</span><span class="p">[</span><span class="n">seq</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">location</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">day</span><span class="p">[</span><span class="n">seq</span><span class="p">]</span><span class="o">.</span><span class="n">end_location</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">day</span><span class="p">[</span><span class="n">seq</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">location</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="pam.activity.Plan.change_duration" class="doc doc-heading">
<code class="highlight language-python"><span class="n">change_duration</span><span class="p">(</span><span class="n">seq</span><span class="p">,</span> <span class="n">shift_duration</span><span class="p">)</span></code>

<a href="#pam.activity.Plan.change_duration" class="headerlink" title="Permanent link">#</a></h3>


  <div class="doc doc-contents ">
  
      <p>Change the duration of a leg and shift subsequent activities/legs forward
:params int seq: leg index in self.day
:params timedelta shift_duration: the number of seconds to change the leg duration by:</p>
<p>:return: None</p>

      <details class="quote">
        <summary>Source code in <code>pam/activity.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">880</span>
<span class="normal">881</span>
<span class="normal">882</span>
<span class="normal">883</span>
<span class="normal">884</span>
<span class="normal">885</span>
<span class="normal">886</span>
<span class="normal">887</span>
<span class="normal">888</span>
<span class="normal">889</span>
<span class="normal">890</span>
<span class="normal">891</span>
<span class="normal">892</span>
<span class="normal">893</span>
<span class="normal">894</span>
<span class="normal">895</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">change_duration</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">seq</span><span class="p">,</span> <span class="n">shift_duration</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Change the duration of a leg and shift subsequent activities/legs forward</span>
<span class="sd">    :params int seq: leg index in self.day</span>
<span class="sd">    :params timedelta shift_duration: the number of seconds to change the leg duration by:</span>

<span class="sd">    :return: None</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="c1">#change leg duration</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">day</span><span class="p">[</span><span class="n">seq</span><span class="p">]</span><span class="o">.</span><span class="n">end_time</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">day</span><span class="p">[</span><span class="n">seq</span><span class="p">]</span><span class="o">.</span><span class="n">end_time</span> <span class="o">+</span> <span class="n">shift_duration</span>

    <span class="c1">#shift all subsequent legs and activities</span>
    <span class="k">for</span> <span class="n">idx</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">seq</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">day</span><span class="p">)):</span>
        <span class="n">start_time</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">day</span><span class="p">[</span><span class="n">idx</span><span class="p">]</span><span class="o">.</span><span class="n">start_time</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">day</span><span class="p">[</span><span class="n">idx</span><span class="p">]</span><span class="o">.</span><span class="n">shift_start_time</span><span class="p">(</span><span class="n">start_time</span> <span class="o">+</span> <span class="n">shift_duration</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="pam.activity.Plan.clear" class="doc doc-heading">
<code class="highlight language-python"><span class="n">clear</span><span class="p">()</span></code>

<a href="#pam.activity.Plan.clear" class="headerlink" title="Permanent link">#</a></h3>


  <div class="doc doc-contents ">

      <details class="quote">
        <summary>Source code in <code>pam/activity.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">569</span>
<span class="normal">570</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">clear</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">day</span> <span class="o">=</span> <span class="p">[]</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="pam.activity.Plan.closed_duration" class="doc doc-heading">
<code class="highlight language-python"><span class="n">closed_duration</span><span class="p">(</span><span class="n">idx</span><span class="p">)</span></code>

<a href="#pam.activity.Plan.closed_duration" class="headerlink" title="Permanent link">#</a></h3>


  <div class="doc doc-contents ">
  
      <p>Check duration of plan component at idx, if closed plan, combine first and last durations</p>

      <details class="quote">
        <summary>Source code in <code>pam/activity.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">413</span>
<span class="normal">414</span>
<span class="normal">415</span>
<span class="normal">416</span>
<span class="normal">417</span>
<span class="normal">418</span>
<span class="normal">419</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">closed_duration</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">idx</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Check duration of plan component at idx, if closed plan, combine first and last durations</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">closed</span> <span class="ow">and</span> <span class="p">(</span><span class="n">idx</span> <span class="o">==</span> <span class="mi">0</span> <span class="ow">or</span> <span class="n">idx</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">length</span> <span class="o">-</span> <span class="mi">1</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">day</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">duration</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">day</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">duration</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">day</span><span class="p">[</span><span class="n">idx</span><span class="p">]</span><span class="o">.</span><span class="n">duration</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="pam.activity.Plan.combine_matching_activities" class="doc doc-heading">
<code class="highlight language-python"><span class="n">combine_matching_activities</span><span class="p">(</span><span class="n">idx_start</span><span class="p">,</span> <span class="n">idx_end</span><span class="p">)</span></code>

<a href="#pam.activity.Plan.combine_matching_activities" class="headerlink" title="Permanent link">#</a></h3>


  <div class="doc doc-contents ">
  
      <p>Combine two given activities into same activity, remove surplus Legs
:param idx_start:
:param idx_end:
:return:</p>

      <details class="quote">
        <summary>Source code in <code>pam/activity.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">763</span>
<span class="normal">764</span>
<span class="normal">765</span>
<span class="normal">766</span>
<span class="normal">767</span>
<span class="normal">768</span>
<span class="normal">769</span>
<span class="normal">770</span>
<span class="normal">771</span>
<span class="normal">772</span>
<span class="normal">773</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">combine_matching_activities</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">idx_start</span><span class="p">,</span> <span class="n">idx_end</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Combine two given activities into same activity, remove surplus Legs</span>
<span class="sd">    :param idx_start:</span>
<span class="sd">    :param idx_end:</span>
<span class="sd">    :return:</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">day</span><span class="p">[</span><span class="n">idx_start</span><span class="p">]</span><span class="o">.</span><span class="n">end_time</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">day</span><span class="p">[</span><span class="n">idx_end</span><span class="p">]</span><span class="o">.</span><span class="n">end_time</span>  <span class="c1"># extend proceeding act</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">day</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">idx_end</span><span class="p">)</span>  <span class="c1"># remove subsequent activity</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">day</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">idx_end</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span>  <span class="c1"># remove subsequent leg</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">day</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">idx_start</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>  <span class="c1"># remove proceeding leg</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="pam.activity.Plan.combine_wrapped_activities" class="doc doc-heading">
<code class="highlight language-python"><span class="n">combine_wrapped_activities</span><span class="p">(</span><span class="n">idx_start</span><span class="p">,</span> <span class="n">idx_end</span><span class="p">)</span></code>

<a href="#pam.activity.Plan.combine_wrapped_activities" class="headerlink" title="Permanent link">#</a></h3>


  <div class="doc doc-contents ">
  
      <p>Combine two given activities that will wrap around day, remove surplus Legs
:param idx_start:
:param idx_end:
:return:</p>

      <details class="quote">
        <summary>Source code in <code>pam/activity.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">775</span>
<span class="normal">776</span>
<span class="normal">777</span>
<span class="normal">778</span>
<span class="normal">779</span>
<span class="normal">780</span>
<span class="normal">781</span>
<span class="normal">782</span>
<span class="normal">783</span>
<span class="normal">784</span>
<span class="normal">785</span>
<span class="normal">786</span>
<span class="normal">787</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">combine_wrapped_activities</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">idx_start</span><span class="p">,</span> <span class="n">idx_end</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Combine two given activities that will wrap around day, remove surplus Legs</span>
<span class="sd">    :param idx_start:</span>
<span class="sd">    :param idx_end:</span>
<span class="sd">    :return:</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># extend proceeding act to end of day</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">day</span><span class="p">[</span><span class="n">idx_start</span><span class="p">]</span><span class="o">.</span><span class="n">end_time</span> <span class="o">=</span> <span class="n">pam</span><span class="o">.</span><span class="n">variables</span><span class="o">.</span><span class="n">END_OF_DAY</span>
    <span class="c1"># extend subsequent act to start of day</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">day</span><span class="p">[</span><span class="n">idx_end</span><span class="p">]</span><span class="o">.</span><span class="n">start_time</span> <span class="o">=</span> <span class="n">pam</span><span class="o">.</span><span class="n">utils</span><span class="o">.</span><span class="n">minutes_to_datetime</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">day</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">idx_start</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>  <span class="c1"># remove proceeding leg</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">day</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">idx_end</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span>  <span class="c1"># remove subsequent leg</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="pam.activity.Plan.crop" class="doc doc-heading">
<code class="highlight language-python"><span class="n">crop</span><span class="p">()</span></code>

<a href="#pam.activity.Plan.crop" class="headerlink" title="Permanent link">#</a></h3>


  <div class="doc doc-contents ">
  
      <p>Crop a plan to end of day (END_OF_DAY). Plan components that start after this
time are removed. Activities that end after this time are trimmed. If the last component
is a Leg, this leg is removed and the previous activity extended.</p>

      <details class="quote">
        <summary>Source code in <code>pam/activity.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">363</span>
<span class="normal">364</span>
<span class="normal">365</span>
<span class="normal">366</span>
<span class="normal">367</span>
<span class="normal">368</span>
<span class="normal">369</span>
<span class="normal">370</span>
<span class="normal">371</span>
<span class="normal">372</span>
<span class="normal">373</span>
<span class="normal">374</span>
<span class="normal">375</span>
<span class="normal">376</span>
<span class="normal">377</span>
<span class="normal">378</span>
<span class="normal">379</span>
<span class="normal">380</span>
<span class="normal">381</span>
<span class="normal">382</span>
<span class="normal">383</span>
<span class="normal">384</span>
<span class="normal">385</span>
<span class="normal">386</span>
<span class="normal">387</span>
<span class="normal">388</span>
<span class="normal">389</span>
<span class="normal">390</span>
<span class="normal">391</span>
<span class="normal">392</span>
<span class="normal">393</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">crop</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Crop a plan to end of day (END_OF_DAY). Plan components that start after this</span>
<span class="sd">    time are removed. Activities that end after this time are trimmed. If the last component</span>
<span class="sd">    is a Leg, this leg is removed and the previous activity extended.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># crop plan beyond end of day</span>
    <span class="k">for</span> <span class="n">idx</span><span class="p">,</span> <span class="n">component</span> <span class="ow">in</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">reversed</span><span class="p">()):</span>
        <span class="k">if</span> <span class="n">component</span><span class="o">.</span><span class="n">start_time</span> <span class="o">&gt;</span> <span class="n">pam</span><span class="o">.</span><span class="n">variables</span><span class="o">.</span><span class="n">END_OF_DAY</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Cropping plan components&quot;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">day</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">day</span><span class="p">[:</span><span class="n">idx</span><span class="p">]</span>
            <span class="k">break</span>

    <span class="c1"># crop plan that is out of sequence</span>
    <span class="k">for</span> <span class="n">idx</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">length</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="p">[</span><span class="n">idx</span><span class="p">]</span><span class="o">.</span><span class="n">start_time</span> <span class="o">&lt;</span> <span class="bp">self</span><span class="p">[</span><span class="n">idx</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">end_time</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Cropping plan components&quot;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">day</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">day</span><span class="p">[:</span><span class="n">idx</span><span class="p">]</span>
            <span class="k">break</span>
        <span class="k">if</span> <span class="bp">self</span><span class="p">[</span><span class="n">idx</span><span class="p">]</span><span class="o">.</span><span class="n">start_time</span> <span class="o">&gt;</span> <span class="bp">self</span><span class="p">[</span><span class="n">idx</span><span class="p">]</span><span class="o">.</span><span class="n">end_time</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Cropping plan components&quot;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">day</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">day</span><span class="p">[:</span><span class="n">idx</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span>
            <span class="k">break</span>

    <span class="c1"># deal with last component</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">day</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span> <span class="n">Activity</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">day</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">end_time</span> <span class="o">=</span> <span class="n">pam</span><span class="o">.</span><span class="n">variables</span><span class="o">.</span><span class="n">END_OF_DAY</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Cropping plan ending in Leg&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">day</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">day</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">end_time</span> <span class="o">=</span> <span class="n">pam</span><span class="o">.</span><span class="n">variables</span><span class="o">.</span><span class="n">END_OF_DAY</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="pam.activity.Plan.expand" class="doc doc-heading">
<code class="highlight language-python"><span class="n">expand</span><span class="p">(</span><span class="n">pivot_idx</span><span class="p">)</span></code>

<a href="#pam.activity.Plan.expand" class="headerlink" title="Permanent link">#</a></h3>


  <div class="doc doc-contents ">
  
      <p>Fill plan by expanding a pivot activity.
:param pivot_idx: int
:return: None</p>

      <details class="quote">
        <summary>Source code in <code>pam/activity.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">723</span>
<span class="normal">724</span>
<span class="normal">725</span>
<span class="normal">726</span>
<span class="normal">727</span>
<span class="normal">728</span>
<span class="normal">729</span>
<span class="normal">730</span>
<span class="normal">731</span>
<span class="normal">732</span>
<span class="normal">733</span>
<span class="normal">734</span>
<span class="normal">735</span>
<span class="normal">736</span>
<span class="normal">737</span>
<span class="normal">738</span>
<span class="normal">739</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">expand</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pivot_idx</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Fill plan by expanding a pivot activity.</span>
<span class="sd">    :param pivot_idx: int</span>
<span class="sd">    :return: None</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># todo this isn&#39;t great - just pushes other activities to edges of day</span>

    <span class="n">new_time</span> <span class="o">=</span> <span class="n">pam</span><span class="o">.</span><span class="n">utils</span><span class="o">.</span><span class="n">minutes_to_datetime</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">seq</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">pivot_idx</span><span class="o">+</span><span class="mi">1</span><span class="p">):</span>  <span class="c1"># push forward pivot and all proceeding components</span>
        <span class="n">new_time</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">day</span><span class="p">[</span><span class="n">seq</span><span class="p">]</span><span class="o">.</span><span class="n">shift_start_time</span><span class="p">(</span><span class="n">new_time</span><span class="p">)</span>

    <span class="n">new_time</span> <span class="o">=</span> <span class="n">pam</span><span class="o">.</span><span class="n">variables</span><span class="o">.</span><span class="n">END_OF_DAY</span>
    <span class="k">for</span> <span class="n">seq</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">length</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="n">pivot_idx</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">):</span>  <span class="c1"># push back all subsequent components</span>
        <span class="n">new_time</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">day</span><span class="p">[</span><span class="n">seq</span><span class="p">]</span><span class="o">.</span><span class="n">shift_end_time</span><span class="p">(</span><span class="n">new_time</span><span class="p">)</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">day</span><span class="p">[</span><span class="n">pivot_idx</span><span class="p">]</span><span class="o">.</span><span class="n">end_time</span> <span class="o">=</span> <span class="n">new_time</span>  <span class="c1"># expand pivot</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="pam.activity.Plan.fill_plan" class="doc doc-heading">
<code class="highlight language-python"><span class="n">fill_plan</span><span class="p">(</span><span class="n">idx_start</span><span class="p">,</span> <span class="n">idx_end</span><span class="p">,</span> <span class="n">default</span> <span class="o">=</span> <span class="s1">&#39;home&#39;</span><span class="p">)</span></code>

<a href="#pam.activity.Plan.fill_plan" class="headerlink" title="Permanent link">#</a></h3>


  <div class="doc doc-contents ">
  
      <p>Fill a plan after Activity has been removed. Plan is filled between given remaining
activity locations (idx_start and idx_end). Note that the plan will also have legs that
need to be removed.
:param idx_start: location of previous Activity
:param idx_end: location of subsequent Activity
:param default: Not Used
:return: True</p>

      <details class="quote">
        <summary>Source code in <code>pam/activity.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">647</span>
<span class="normal">648</span>
<span class="normal">649</span>
<span class="normal">650</span>
<span class="normal">651</span>
<span class="normal">652</span>
<span class="normal">653</span>
<span class="normal">654</span>
<span class="normal">655</span>
<span class="normal">656</span>
<span class="normal">657</span>
<span class="normal">658</span>
<span class="normal">659</span>
<span class="normal">660</span>
<span class="normal">661</span>
<span class="normal">662</span>
<span class="normal">663</span>
<span class="normal">664</span>
<span class="normal">665</span>
<span class="normal">666</span>
<span class="normal">667</span>
<span class="normal">668</span>
<span class="normal">669</span>
<span class="normal">670</span>
<span class="normal">671</span>
<span class="normal">672</span>
<span class="normal">673</span>
<span class="normal">674</span>
<span class="normal">675</span>
<span class="normal">676</span>
<span class="normal">677</span>
<span class="normal">678</span>
<span class="normal">679</span>
<span class="normal">680</span>
<span class="normal">681</span>
<span class="normal">682</span>
<span class="normal">683</span>
<span class="normal">684</span>
<span class="normal">685</span>
<span class="normal">686</span>
<span class="normal">687</span>
<span class="normal">688</span>
<span class="normal">689</span>
<span class="normal">690</span>
<span class="normal">691</span>
<span class="normal">692</span>
<span class="normal">693</span>
<span class="normal">694</span>
<span class="normal">695</span>
<span class="normal">696</span>
<span class="normal">697</span>
<span class="normal">698</span>
<span class="normal">699</span>
<span class="normal">700</span>
<span class="normal">701</span>
<span class="normal">702</span>
<span class="normal">703</span>
<span class="normal">704</span>
<span class="normal">705</span>
<span class="normal">706</span>
<span class="normal">707</span>
<span class="normal">708</span>
<span class="normal">709</span>
<span class="normal">710</span>
<span class="normal">711</span>
<span class="normal">712</span>
<span class="normal">713</span>
<span class="normal">714</span>
<span class="normal">715</span>
<span class="normal">716</span>
<span class="normal">717</span>
<span class="normal">718</span>
<span class="normal">719</span>
<span class="normal">720</span>
<span class="normal">721</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">fill_plan</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">idx_start</span><span class="p">,</span> <span class="n">idx_end</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="s1">&#39;home&#39;</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Fill a plan after Activity has been removed. Plan is filled between given remaining</span>
<span class="sd">    activity locations (idx_start and idx_end). Note that the plan will also have legs that</span>
<span class="sd">    need to be removed.</span>
<span class="sd">    :param idx_start: location of previous Activity</span>
<span class="sd">    :param idx_end: location of subsequent Activity</span>
<span class="sd">    :param default: Not Used</span>
<span class="sd">    :return: True</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot; fill_plan, </span><span class="si">{</span><span class="n">idx_start</span><span class="si">}</span><span class="s2">-&gt;</span><span class="si">{</span><span class="n">idx_end</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">idx_start</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">idx_end</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>  <span class="c1"># Assume stay at home</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">stay_at_home</span><span class="p">()</span>
        <span class="k">return</span> <span class="kc">True</span>

    <span class="k">if</span> <span class="n">idx_start</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>  <span class="c1"># start of day non wrapping</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">day</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">expand</span><span class="p">(</span><span class="n">idx_end</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span>  <span class="c1"># shifted because we popped index 0</span>
        <span class="k">return</span> <span class="kc">True</span>

    <span class="k">if</span> <span class="n">idx_end</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>  <span class="c1"># end of day non wrapping</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">day</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">expand</span><span class="p">(</span><span class="n">idx_start</span><span class="p">)</span>
        <span class="k">return</span> <span class="kc">True</span>

    <span class="k">if</span> <span class="n">idx_start</span> <span class="o">==</span> <span class="n">idx_end</span><span class="p">:</span>  <span class="c1"># this is a single remaining activity -&gt; stay at home</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">position_of</span><span class="p">(</span><span class="n">target</span><span class="o">=</span><span class="s1">&#39;home&#39;</span><span class="p">)</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                <span class="s2">&quot;Require home activity&quot;</span>
            <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">stay_at_home</span><span class="p">()</span>
        <span class="k">return</span> <span class="kc">True</span>

    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">day</span><span class="p">[</span><span class="n">idx_start</span><span class="p">]</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">day</span><span class="p">[</span><span class="n">idx_end</span><span class="p">]:</span>  <span class="c1"># combine activities</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        These activities are the same (based on type and location), so can be combined,</span>
<span class="sd">        but there are 2 sub cases:</span>
<span class="sd">        i) idx_start &lt; idx_end -&gt; wrapped combine</span>
<span class="sd">        ii) else -&gt; regular combine can ignore wrapping</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="n">idx_end</span> <span class="o">&lt;</span> <span class="n">idx_start</span><span class="p">:</span>  <span class="c1"># this is a wrapped activity --&gt; close it</span>
            <span class="c1"># todo probably don&#39;t need to pass the idx - know that it must be first and last</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">combine_wrapped_activities</span><span class="p">(</span><span class="n">idx_start</span><span class="p">,</span> <span class="n">idx_end</span><span class="p">)</span>
            <span class="k">return</span> <span class="kc">True</span>

        <span class="c1"># this is a regular non wrapped mid plan activity -&gt; combine acts</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">combine_matching_activities</span><span class="p">(</span><span class="n">idx_start</span><span class="p">,</span> <span class="n">idx_end</span><span class="p">)</span>
        <span class="k">return</span> <span class="kc">True</span>

<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Remaining are plans where the activities are different so fill not be combined, instread</span>
<span class="sd">    we will use &#39;expand&#39; to refill the plan. There are 2 sub cases:</span>
<span class="sd">    i) idx_start &lt; idx_end -&gt; wrapped combine</span>
<span class="sd">    ii) else -&gt; regular combine can ignore wrapping</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">if</span> <span class="n">idx_end</span> <span class="o">&lt;</span> <span class="n">idx_start</span><span class="p">:</span>  <span class="c1"># this is a wrapped activity --&gt; close it</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">day</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>  <span class="c1"># remove start leg</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">day</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>  <span class="c1"># remove end leg</span>

        <span class="n">pivot_idx</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">position_of</span><span class="p">(</span><span class="n">target</span><span class="o">=</span><span class="s1">&#39;home&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">pivot_idx</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Unable to find home activity, changing plan to stay at home&quot;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">stay_at_home</span><span class="p">()</span>
            <span class="k">return</span> <span class="kc">True</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">expand</span><span class="p">(</span><span class="n">pivot_idx</span><span class="p">)</span>
        <span class="k">return</span> <span class="kc">True</span>

    <span class="c1"># need to change first leg for new destination</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">join_activities</span><span class="p">(</span><span class="n">idx_start</span><span class="p">,</span> <span class="n">idx_end</span><span class="p">)</span>
    <span class="k">return</span> <span class="kc">True</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="pam.activity.Plan.finalise_activity_end_times" class="doc doc-heading">
<code class="highlight language-python"><span class="n">finalise_activity_end_times</span><span class="p">()</span></code>

<a href="#pam.activity.Plan.finalise_activity_end_times" class="headerlink" title="Permanent link">#</a></h3>


  <div class="doc doc-contents ">
  
      <p>Add activity end times based on start time of next activity.</p>

      <details class="quote">
        <summary>Source code in <code>pam/activity.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">538</span>
<span class="normal">539</span>
<span class="normal">540</span>
<span class="normal">541</span>
<span class="normal">542</span>
<span class="normal">543</span>
<span class="normal">544</span>
<span class="normal">545</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">finalise_activity_end_times</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Add activity end times based on start time of next activity.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">day</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">seq</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">day</span><span class="p">)</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">):</span>  <span class="c1"># activities excluding last one</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">day</span><span class="p">[</span><span class="n">seq</span><span class="p">]</span><span class="o">.</span><span class="n">end_time</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">day</span><span class="p">[</span><span class="n">seq</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">start_time</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">day</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">end_time</span> <span class="o">=</span> <span class="n">pam</span><span class="o">.</span><span class="n">variables</span><span class="o">.</span><span class="n">END_OF_DAY</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="pam.activity.Plan.fix" class="doc doc-heading">
<code class="highlight language-python"><span class="n">fix</span><span class="p">(</span><span class="n">crop</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="n">times</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="n">locations</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span></code>

<a href="#pam.activity.Plan.fix" class="headerlink" title="Permanent link">#</a></h3>


  <div class="doc doc-contents ">

      <details class="quote">
        <summary>Source code in <code>pam/activity.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">355</span>
<span class="normal">356</span>
<span class="normal">357</span>
<span class="normal">358</span>
<span class="normal">359</span>
<span class="normal">360</span>
<span class="normal">361</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">fix</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">crop</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">times</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">locations</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">crop</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">crop</span><span class="p">()</span>
    <span class="k">if</span> <span class="n">times</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fix_time_consistency</span><span class="p">()</span>
    <span class="k">if</span> <span class="n">locations</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fix_location_consistency</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="pam.activity.Plan.fix_location_consistency" class="doc doc-heading">
<code class="highlight language-python"><span class="n">fix_location_consistency</span><span class="p">()</span></code>

<a href="#pam.activity.Plan.fix_location_consistency" class="headerlink" title="Permanent link">#</a></h3>


  <div class="doc doc-contents ">
  
      <p>Force plan locations consistency by adjusting leg locations.</p>

      <details class="quote">
        <summary>Source code in <code>pam/activity.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">402</span>
<span class="normal">403</span>
<span class="normal">404</span>
<span class="normal">405</span>
<span class="normal">406</span>
<span class="normal">407</span>
<span class="normal">408</span>
<span class="normal">409</span>
<span class="normal">410</span>
<span class="normal">411</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">fix_location_consistency</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Force plan locations consistency by adjusting leg locations.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">length</span><span class="o">-</span><span class="mi">1</span><span class="p">):</span>
        <span class="n">component</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">day</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">component</span><span class="p">,</span> <span class="n">Leg</span><span class="p">):</span>
            <span class="n">component</span><span class="o">.</span><span class="n">start_location</span> <span class="o">=</span> <span class="n">copy</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">day</span><span class="p">[</span><span class="n">i</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">location</span><span class="p">)</span>
            <span class="n">component</span><span class="o">.</span><span class="n">end_location</span> <span class="o">=</span> <span class="n">copy</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">day</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">location</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="pam.activity.Plan.fix_time_consistency" class="doc doc-heading">
<code class="highlight language-python"><span class="n">fix_time_consistency</span><span class="p">()</span></code>

<a href="#pam.activity.Plan.fix_time_consistency" class="headerlink" title="Permanent link">#</a></h3>


  <div class="doc doc-contents ">
  
      <p>Force plan component time consistency.</p>

      <details class="quote">
        <summary>Source code in <code>pam/activity.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">395</span>
<span class="normal">396</span>
<span class="normal">397</span>
<span class="normal">398</span>
<span class="normal">399</span>
<span class="normal">400</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">fix_time_consistency</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Force plan component time consistency.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">length</span> <span class="o">-</span> <span class="mi">1</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">day</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">start_time</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">day</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">end_time</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="pam.activity.Plan.get" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get</span><span class="p">(</span><span class="n">idx</span><span class="p">,</span> <span class="n">default</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span></code>

<a href="#pam.activity.Plan.get" class="headerlink" title="Permanent link">#</a></h3>


  <div class="doc doc-contents ">

      <details class="quote">
        <summary>Source code in <code>pam/activity.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">get</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">idx</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="k">if</span> <span class="o">-</span><span class="bp">self</span><span class="o">.</span><span class="n">length</span> <span class="o">&lt;=</span> <span class="n">idx</span> <span class="o">&lt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">length</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">day</span><span class="p">[</span><span class="n">idx</span><span class="p">]</span>
    <span class="k">return</span> <span class="n">default</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="pam.activity.Plan.get_home_duration" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_home_duration</span><span class="p">()</span></code>

<a href="#pam.activity.Plan.get_home_duration" class="headerlink" title="Permanent link">#</a></h3>


  <div class="doc doc-contents ">
  
      <p>Get the total duration of home activities.</p>

      <details class="quote">
        <summary>Source code in <code>pam/activity.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">823</span>
<span class="normal">824</span>
<span class="normal">825</span>
<span class="normal">826</span>
<span class="normal">827</span>
<span class="normal">828</span>
<span class="normal">829</span>
<span class="normal">830</span>
<span class="normal">831</span>
<span class="normal">832</span>
<span class="normal">833</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">get_home_duration</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Get the total duration of home activities.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1">#total time spent at home</span>
    <span class="n">home_duration</span> <span class="o">=</span> <span class="n">timedelta</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">plan</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">day</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">plan</span><span class="o">.</span><span class="n">act</span><span class="o">==</span><span class="s1">&#39;home&#39;</span><span class="p">:</span>
            <span class="n">home_duration</span><span class="o">+=</span><span class="n">plan</span><span class="o">.</span><span class="n">duration</span>

    <span class="k">return</span> <span class="n">home_duration</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="pam.activity.Plan.get_leg_tour" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_leg_tour</span><span class="p">(</span><span class="n">seq</span><span class="p">)</span></code>

<a href="#pam.activity.Plan.get_leg_tour" class="headerlink" title="Permanent link">#</a></h3>


  <div class="doc doc-contents ">
  
      <p>Get the tour of a leg
:params int seq: plan sequence. Must be a leg sequence.</p>
<p>:return: a list of activities in a tour</p>

      <details class="quote">
        <summary>Source code in <code>pam/activity.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">898</span>
<span class="normal">899</span>
<span class="normal">900</span>
<span class="normal">901</span>
<span class="normal">902</span>
<span class="normal">903</span>
<span class="normal">904</span>
<span class="normal">905</span>
<span class="normal">906</span>
<span class="normal">907</span>
<span class="normal">908</span>
<span class="normal">909</span>
<span class="normal">910</span>
<span class="normal">911</span>
<span class="normal">912</span>
<span class="normal">913</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">get_leg_tour</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">seq</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Get the tour of a leg</span>
<span class="sd">    :params int seq: plan sequence. Must be a leg sequence.</span>

<span class="sd">    :return: a list of activities in a tour</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">day</span><span class="p">[</span><span class="n">seq</span><span class="p">],</span> <span class="n">Leg</span><span class="p">)</span>

    <span class="n">act_from</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">day</span><span class="p">[</span><span class="n">seq</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
    <span class="n">act_to</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">day</span><span class="p">[</span><span class="n">seq</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span>

    <span class="k">for</span> <span class="n">tour</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">activity_tours</span><span class="p">():</span>
        <span class="k">for</span> <span class="n">tour_act</span> <span class="ow">in</span> <span class="n">tour</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">act_from</span><span class="o">.</span><span class="n">is_exact</span><span class="p">(</span><span class="n">tour_act</span><span class="p">)</span> <span class="ow">or</span> <span class="n">act_to</span><span class="o">.</span><span class="n">is_exact</span><span class="p">(</span><span class="n">tour_act</span><span class="p">):</span>
                <span class="k">return</span> <span class="n">tour</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="pam.activity.Plan.infer_activities_from_tour_purpose" class="doc doc-heading">
<code class="highlight language-python"><span class="n">infer_activities_from_tour_purpose</span><span class="p">()</span></code>

<a href="#pam.activity.Plan.infer_activities_from_tour_purpose" class="headerlink" title="Permanent link">#</a></h3>


  <div class="doc doc-contents ">
  
      <p>Infer and set activity types based on trip purpose. Algorithm works like breadth first search,
initiated from inferred home locations. Search takes place in two stages, first pass forward,
the backward. The next activity type is set based on the trip purpose. Pass forward is exhausted
first, because it's assumed that this is how the diary is originally filled in.</p>

      <details class="quote">
        <summary>Source code in <code>pam/activity.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">452</span>
<span class="normal">453</span>
<span class="normal">454</span>
<span class="normal">455</span>
<span class="normal">456</span>
<span class="normal">457</span>
<span class="normal">458</span>
<span class="normal">459</span>
<span class="normal">460</span>
<span class="normal">461</span>
<span class="normal">462</span>
<span class="normal">463</span>
<span class="normal">464</span>
<span class="normal">465</span>
<span class="normal">466</span>
<span class="normal">467</span>
<span class="normal">468</span>
<span class="normal">469</span>
<span class="normal">470</span>
<span class="normal">471</span>
<span class="normal">472</span>
<span class="normal">473</span>
<span class="normal">474</span>
<span class="normal">475</span>
<span class="normal">476</span>
<span class="normal">477</span>
<span class="normal">478</span>
<span class="normal">479</span>
<span class="normal">480</span>
<span class="normal">481</span>
<span class="normal">482</span>
<span class="normal">483</span>
<span class="normal">484</span>
<span class="normal">485</span>
<span class="normal">486</span>
<span class="normal">487</span>
<span class="normal">488</span>
<span class="normal">489</span>
<span class="normal">490</span>
<span class="normal">491</span>
<span class="normal">492</span>
<span class="normal">493</span>
<span class="normal">494</span>
<span class="normal">495</span>
<span class="normal">496</span>
<span class="normal">497</span>
<span class="normal">498</span>
<span class="normal">499</span>
<span class="normal">500</span>
<span class="normal">501</span>
<span class="normal">502</span>
<span class="normal">503</span>
<span class="normal">504</span>
<span class="normal">505</span>
<span class="normal">506</span>
<span class="normal">507</span>
<span class="normal">508</span>
<span class="normal">509</span>
<span class="normal">510</span>
<span class="normal">511</span>
<span class="normal">512</span>
<span class="normal">513</span>
<span class="normal">514</span>
<span class="normal">515</span>
<span class="normal">516</span>
<span class="normal">517</span>
<span class="normal">518</span>
<span class="normal">519</span>
<span class="normal">520</span>
<span class="normal">521</span>
<span class="normal">522</span>
<span class="normal">523</span>
<span class="normal">524</span>
<span class="normal">525</span>
<span class="normal">526</span>
<span class="normal">527</span>
<span class="normal">528</span>
<span class="normal">529</span>
<span class="normal">530</span>
<span class="normal">531</span>
<span class="normal">532</span>
<span class="normal">533</span>
<span class="normal">534</span>
<span class="normal">535</span>
<span class="normal">536</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">infer_activities_from_tour_purpose</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Infer and set activity types based on trip purpose. Algorithm works like breadth first search,</span>
<span class="sd">    initiated from inferred home locations. Search takes place in two stages, first pass forward,</span>
<span class="sd">    the backward. The next activity type is set based on the trip purpose. Pass forward is exhausted</span>
<span class="sd">    first, because it&#39;s assumed that this is how the diary is originally filled in.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1">#find home activities</span>
    <span class="n">home_idxs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">infer_activity_idxs</span><span class="p">(</span><span class="n">target</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">home</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">idx</span> <span class="ow">in</span> <span class="n">home_idxs</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">day</span><span class="p">[</span><span class="n">idx</span><span class="p">]</span><span class="o">.</span><span class="n">act</span> <span class="o">=</span> <span class="s1">&#39;home&#39;</span>

    <span class="n">area_map</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="n">remaining</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">length</span><span class="p">,</span> <span class="mi">2</span><span class="p">))</span> <span class="o">-</span> <span class="nb">set</span><span class="p">(</span><span class="n">home_idxs</span><span class="p">)</span>

    <span class="c1"># forward traverse</span>
    <span class="n">queue</span> <span class="o">=</span> <span class="p">[</span><span class="n">idx</span><span class="o">+</span><span class="mi">2</span> <span class="k">for</span> <span class="n">idx</span> <span class="ow">in</span> <span class="n">home_idxs</span> <span class="k">if</span> <span class="n">idx</span><span class="o">+</span><span class="mi">2</span> <span class="o">&lt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">length</span><span class="p">]</span>  <span class="c1"># add next act idxs to queue\</span>
    <span class="n">last_act</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="k">while</span> <span class="n">queue</span><span class="p">:</span>  <span class="c1"># traverse from home</span>
        <span class="n">idx</span> <span class="o">=</span> <span class="n">queue</span><span class="o">.</span><span class="n">pop</span><span class="p">()</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">day</span><span class="p">[</span><span class="n">idx</span><span class="p">]</span><span class="o">.</span><span class="n">act</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">act</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">day</span><span class="p">[</span><span class="n">idx</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">purp</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
            <span class="n">location</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">day</span><span class="p">[</span><span class="n">idx</span><span class="p">]</span><span class="o">.</span><span class="n">location</span><span class="o">.</span><span class="n">min</span><span class="p">)</span>

            <span class="k">if</span> <span class="n">act</span> <span class="o">==</span> <span class="n">last_act</span> <span class="ow">and</span> <span class="n">location</span> <span class="ow">in</span> <span class="n">area_map</span><span class="p">:</span>
                <span class="n">act</span> <span class="o">=</span> <span class="n">area_map</span><span class="p">[</span><span class="n">location</span><span class="p">]</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">day</span><span class="p">[</span><span class="n">idx</span><span class="p">]</span><span class="o">.</span><span class="n">act</span> <span class="o">=</span> <span class="n">act</span>
            <span class="n">remaining</span> <span class="o">-=</span> <span class="p">{</span><span class="n">idx</span><span class="p">}</span>
            <span class="n">last_act</span> <span class="o">=</span> <span class="n">act</span>
            <span class="n">area_map</span><span class="p">[</span><span class="n">location</span><span class="p">]</span> <span class="o">=</span> <span class="n">act</span>

            <span class="k">if</span> <span class="n">idx</span><span class="o">+</span><span class="mi">2</span> <span class="ow">in</span> <span class="n">remaining</span><span class="p">:</span>
                <span class="n">queue</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">idx</span><span class="o">+</span><span class="mi">2</span><span class="p">)</span>

    <span class="n">queue</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">location</span><span class="p">,</span> <span class="n">activity</span> <span class="ow">in</span> <span class="n">area_map</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="n">candidates</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">infer_activity_idxs</span><span class="p">(</span><span class="n">target</span><span class="o">=</span><span class="n">Location</span><span class="p">(</span><span class="n">area</span><span class="o">=</span><span class="n">location</span><span class="p">),</span> <span class="n">default</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">idx</span> <span class="ow">in</span> <span class="n">candidates</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">idx</span> <span class="ow">in</span> <span class="n">remaining</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">day</span><span class="p">[</span><span class="n">idx</span><span class="p">]</span><span class="o">.</span><span class="n">act</span> <span class="o">=</span> <span class="n">activity</span>
                <span class="n">remaining</span> <span class="o">-=</span> <span class="p">{</span><span class="n">idx</span><span class="p">}</span>
                <span class="k">if</span> <span class="n">idx</span><span class="o">+</span><span class="mi">2</span> <span class="ow">in</span> <span class="n">remaining</span><span class="p">:</span>
                    <span class="n">queue</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">idx</span><span class="o">+</span><span class="mi">2</span><span class="p">)</span>

    <span class="k">while</span> <span class="n">queue</span><span class="p">:</span>
        <span class="n">idx</span> <span class="o">=</span> <span class="n">queue</span><span class="o">.</span><span class="n">pop</span><span class="p">()</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">day</span><span class="p">[</span><span class="n">idx</span><span class="p">]</span><span class="o">.</span><span class="n">act</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">act</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">day</span><span class="p">[</span><span class="n">idx</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">purp</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
            <span class="n">location</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">day</span><span class="p">[</span><span class="n">idx</span><span class="p">]</span><span class="o">.</span><span class="n">location</span><span class="o">.</span><span class="n">min</span>

            <span class="k">if</span> <span class="n">act</span> <span class="o">==</span> <span class="n">last_act</span> <span class="ow">and</span> <span class="n">location</span> <span class="ow">in</span> <span class="n">area_map</span><span class="p">:</span>
                <span class="n">act</span> <span class="o">=</span> <span class="n">area_map</span><span class="p">[</span><span class="n">location</span><span class="p">]</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">day</span><span class="p">[</span><span class="n">idx</span><span class="p">]</span><span class="o">.</span><span class="n">act</span> <span class="o">=</span> <span class="n">act</span>
            <span class="n">remaining</span> <span class="o">-=</span> <span class="p">{</span><span class="n">idx</span><span class="p">}</span>
            <span class="n">last_act</span> <span class="o">=</span> <span class="n">act</span>
            <span class="n">area_map</span><span class="p">[</span><span class="n">location</span><span class="p">]</span> <span class="o">=</span> <span class="n">act</span>

            <span class="k">if</span> <span class="n">idx</span><span class="o">+</span><span class="mi">2</span> <span class="o">&lt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">length</span><span class="p">:</span>
                <span class="n">queue</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">idx</span><span class="o">+</span><span class="mi">2</span><span class="p">)</span>

    <span class="c1"># backward traverse</span>
    <span class="n">queue</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">remaining</span><span class="p">)</span>  <span class="c1"># add next act idxs to queue</span>

    <span class="k">while</span> <span class="n">queue</span><span class="p">:</span>  <span class="c1"># traverse from home</span>
        <span class="n">idx</span> <span class="o">=</span> <span class="n">queue</span><span class="o">.</span><span class="n">pop</span><span class="p">()</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">day</span><span class="p">[</span><span class="n">idx</span><span class="p">]</span><span class="o">.</span><span class="n">act</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">act</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">day</span><span class="p">[</span><span class="n">idx</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">purp</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
            <span class="n">location</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">day</span><span class="p">[</span><span class="n">idx</span><span class="p">]</span><span class="o">.</span><span class="n">location</span><span class="o">.</span><span class="n">min</span>

            <span class="k">if</span> <span class="n">act</span> <span class="o">==</span> <span class="n">last_act</span> <span class="ow">and</span> <span class="n">location</span> <span class="ow">in</span> <span class="n">area_map</span><span class="p">:</span>
                <span class="n">act</span> <span class="o">=</span> <span class="n">area_map</span><span class="p">[</span><span class="n">location</span><span class="p">]</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">day</span><span class="p">[</span><span class="n">idx</span><span class="p">]</span><span class="o">.</span><span class="n">act</span> <span class="o">=</span> <span class="n">act</span>
            <span class="n">remaining</span> <span class="o">-=</span> <span class="p">{</span><span class="n">idx</span><span class="p">}</span>
            <span class="n">last_act</span> <span class="o">=</span> <span class="n">act</span>
            <span class="n">area_map</span><span class="p">[</span><span class="n">location</span><span class="p">]</span> <span class="o">=</span> <span class="n">act</span>

            <span class="k">if</span> <span class="n">idx</span><span class="o">-</span><span class="mi">2</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">queue</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">idx</span><span class="o">-</span><span class="mi">2</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="pam.activity.Plan.infer_activity_idxs" class="doc doc-heading">
<code class="highlight language-python"><span class="n">infer_activity_idxs</span><span class="p">(</span><span class="n">target</span><span class="p">,</span> <span class="n">default</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span></code>

<a href="#pam.activity.Plan.infer_activity_idxs" class="headerlink" title="Permanent link">#</a></h3>


  <div class="doc doc-contents ">
  
      <p>Infer idxs of home activity based on location. First pass looks to exclude other acts at home
location, second pass looks adds home idxs.
If a leg is found to start and end at the home location then the one with maximum duration
is included.</p>

      <details class="quote">
        <summary>Source code in <code>pam/activity.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">421</span>
<span class="normal">422</span>
<span class="normal">423</span>
<span class="normal">424</span>
<span class="normal">425</span>
<span class="normal">426</span>
<span class="normal">427</span>
<span class="normal">428</span>
<span class="normal">429</span>
<span class="normal">430</span>
<span class="normal">431</span>
<span class="normal">432</span>
<span class="normal">433</span>
<span class="normal">434</span>
<span class="normal">435</span>
<span class="normal">436</span>
<span class="normal">437</span>
<span class="normal">438</span>
<span class="normal">439</span>
<span class="normal">440</span>
<span class="normal">441</span>
<span class="normal">442</span>
<span class="normal">443</span>
<span class="normal">444</span>
<span class="normal">445</span>
<span class="normal">446</span>
<span class="normal">447</span>
<span class="normal">448</span>
<span class="normal">449</span>
<span class="normal">450</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">infer_activity_idxs</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">target</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Infer idxs of home activity based on location. First pass looks to exclude other acts at home</span>
<span class="sd">    location, second pass looks adds home idxs.</span>
<span class="sd">    If a leg is found to start and end at the home location then the one with maximum duration</span>
<span class="sd">    is included.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># todo untested for more than three possible home activities in a row.</span>
    <span class="n">candidates</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
    <span class="n">exclude</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>

    <span class="k">for</span> <span class="n">idx</span><span class="p">,</span> <span class="n">leg</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">legs</span><span class="p">):</span>
        <span class="n">prev_act_idx</span> <span class="o">=</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">idx</span>
        <span class="n">next_act_idx</span> <span class="o">=</span> <span class="n">prev_act_idx</span> <span class="o">+</span> <span class="mi">2</span>
        <span class="k">if</span> <span class="n">leg</span><span class="o">.</span><span class="n">start_location</span> <span class="o">==</span> <span class="n">leg</span><span class="o">.</span><span class="n">end_location</span> <span class="o">==</span> <span class="n">target</span><span class="p">:</span>  <span class="c1"># check for larger duration</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">closed_duration</span><span class="p">(</span><span class="n">prev_act_idx</span><span class="p">)</span> <span class="o">&gt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">closed_duration</span><span class="p">(</span><span class="n">next_act_idx</span><span class="p">):</span>
                <span class="n">exclude</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">next_act_idx</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">exclude</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">prev_act_idx</span><span class="p">)</span>

    <span class="k">for</span> <span class="n">idx</span><span class="p">,</span> <span class="n">act</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">activities</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">act</span><span class="o">.</span><span class="n">location</span> <span class="o">==</span> <span class="n">target</span> <span class="ow">and</span> <span class="p">(</span><span class="n">idx</span><span class="o">*</span><span class="mi">2</span><span class="p">)</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">exclude</span><span class="p">:</span>
            <span class="n">candidates</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">idx</span><span class="o">*</span><span class="mi">2</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">default</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">candidates</span><span class="p">:</span>  <span class="c1"># assume first activity (and last if closed)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">closed</span><span class="p">:</span>
            <span class="k">return</span> <span class="nb">set</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">length</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>
        <span class="k">return</span> <span class="nb">set</span><span class="p">([</span><span class="mi">0</span><span class="p">])</span>

    <span class="k">return</span> <span class="n">candidates</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="pam.activity.Plan.join_activities" class="doc doc-heading">
<code class="highlight language-python"><span class="n">join_activities</span><span class="p">(</span><span class="n">idx_start</span><span class="p">,</span> <span class="n">idx_end</span><span class="p">)</span></code>

<a href="#pam.activity.Plan.join_activities" class="headerlink" title="Permanent link">#</a></h3>


  <div class="doc doc-contents ">
  
      <p>Join together two Activities with new Leg, expand last home activity.
:param idx_start:
:param idx_end:
:return:</p>

      <details class="quote">
        <summary>Source code in <code>pam/activity.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">741</span>
<span class="normal">742</span>
<span class="normal">743</span>
<span class="normal">744</span>
<span class="normal">745</span>
<span class="normal">746</span>
<span class="normal">747</span>
<span class="normal">748</span>
<span class="normal">749</span>
<span class="normal">750</span>
<span class="normal">751</span>
<span class="normal">752</span>
<span class="normal">753</span>
<span class="normal">754</span>
<span class="normal">755</span>
<span class="normal">756</span>
<span class="normal">757</span>
<span class="normal">758</span>
<span class="normal">759</span>
<span class="normal">760</span>
<span class="normal">761</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">join_activities</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">idx_start</span><span class="p">,</span> <span class="n">idx_end</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Join together two Activities with new Leg, expand last home activity.</span>
<span class="sd">    :param idx_start:</span>
<span class="sd">    :param idx_end:</span>
<span class="sd">    :return:</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">day</span><span class="p">[</span><span class="n">idx_start</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">end_location</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">day</span><span class="p">[</span><span class="n">idx_end</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">end_location</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">day</span><span class="p">[</span><span class="n">idx_start</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">purp</span><span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">day</span><span class="p">[</span><span class="n">idx_end</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">purp</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">day</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">idx_end</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span>  <span class="c1"># remove second leg</span>

    <span class="c1"># todo add logic to change mode and time of leg</span>

    <span class="c1"># press plans away from pivoting activity</span>
    <span class="n">pivot_idx</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">position_of</span><span class="p">(</span><span class="n">target</span><span class="o">=</span><span class="s1">&#39;home&#39;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">pivot_idx</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Unable to find home activity, changing plan to stay at home&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">stay_at_home</span><span class="p">()</span>
        <span class="k">return</span> <span class="kc">None</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">expand</span><span class="p">(</span><span class="n">pivot_idx</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="pam.activity.Plan.mode_shift" class="doc doc-heading">
<code class="highlight language-python"><span class="n">mode_shift</span><span class="p">(</span><span class="n">seq</span><span class="p">,</span> <span class="n">new_mode</span> <span class="o">=</span> <span class="s1">&#39;walk&#39;</span><span class="p">,</span> <span class="n">mode_speed</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;car&#39;</span><span class="p">:</span> <span class="mi">37</span><span class="p">,</span> <span class="s1">&#39;bus&#39;</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span> <span class="s1">&#39;walk&#39;</span><span class="p">:</span> <span class="mi">4</span><span class="p">,</span> <span class="s1">&#39;cycle&#39;</span><span class="p">:</span> <span class="mi">14</span><span class="p">,</span> <span class="s1">&#39;pt&#39;</span><span class="p">:</span> <span class="mi">23</span><span class="p">,</span> <span class="s1">&#39;rail&#39;</span><span class="p">:</span> <span class="mi">37</span><span class="p">},</span> <span class="n">update_duration</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span></code>

<a href="#pam.activity.Plan.mode_shift" class="headerlink" title="Permanent link">#</a></h3>


  <div class="doc doc-contents ">
  
      <p>Changes mode for a leg, along with any legs in the same tour.
Leg durations are adjusted to mode speed, and home activity durations revisited to fit within the 24-hr plan.
Default speed values are from National Travel Survey data (NTS0303)</p>
<p>:params int seq: leg index in self.day
:params string new_mode: default mode shift
:params dict mode_speed: a dictionary of average mode speeds (kph)
:params bool update_duration: whether to update leg durations based on mode speed</p>
<p>:return: None</p>

      <details class="quote">
        <summary>Source code in <code>pam/activity.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">835</span>
<span class="normal">836</span>
<span class="normal">837</span>
<span class="normal">838</span>
<span class="normal">839</span>
<span class="normal">840</span>
<span class="normal">841</span>
<span class="normal">842</span>
<span class="normal">843</span>
<span class="normal">844</span>
<span class="normal">845</span>
<span class="normal">846</span>
<span class="normal">847</span>
<span class="normal">848</span>
<span class="normal">849</span>
<span class="normal">850</span>
<span class="normal">851</span>
<span class="normal">852</span>
<span class="normal">853</span>
<span class="normal">854</span>
<span class="normal">855</span>
<span class="normal">856</span>
<span class="normal">857</span>
<span class="normal">858</span>
<span class="normal">859</span>
<span class="normal">860</span>
<span class="normal">861</span>
<span class="normal">862</span>
<span class="normal">863</span>
<span class="normal">864</span>
<span class="normal">865</span>
<span class="normal">866</span>
<span class="normal">867</span>
<span class="normal">868</span>
<span class="normal">869</span>
<span class="normal">870</span>
<span class="normal">871</span>
<span class="normal">872</span>
<span class="normal">873</span>
<span class="normal">874</span>
<span class="normal">875</span>
<span class="normal">876</span>
<span class="normal">877</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">mode_shift</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">seq</span><span class="p">,</span> <span class="n">new_mode</span><span class="o">=</span><span class="s1">&#39;walk&#39;</span><span class="p">,</span> <span class="n">mode_speed</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;car&#39;</span><span class="p">:</span><span class="mi">37</span><span class="p">,</span> <span class="s1">&#39;bus&#39;</span><span class="p">:</span><span class="mi">10</span><span class="p">,</span> <span class="s1">&#39;walk&#39;</span><span class="p">:</span><span class="mi">4</span><span class="p">,</span> <span class="s1">&#39;cycle&#39;</span><span class="p">:</span> <span class="mi">14</span><span class="p">,</span> <span class="s1">&#39;pt&#39;</span><span class="p">:</span><span class="mi">23</span><span class="p">,</span> <span class="s1">&#39;rail&#39;</span><span class="p">:</span><span class="mi">37</span><span class="p">},</span> <span class="n">update_duration</span> <span class="o">=</span> <span class="kc">False</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Changes mode for a leg, along with any legs in the same tour.</span>
<span class="sd">    Leg durations are adjusted to mode speed, and home activity durations revisited to fit within the 24-hr plan.</span>
<span class="sd">    Default speed values are from National Travel Survey data (NTS0303)</span>

<span class="sd">    :params int seq: leg index in self.day</span>
<span class="sd">    :params string new_mode: default mode shift</span>
<span class="sd">    :params dict mode_speed: a dictionary of average mode speeds (kph)</span>
<span class="sd">    :params bool update_duration: whether to update leg durations based on mode speed</span>

<span class="sd">    :return: None</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">day</span><span class="p">[</span><span class="n">seq</span><span class="p">],</span> <span class="n">Leg</span><span class="p">)</span>

    <span class="n">tour</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_leg_tour</span><span class="p">(</span><span class="n">seq</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">seq</span><span class="p">,</span> <span class="n">plan</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">day</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">plan</span><span class="p">,</span> <span class="n">Leg</span><span class="p">):</span>
            <span class="n">act_from</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">day</span><span class="p">[</span><span class="n">seq</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
            <span class="n">act_to</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">day</span><span class="p">[</span><span class="n">seq</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span>
            <span class="k">for</span> <span class="n">other_act</span> <span class="ow">in</span> <span class="n">tour</span><span class="p">:</span>
                <span class="c1">#if any of the trip ends belongs in the tour change the mode</span>
                <span class="k">if</span> <span class="n">act_from</span><span class="o">.</span><span class="n">is_exact</span><span class="p">(</span><span class="n">other_act</span><span class="p">)</span> <span class="ow">or</span> <span class="n">act_to</span><span class="o">.</span><span class="n">is_exact</span><span class="p">(</span><span class="n">other_act</span><span class="p">):</span>
                    <span class="k">if</span> <span class="n">update_duration</span><span class="p">:</span>
                        <span class="n">shift_duration</span> <span class="o">=</span> <span class="p">((</span><span class="n">mode_speed</span><span class="p">[</span><span class="n">plan</span><span class="o">.</span><span class="n">mode</span><span class="p">]</span> <span class="o">/</span> <span class="n">mode_speed</span><span class="p">[</span><span class="n">new_mode</span><span class="p">])</span> <span class="o">*</span> <span class="n">plan</span><span class="o">.</span><span class="n">duration</span><span class="p">)</span> <span class="o">-</span> <span class="n">plan</span><span class="o">.</span><span class="n">duration</span> <span class="c1">#calculate any trip duration changes due to mode shift</span>
                    <span class="n">plan</span><span class="o">.</span><span class="n">mode</span> <span class="o">=</span> <span class="n">new_mode</span> <span class="c1">#change mode</span>
                    <span class="k">if</span> <span class="n">update_duration</span><span class="p">:</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">change_duration</span><span class="p">(</span><span class="n">seq</span><span class="o">=</span><span class="n">seq</span><span class="p">,</span> <span class="n">shift_duration</span><span class="o">=</span><span class="n">shift_duration</span><span class="p">)</span> <span class="c1">#change the duration of the trip</span>

    <span class="k">if</span> <span class="n">update_duration</span><span class="p">:</span>
        <span class="c1">#adjust home activities time in order fit revised legs/activities within a 24hr day</span>
        <span class="n">home_duration</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_home_duration</span><span class="p">()</span>
        <span class="n">home_duration_factor</span> <span class="o">=</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">day</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">end_time</span> <span class="o">-</span> <span class="n">END_OF_DAY</span><span class="p">)</span><span class="o">/</span><span class="n">home_duration</span> <span class="c1">#factor to adjust home activity time by</span>

        <span class="k">for</span> <span class="n">seq</span><span class="p">,</span> <span class="n">plan</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">day</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">plan</span><span class="o">.</span><span class="n">act</span><span class="o">==</span><span class="s1">&#39;home&#39;</span><span class="p">:</span>
                <span class="n">shift_duration</span> <span class="o">=</span> <span class="o">-</span><span class="n">home_duration_factor</span><span class="o">*</span><span class="n">plan</span><span class="o">.</span><span class="n">duration</span>
                <span class="n">shift_duration</span> <span class="o">=</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">seconds</span><span class="o">=</span><span class="nb">round</span><span class="p">(</span><span class="n">shift_duration</span><span class="o">/</span><span class="n">timedelta</span><span class="p">(</span><span class="n">seconds</span><span class="o">=</span><span class="mi">1</span><span class="p">)))</span> <span class="c1">#round to second</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">change_duration</span><span class="p">(</span><span class="n">seq</span><span class="o">=</span><span class="n">seq</span><span class="p">,</span><span class="n">shift_duration</span><span class="o">=</span><span class="n">shift_duration</span><span class="p">)</span>

        <span class="c1">#make sure the last activity ends in the end of day (ie remove potential rounding errors)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">day</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">end_time</span> <span class="o">!=</span> <span class="n">END_OF_DAY</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">day</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">end_time</span> <span class="o">=</span> <span class="n">END_OF_DAY</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="pam.activity.Plan.move_activity" class="doc doc-heading">
<code class="highlight language-python"><span class="n">move_activity</span><span class="p">(</span><span class="n">seq</span><span class="p">,</span> <span class="n">default</span> <span class="o">=</span> <span class="s1">&#39;home&#39;</span><span class="p">,</span> <span class="n">new_mode</span> <span class="o">=</span> <span class="s1">&#39;walk&#39;</span><span class="p">)</span></code>

<a href="#pam.activity.Plan.move_activity" class="headerlink" title="Permanent link">#</a></h3>


  <div class="doc doc-contents ">
  
      <p>Changes Activity location and associated journeys
:param seq:
        :param default: 'home' or pam.activity.Location
        :param new_mode: access/egress journey switching to this mode. Ie 'walk'
:return: None</p>

      <details class="quote">
        <summary>Source code in <code>pam/activity.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">617</span>
<span class="normal">618</span>
<span class="normal">619</span>
<span class="normal">620</span>
<span class="normal">621</span>
<span class="normal">622</span>
<span class="normal">623</span>
<span class="normal">624</span>
<span class="normal">625</span>
<span class="normal">626</span>
<span class="normal">627</span>
<span class="normal">628</span>
<span class="normal">629</span>
<span class="normal">630</span>
<span class="normal">631</span>
<span class="normal">632</span>
<span class="normal">633</span>
<span class="normal">634</span>
<span class="normal">635</span>
<span class="normal">636</span>
<span class="normal">637</span>
<span class="normal">638</span>
<span class="normal">639</span>
<span class="normal">640</span>
<span class="normal">641</span>
<span class="normal">642</span>
<span class="normal">643</span>
<span class="normal">644</span>
<span class="normal">645</span></pre></div></td><td class="code"><div><pre><span></span><code>    <span class="k">def</span> <span class="nf">move_activity</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">seq</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="s1">&#39;home&#39;</span><span class="p">,</span> <span class="n">new_mode</span><span class="o">=</span><span class="s1">&#39;walk&#39;</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Changes Activity location and associated journeys</span>
<span class="sd">        :param seq:</span>
<span class="sd">		:param default: &#39;home&#39; or pam.activity.Location</span>
<span class="sd">		:param new_mode: access/egress journey switching to this mode. Ie &#39;walk&#39;</span>
<span class="sd">        :return: None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">day</span><span class="p">[</span><span class="n">seq</span><span class="p">],</span> <span class="n">Activity</span><span class="p">)</span>

        <span class="c1"># decide on the new location</span>
        <span class="k">if</span> <span class="n">default</span> <span class="o">==</span> <span class="s1">&#39;home&#39;</span><span class="p">:</span>
            <span class="n">new_location</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">home</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">default</span><span class="p">,</span> <span class="n">Location</span><span class="p">)</span>
            <span class="n">new_location</span> <span class="o">=</span> <span class="n">default</span>

        <span class="c1"># actually update the location</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">day</span><span class="p">[</span><span class="n">seq</span><span class="p">]</span><span class="o">.</span><span class="n">location</span> <span class="o">=</span> <span class="n">new_location</span>
        <span class="k">if</span> <span class="n">seq</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
            <span class="c1"># if it&#39;s not the first activity of plan</span>
            <span class="c1"># update leg that leads to activity at seq</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">day</span><span class="p">[</span><span class="n">seq</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">end_location</span> <span class="o">=</span> <span class="n">new_location</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">mode_shift</span><span class="p">(</span><span class="n">seq</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span> <span class="n">new_mode</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">seq</span> <span class="o">!=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">day</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">:</span>
            <span class="c1"># if it&#39;s not the last activity of plan</span>
            <span class="c1"># update leg that leads to activity at seq</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">day</span><span class="p">[</span><span class="n">seq</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">start_location</span> <span class="o">=</span> <span class="n">new_location</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">mode_shift</span><span class="p">(</span><span class="n">seq</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="n">new_mode</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="pam.activity.Plan.plot" class="doc doc-heading">
<code class="highlight language-python"><span class="n">plot</span><span class="p">(</span><span class="n">kwargs</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span></code>

<a href="#pam.activity.Plan.plot" class="headerlink" title="Permanent link">#</a></h3>


  <div class="doc doc-contents ">

      <details class="quote">
        <summary>Source code in <code>pam/activity.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">152</span>
<span class="normal">153</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">plot</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">kwargs</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="n">plot</span><span class="o">.</span><span class="n">plot_plan</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">kwargs</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="pam.activity.Plan.position_of" class="doc doc-heading">
<code class="highlight language-python"><span class="n">position_of</span><span class="p">(</span><span class="n">target</span> <span class="o">=</span> <span class="s1">&#39;home&#39;</span><span class="p">,</span> <span class="n">search</span> <span class="o">=</span> <span class="s1">&#39;last&#39;</span><span class="p">)</span></code>

<a href="#pam.activity.Plan.position_of" class="headerlink" title="Permanent link">#</a></h3>


  <div class="doc doc-contents ">
  
      <p>Return position of target activity type (either first or last depending on search).
Return None if not found.
:param target: str
:param search: str {'first', 'last'}
:return: {int, None}</p>

      <details class="quote">
        <summary>Source code in <code>pam/activity.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">330</span>
<span class="normal">331</span>
<span class="normal">332</span>
<span class="normal">333</span>
<span class="normal">334</span>
<span class="normal">335</span>
<span class="normal">336</span>
<span class="normal">337</span>
<span class="normal">338</span>
<span class="normal">339</span>
<span class="normal">340</span>
<span class="normal">341</span>
<span class="normal">342</span>
<span class="normal">343</span>
<span class="normal">344</span>
<span class="normal">345</span>
<span class="normal">346</span>
<span class="normal">347</span>
<span class="normal">348</span>
<span class="normal">349</span>
<span class="normal">350</span>
<span class="normal">351</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">position_of</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">target</span><span class="o">=</span><span class="s1">&#39;home&#39;</span><span class="p">,</span> <span class="n">search</span><span class="o">=</span><span class="s1">&#39;last&#39;</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Return position of target activity type (either first or last depending on search).</span>
<span class="sd">    Return None if not found.</span>
<span class="sd">    :param target: str</span>
<span class="sd">    :param search: str {&#39;first&#39;, &#39;last&#39;}</span>
<span class="sd">    :return: {int, None}</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">if</span> <span class="n">search</span> <span class="o">==</span> <span class="s1">&#39;last&#39;</span><span class="p">:</span>
        <span class="n">last</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">for</span> <span class="n">seq</span><span class="p">,</span> <span class="n">act</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">day</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">act</span><span class="o">.</span><span class="n">act</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="n">target</span><span class="p">:</span>
                <span class="n">last</span> <span class="o">=</span> <span class="n">seq</span>
        <span class="k">return</span> <span class="n">last</span>

    <span class="k">if</span> <span class="n">search</span> <span class="o">==</span> <span class="s1">&#39;first&#39;</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">seq</span><span class="p">,</span> <span class="n">act</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">day</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">act</span><span class="o">.</span><span class="n">act</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="n">target</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">seq</span>

    <span class="k">raise</span> <span class="ne">UserWarning</span><span class="p">(</span><span class="s2">&quot;Method only supports search types &#39;first&#39; or &#39;last&#39;.&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="pam.activity.Plan.print" class="doc doc-heading">
<code class="highlight language-python"><span class="nb">print</span><span class="p">()</span></code>

<a href="#pam.activity.Plan.print" class="headerlink" title="Permanent link">#</a></h3>


  <div class="doc doc-contents ">

      <details class="quote">
        <summary>Source code in <code>pam/activity.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">572</span>
<span class="normal">573</span>
<span class="normal">574</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">print</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="k">for</span> <span class="n">seq</span><span class="p">,</span> <span class="n">component</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">seq</span><span class="si">}</span><span class="s2">:</span><span class="se">\t</span><span class="si">{</span><span class="n">component</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="pam.activity.Plan.remove_activity" class="doc doc-heading">
<code class="highlight language-python"><span class="n">remove_activity</span><span class="p">(</span><span class="n">seq</span><span class="p">)</span></code>

<a href="#pam.activity.Plan.remove_activity" class="headerlink" title="Permanent link">#</a></h3>


  <div class="doc doc-contents ">
  
      <p>Remove an activity from plan at given seq. Does not remove adjacent legs
Will also check if an activity is wrapped and remove accordingly. Returns (adjusted) idx
of previous (p_idx) and subsequent (s_idx) activities as a tuple. If there is no previous
or subsequent activity, ie a removed activity is at the start or end of an open plan,
then None can be returned. If all activities are removed then None, None is returned.
:param seq: int
:return: tuple</p>

      <details class="quote">
        <summary>Source code in <code>pam/activity.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">576</span>
<span class="normal">577</span>
<span class="normal">578</span>
<span class="normal">579</span>
<span class="normal">580</span>
<span class="normal">581</span>
<span class="normal">582</span>
<span class="normal">583</span>
<span class="normal">584</span>
<span class="normal">585</span>
<span class="normal">586</span>
<span class="normal">587</span>
<span class="normal">588</span>
<span class="normal">589</span>
<span class="normal">590</span>
<span class="normal">591</span>
<span class="normal">592</span>
<span class="normal">593</span>
<span class="normal">594</span>
<span class="normal">595</span>
<span class="normal">596</span>
<span class="normal">597</span>
<span class="normal">598</span>
<span class="normal">599</span>
<span class="normal">600</span>
<span class="normal">601</span>
<span class="normal">602</span>
<span class="normal">603</span>
<span class="normal">604</span>
<span class="normal">605</span>
<span class="normal">606</span>
<span class="normal">607</span>
<span class="normal">608</span>
<span class="normal">609</span>
<span class="normal">610</span>
<span class="normal">611</span>
<span class="normal">612</span>
<span class="normal">613</span>
<span class="normal">614</span>
<span class="normal">615</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">remove_activity</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">seq</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Remove an activity from plan at given seq. Does not remove adjacent legs</span>
<span class="sd">    Will also check if an activity is wrapped and remove accordingly. Returns (adjusted) idx</span>
<span class="sd">    of previous (p_idx) and subsequent (s_idx) activities as a tuple. If there is no previous</span>
<span class="sd">    or subsequent activity, ie a removed activity is at the start or end of an open plan,</span>
<span class="sd">    then None can be returned. If all activities are removed then None, None is returned.</span>
<span class="sd">    :param seq: int</span>
<span class="sd">    :return: tuple</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">day</span><span class="p">[</span><span class="n">seq</span><span class="p">],</span> <span class="n">Activity</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">seq</span> <span class="o">==</span> <span class="mi">0</span> <span class="ow">and</span> <span class="n">seq</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">length</span> <span class="o">-</span> <span class="mi">1</span><span class="p">:</span>  <span class="c1"># remove activity that is entire plan</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot; remove_activity, idx:</span><span class="si">{</span><span class="n">seq</span><span class="si">}</span><span class="s2"> type:</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">day</span><span class="p">[</span><span class="n">seq</span><span class="p">]</span><span class="o">.</span><span class="n">act</span><span class="si">}</span><span class="s2">, plan now empty&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">day</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
        <span class="k">return</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span>

    <span class="k">if</span> <span class="p">(</span><span class="n">seq</span> <span class="o">==</span> <span class="mi">0</span> <span class="ow">or</span> <span class="n">seq</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">length</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">closed</span><span class="p">:</span>  <span class="c1"># remove activity that wraps</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot; remove_activity, idx:</span><span class="si">{</span><span class="n">seq</span><span class="si">}</span><span class="s2"> type:</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">day</span><span class="p">[</span><span class="n">seq</span><span class="p">]</span><span class="o">.</span><span class="n">act</span><span class="si">}</span><span class="s2">, wraps&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">day</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">day</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">length</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">length</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>  <span class="c1"># all activities have been removed</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot; remove_activity, idx:</span><span class="si">{</span><span class="n">seq</span><span class="si">}</span><span class="s2"> type:</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">day</span><span class="p">[</span><span class="n">seq</span><span class="p">]</span><span class="o">.</span><span class="n">act</span><span class="si">}</span><span class="s2">, now empty&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">length</span><span class="o">-</span><span class="mi">2</span><span class="p">,</span> <span class="mi">1</span>

    <span class="k">if</span> <span class="n">seq</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>  <span class="c1"># remove first activity</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot; remove_activity, idx:</span><span class="si">{</span><span class="n">seq</span><span class="si">}</span><span class="s2"> type:</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">day</span><span class="p">[</span><span class="n">seq</span><span class="p">]</span><span class="o">.</span><span class="n">act</span><span class="si">}</span><span class="s2">, first activity&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">day</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">seq</span><span class="p">)</span>
        <span class="k">return</span> <span class="kc">None</span><span class="p">,</span> <span class="mi">1</span>

    <span class="k">if</span> <span class="n">seq</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">length</span> <span class="o">-</span> <span class="mi">1</span><span class="p">:</span>  <span class="c1"># remove last activity</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot; remove_activity, idx:</span><span class="si">{</span><span class="n">seq</span><span class="si">}</span><span class="s2"> type:</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">day</span><span class="p">[</span><span class="n">seq</span><span class="p">]</span><span class="o">.</span><span class="n">act</span><span class="si">}</span><span class="s2">, last activity&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">day</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">seq</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">length</span><span class="o">-</span><span class="mi">2</span><span class="p">,</span> <span class="kc">None</span>

    <span class="k">else</span><span class="p">:</span>  <span class="c1"># remove activity somewhere in middle of plan</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot; remove_activity, idx:</span><span class="si">{</span><span class="n">seq</span><span class="si">}</span><span class="s2"> type:</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">day</span><span class="p">[</span><span class="n">seq</span><span class="p">]</span><span class="o">.</span><span class="n">act</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">day</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">seq</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">seq</span><span class="o">-</span><span class="mi">2</span><span class="p">,</span> <span class="n">seq</span><span class="o">+</span><span class="mi">1</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="pam.activity.Plan.reversed" class="doc doc-heading">
<code class="highlight language-python"><span class="nb">reversed</span><span class="p">()</span></code>

<a href="#pam.activity.Plan.reversed" class="headerlink" title="Permanent link">#</a></h3>


  <div class="doc doc-contents ">
  
      <p>Reverse iterate through plan, yield idx and component.</p>

      <details class="quote">
        <summary>Source code in <code>pam/activity.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">reversed</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Reverse iterate through plan, yield idx and component.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">length</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">):</span>
        <span class="k">yield</span> <span class="n">i</span><span class="p">,</span> <span class="bp">self</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="pam.activity.Plan.set_leg_purposes" class="doc doc-heading">
<code class="highlight language-python"><span class="n">set_leg_purposes</span><span class="p">()</span></code>

<a href="#pam.activity.Plan.set_leg_purposes" class="headerlink" title="Permanent link">#</a></h3>


  <div class="doc doc-contents ">
  
      <p>Set leg purposes to destination activity.
Skip 'pt interaction' activities.</p>

      <details class="quote">
        <summary>Source code in <code>pam/activity.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">547</span>
<span class="normal">548</span>
<span class="normal">549</span>
<span class="normal">550</span>
<span class="normal">551</span>
<span class="normal">552</span>
<span class="normal">553</span>
<span class="normal">554</span>
<span class="normal">555</span>
<span class="normal">556</span>
<span class="normal">557</span>
<span class="normal">558</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">set_leg_purposes</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Set leg purposes to destination activity.</span>
<span class="sd">    Skip &#39;pt interaction&#39; activities.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">for</span> <span class="n">seq</span><span class="p">,</span> <span class="n">component</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">component</span><span class="p">,</span> <span class="n">Leg</span><span class="p">):</span>
            <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">seq</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">day</span><span class="p">)</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">):</span>
                <span class="n">act</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">day</span><span class="p">[</span><span class="n">j</span><span class="p">]</span><span class="o">.</span><span class="n">act</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="n">act</span> <span class="o">==</span> <span class="s2">&quot;pt interaction&quot;</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">day</span><span class="p">[</span><span class="n">seq</span><span class="p">]</span><span class="o">.</span><span class="n">purp</span> <span class="o">=</span> <span class="n">act</span>
                    <span class="k">break</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="pam.activity.Plan.simplify_pt_trips" class="doc doc-heading">
<code class="highlight language-python"><span class="n">simplify_pt_trips</span><span class="p">()</span></code>

<a href="#pam.activity.Plan.simplify_pt_trips" class="headerlink" title="Permanent link">#</a></h3>


  <div class="doc doc-contents ">
  
      <p>Remove pt interaction events (resulting from complex matsim plans), simplify legs
to single leg with mode = pt</p>

      <details class="quote">
        <summary>Source code in <code>pam/activity.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">801</span>
<span class="normal">802</span>
<span class="normal">803</span>
<span class="normal">804</span>
<span class="normal">805</span>
<span class="normal">806</span>
<span class="normal">807</span>
<span class="normal">808</span>
<span class="normal">809</span>
<span class="normal">810</span>
<span class="normal">811</span>
<span class="normal">812</span>
<span class="normal">813</span>
<span class="normal">814</span>
<span class="normal">815</span>
<span class="normal">816</span>
<span class="normal">817</span>
<span class="normal">818</span>
<span class="normal">819</span>
<span class="normal">820</span>
<span class="normal">821</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">simplify_pt_trips</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Remove pt interaction events (resulting from complex matsim plans), simplify legs</span>
<span class="sd">    to single leg with mode = pt</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">pt_trip</span> <span class="o">=</span> <span class="kc">False</span>
    <span class="k">for</span> <span class="n">idx</span><span class="p">,</span> <span class="n">component</span> <span class="ow">in</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">reversed</span><span class="p">()):</span>
        <span class="k">if</span> <span class="n">component</span><span class="o">.</span><span class="n">act</span> <span class="o">==</span> <span class="s2">&quot;pt interaction&quot;</span><span class="p">:</span>  <span class="c1"># this is a pt trip</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">pt_trip</span><span class="p">:</span>  <span class="c1"># this is a new pt leg</span>
                <span class="n">trip_end_time</span> <span class="o">=</span> <span class="bp">self</span><span class="p">[</span><span class="n">idx</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">end_time</span>
                <span class="n">trip_end_location</span> <span class="o">=</span> <span class="bp">self</span><span class="p">[</span><span class="n">idx</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">end_location</span>

            <span class="n">pt_trip</span> <span class="o">=</span> <span class="kc">True</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">day</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">idx</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">day</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">idx</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">pt_trip</span><span class="p">:</span>  <span class="c1"># this is the start of the pt trip - modify the first leg</span>
                <span class="bp">self</span><span class="p">[</span><span class="n">idx</span><span class="p">]</span><span class="o">.</span><span class="n">mode</span> <span class="o">=</span> <span class="s1">&#39;pt&#39;</span>
                <span class="bp">self</span><span class="p">[</span><span class="n">idx</span><span class="p">]</span><span class="o">.</span><span class="n">end_time</span> <span class="o">=</span> <span class="n">trip_end_time</span>
                <span class="bp">self</span><span class="p">[</span><span class="n">idx</span><span class="p">]</span><span class="o">.</span><span class="n">end_location</span> <span class="o">=</span> <span class="n">trip_end_location</span>
            <span class="n">pt_trip</span> <span class="o">=</span> <span class="kc">False</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="pam.activity.Plan.stay_at_home" class="doc doc-heading">
<code class="highlight language-python"><span class="n">stay_at_home</span><span class="p">()</span></code>

<a href="#pam.activity.Plan.stay_at_home" class="headerlink" title="Permanent link">#</a></h3>


  <div class="doc doc-contents ">

      <details class="quote">
        <summary>Source code in <code>pam/activity.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">789</span>
<span class="normal">790</span>
<span class="normal">791</span>
<span class="normal">792</span>
<span class="normal">793</span>
<span class="normal">794</span>
<span class="normal">795</span>
<span class="normal">796</span>
<span class="normal">797</span>
<span class="normal">798</span>
<span class="normal">799</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">stay_at_home</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot; stay_at_home, location:</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">home</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">day</span> <span class="o">=</span> <span class="p">[</span>
        <span class="n">Activity</span><span class="p">(</span>
            <span class="n">seq</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
            <span class="n">act</span><span class="o">=</span><span class="s1">&#39;home&#39;</span><span class="p">,</span>
            <span class="n">area</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">home</span><span class="o">.</span><span class="n">area</span><span class="p">,</span>
            <span class="n">start_time</span><span class="o">=</span><span class="n">pam</span><span class="o">.</span><span class="n">utils</span><span class="o">.</span><span class="n">minutes_to_datetime</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span>
            <span class="n">end_time</span><span class="o">=</span><span class="n">pam</span><span class="o">.</span><span class="n">variables</span><span class="o">.</span><span class="n">END_OF_DAY</span><span class="p">,</span>
        <span class="p">)</span>
    <span class="p">]</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="pam.activity.Plan.trip_legs" class="doc doc-heading">
<code class="highlight language-python"><span class="n">trip_legs</span><span class="p">(</span><span class="n">ignore</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;pt interaction&#39;</span><span class="p">,</span> <span class="s1">&#39;pt_interaction&#39;</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">str</span></code>

<a href="#pam.activity.Plan.trip_legs" class="headerlink" title="Permanent link">#</a></h3>


  <div class="doc doc-contents ">
  
      <p>Yield plan trips as lists of legs based on ignoring certain activities.</p>

      <details class="quote">
        <summary>Source code in <code>pam/activity.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">trip_legs</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ignore</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;pt interaction&quot;</span><span class="p">,</span> <span class="s2">&quot;pt_interaction&quot;</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Yield plan trips as lists of legs based on ignoring certain activities.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">day</span><span class="p">:</span>
        <span class="n">legs</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">component</span> <span class="ow">in</span> <span class="bp">self</span><span class="p">[</span><span class="mi">1</span><span class="p">:]:</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">component</span><span class="p">,</span> <span class="n">Leg</span><span class="p">):</span>
                <span class="n">legs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">component</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">component</span><span class="o">.</span><span class="n">act</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">ignore</span><span class="p">:</span>
                <span class="k">yield</span> <span class="n">legs</span>
                <span class="n">legs</span> <span class="o">=</span> <span class="p">[]</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="pam.activity.Plan.trips" class="doc doc-heading">
<code class="highlight language-python"><span class="n">trips</span><span class="p">(</span><span class="n">ignore</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;pt interaction&#39;</span><span class="p">,</span> <span class="s1">&#39;pt_interaction&#39;</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">str</span></code>

<a href="#pam.activity.Plan.trips" class="headerlink" title="Permanent link">#</a></h3>


  <div class="doc doc-contents ">
  
      <p>Yield plan trips based on ignoring certain activities.</p>

      <details class="quote">
        <summary>Source code in <code>pam/activity.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span>
<span class="normal">75</span>
<span class="normal">76</span>
<span class="normal">77</span>
<span class="normal">78</span>
<span class="normal">79</span>
<span class="normal">80</span>
<span class="normal">81</span>
<span class="normal">82</span>
<span class="normal">83</span>
<span class="normal">84</span>
<span class="normal">85</span>
<span class="normal">86</span>
<span class="normal">87</span>
<span class="normal">88</span>
<span class="normal">89</span>
<span class="normal">90</span>
<span class="normal">91</span>
<span class="normal">92</span>
<span class="normal">93</span>
<span class="normal">94</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">trips</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ignore</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;pt interaction&quot;</span><span class="p">,</span> <span class="s2">&quot;pt_interaction&quot;</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Yield plan trips based on ignoring certain activities.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">day</span><span class="p">:</span>
        <span class="n">seq</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">modes</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">start_location</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">day</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">location</span>
        <span class="n">start_time</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">day</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">end_time</span>
        <span class="n">distance</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">for</span> <span class="n">component</span> <span class="ow">in</span> <span class="bp">self</span><span class="p">[</span><span class="mi">1</span><span class="p">:]:</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">component</span><span class="p">,</span> <span class="n">Leg</span><span class="p">):</span>
                <span class="n">modes</span><span class="p">[</span><span class="n">component</span><span class="o">.</span><span class="n">mode</span><span class="p">]</span> <span class="o">=</span> <span class="n">modes</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">component</span><span class="o">.</span><span class="n">mode</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span> <span class="o">+</span> <span class="n">component</span><span class="o">.</span><span class="n">distance</span>
                <span class="n">distance</span> <span class="o">+=</span> <span class="n">component</span><span class="o">.</span><span class="n">distance</span>
            <span class="k">elif</span> <span class="n">component</span><span class="o">.</span><span class="n">act</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">ignore</span><span class="p">:</span>
                <span class="k">yield</span> <span class="n">Trip</span><span class="p">(</span>
                    <span class="n">seq</span> <span class="o">=</span> <span class="n">seq</span><span class="p">,</span>
                    <span class="n">mode</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">modes</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="n">modes</span><span class="o">.</span><span class="n">get</span><span class="p">),</span>
                    <span class="n">start_area</span> <span class="o">=</span> <span class="n">start_location</span><span class="o">.</span><span class="n">area</span><span class="p">,</span>
                    <span class="n">end_area</span> <span class="o">=</span> <span class="n">component</span><span class="o">.</span><span class="n">location</span><span class="o">.</span><span class="n">area</span><span class="p">,</span>
                    <span class="n">start_link</span> <span class="o">=</span> <span class="n">start_location</span><span class="o">.</span><span class="n">link</span><span class="p">,</span>
                    <span class="n">end_link</span> <span class="o">=</span> <span class="n">component</span><span class="o">.</span><span class="n">location</span><span class="o">.</span><span class="n">link</span><span class="p">,</span>
                    <span class="n">start_loc</span> <span class="o">=</span> <span class="n">start_location</span><span class="o">.</span><span class="n">loc</span><span class="p">,</span>
                    <span class="n">end_loc</span> <span class="o">=</span> <span class="n">component</span><span class="o">.</span><span class="n">location</span><span class="o">.</span><span class="n">loc</span><span class="p">,</span>
                    <span class="n">start_time</span> <span class="o">=</span> <span class="n">start_time</span><span class="p">,</span>
                    <span class="n">end_time</span> <span class="o">=</span> <span class="n">component</span><span class="o">.</span><span class="n">start_time</span><span class="p">,</span>
                    <span class="n">distance</span> <span class="o">=</span> <span class="n">distance</span><span class="p">,</span>
                    <span class="n">purp</span> <span class="o">=</span> <span class="n">component</span><span class="o">.</span><span class="n">act</span><span class="p">,</span>
                <span class="p">)</span>
                <span class="n">modes</span> <span class="o">=</span> <span class="p">{}</span>
                <span class="n">start_location</span> <span class="o">=</span> <span class="n">component</span><span class="o">.</span><span class="n">location</span>
                <span class="n">start_time</span> <span class="o">=</span> <span class="n">component</span><span class="o">.</span><span class="n">end_time</span>
                <span class="n">distance</span> <span class="o">=</span> <span class="mi">0</span>
                <span class="n">seq</span> <span class="o">+=</span> <span class="mi">1</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="pam.activity.Plan.validate" class="doc doc-heading">
<code class="highlight language-python"><span class="n">validate</span><span class="p">()</span></code>

<a href="#pam.activity.Plan.validate" class="headerlink" title="Permanent link">#</a></h3>


  <div class="doc doc-contents ">

      <details class="quote">
        <summary>Source code in <code>pam/activity.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">309</span>
<span class="normal">310</span>
<span class="normal">311</span>
<span class="normal">312</span>
<span class="normal">313</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">validate</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">validate_sequence</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">validate_times</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">validate_locations</span><span class="p">()</span>
    <span class="k">return</span> <span class="kc">True</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="pam.activity.Plan.validate_locations" class="doc doc-heading">
<code class="highlight language-python"><span class="n">validate_locations</span><span class="p">()</span></code>

<a href="#pam.activity.Plan.validate_locations" class="headerlink" title="Permanent link">#</a></h3>


  <div class="doc doc-contents ">

      <details class="quote">
        <summary>Source code in <code>pam/activity.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">325</span>
<span class="normal">326</span>
<span class="normal">327</span>
<span class="normal">328</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">validate_locations</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">valid_locations</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">PAMValidationLocationsError</span><span class="p">()</span>
    <span class="k">return</span> <span class="kc">True</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="pam.activity.Plan.validate_sequence" class="doc doc-heading">
<code class="highlight language-python"><span class="n">validate_sequence</span><span class="p">()</span></code>

<a href="#pam.activity.Plan.validate_sequence" class="headerlink" title="Permanent link">#</a></h3>


  <div class="doc doc-contents ">

      <details class="quote">
        <summary>Source code in <code>pam/activity.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">315</span>
<span class="normal">316</span>
<span class="normal">317</span>
<span class="normal">318</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">validate_sequence</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">valid_sequence</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">PAMSequenceValidationError</span><span class="p">()</span>
    <span class="k">return</span> <span class="kc">True</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="pam.activity.Plan.validate_times" class="doc doc-heading">
<code class="highlight language-python"><span class="n">validate_times</span><span class="p">()</span></code>

<a href="#pam.activity.Plan.validate_times" class="headerlink" title="Permanent link">#</a></h3>


  <div class="doc doc-contents ">

      <details class="quote">
        <summary>Source code in <code>pam/activity.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">320</span>
<span class="normal">321</span>
<span class="normal">322</span>
<span class="normal">323</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">validate_times</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">valid_time_sequence</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">PAMInvalidTimeSequenceError</span><span class="p">(</span><span class="s2">&quot;Plan activity and trips times are not consistent&quot;</span><span class="p">)</span>
    <span class="k">return</span> <span class="kc">True</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>



  </div>

  </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="pam.activity.PlanComponent" class="doc doc-heading">
        <code>PlanComponent</code>


<a href="#pam.activity.PlanComponent" class="headerlink" title="Permanent link">#</a></h2>


  <div class="doc doc-contents ">




  

  <div class="doc doc-children">







<div class="doc doc-object doc-attribute">



<h3 id="pam.activity.PlanComponent.duration" class="doc doc-heading">
<code class="highlight language-python"><span class="n">duration</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#pam.activity.PlanComponent.duration" class="headerlink" title="Permanent link">#</a></h3>


  <div class="doc doc-contents ">
  </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="pam.activity.PlanComponent.hours" class="doc doc-heading">
<code class="highlight language-python"><span class="n">hours</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#pam.activity.PlanComponent.hours" class="headerlink" title="Permanent link">#</a></h3>


  <div class="doc doc-contents ">
  </div>

</div>



<div class="doc doc-object doc-function">



<h3 id="pam.activity.PlanComponent.shift_duration" class="doc doc-heading">
<code class="highlight language-python"><span class="n">shift_duration</span><span class="p">(</span><span class="n">new_duration</span><span class="p">,</span> <span class="n">new_start_time</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span></code>

<a href="#pam.activity.PlanComponent.shift_duration" class="headerlink" title="Permanent link">#</a></h3>


  <div class="doc doc-contents ">
  
      <p>Given a new duration and optionally start time, set start time, set end time based on duration and
return new end time.
:param new_duration: timedelta
:param new_start_time: datetime
:return: datetime</p>

      <details class="quote">
        <summary>Source code in <code>pam/activity.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">950</span>
<span class="normal">951</span>
<span class="normal">952</span>
<span class="normal">953</span>
<span class="normal">954</span>
<span class="normal">955</span>
<span class="normal">956</span>
<span class="normal">957</span>
<span class="normal">958</span>
<span class="normal">959</span>
<span class="normal">960</span>
<span class="normal">961</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">shift_duration</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">new_duration</span><span class="p">,</span> <span class="n">new_start_time</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Given a new duration and optionally start time, set start time, set end time based on duration and</span>
<span class="sd">    return new end time.</span>
<span class="sd">    :param new_duration: timedelta</span>
<span class="sd">    :param new_start_time: datetime</span>
<span class="sd">    :return: datetime</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">new_start_time</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">start_time</span> <span class="o">=</span> <span class="n">new_start_time</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">end_time</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">start_time</span> <span class="o">+</span> <span class="n">new_duration</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">end_time</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="pam.activity.PlanComponent.shift_end_time" class="doc doc-heading">
<code class="highlight language-python"><span class="n">shift_end_time</span><span class="p">(</span><span class="n">new_end_time</span><span class="p">)</span></code>

<a href="#pam.activity.PlanComponent.shift_end_time" class="headerlink" title="Permanent link">#</a></h3>


  <div class="doc doc-contents ">
  
      <p>Given a new end time, set end time, set start time based on previous duration and
return new start time.
:param new_end_time: datetime
:return: datetime</p>

      <details class="quote">
        <summary>Source code in <code>pam/activity.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">938</span>
<span class="normal">939</span>
<span class="normal">940</span>
<span class="normal">941</span>
<span class="normal">942</span>
<span class="normal">943</span>
<span class="normal">944</span>
<span class="normal">945</span>
<span class="normal">946</span>
<span class="normal">947</span>
<span class="normal">948</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">shift_end_time</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">new_end_time</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Given a new end time, set end time, set start time based on previous duration and</span>
<span class="sd">    return new start time.</span>
<span class="sd">    :param new_end_time: datetime</span>
<span class="sd">    :return: datetime</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">duration</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">duration</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">end_time</span> <span class="o">=</span> <span class="n">new_end_time</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">start_time</span> <span class="o">=</span> <span class="n">new_end_time</span> <span class="o">-</span> <span class="n">duration</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">start_time</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="pam.activity.PlanComponent.shift_start_time" class="doc doc-heading">
<code class="highlight language-python"><span class="n">shift_start_time</span><span class="p">(</span><span class="n">new_start_time</span><span class="p">)</span></code>

<a href="#pam.activity.PlanComponent.shift_start_time" class="headerlink" title="Permanent link">#</a></h3>


  <div class="doc doc-contents ">
  
      <p>Given a new start time, set start time, set end time based on previous duration and
return new end time.
:param new_start_time: datetime
:return: datetime</p>

      <details class="quote">
        <summary>Source code in <code>pam/activity.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">926</span>
<span class="normal">927</span>
<span class="normal">928</span>
<span class="normal">929</span>
<span class="normal">930</span>
<span class="normal">931</span>
<span class="normal">932</span>
<span class="normal">933</span>
<span class="normal">934</span>
<span class="normal">935</span>
<span class="normal">936</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">shift_start_time</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">new_start_time</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Given a new start time, set start time, set end time based on previous duration and</span>
<span class="sd">    return new end time.</span>
<span class="sd">    :param new_start_time: datetime</span>
<span class="sd">    :return: datetime</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">duration</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">duration</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">start_time</span> <span class="o">=</span> <span class="n">new_start_time</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">end_time</span> <span class="o">=</span> <span class="n">new_start_time</span> <span class="o">+</span> <span class="n">duration</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">end_time</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>



  </div>

  </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="pam.activity.Route" class="doc doc-heading">
<code class="highlight language-python"><span class="n">Route</span><span class="p">(</span><span class="n">xml_elem</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span></code>

<a href="#pam.activity.Route" class="headerlink" title="Permanent link">#</a></h2>


  <div class="doc doc-contents ">

  
      <p>xml element wrapper for leg routes, in the simplest case of a leg with no route, this will behave as an empty dictionary.
For routed legs this provides some convenience properties such as is_transit, and transit_route.</p>


          <details class="quote">
            <summary>Source code in <code>pam/activity.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1113</span>
<span class="normal">1114</span>
<span class="normal">1115</span>
<span class="normal">1116</span>
<span class="normal">1117</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">xml_elem</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
    <span class="k">if</span> <span class="n">xml_elem</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">xml</span> <span class="o">=</span> <span class="n">xml_elem</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">xml</span> <span class="o">=</span> <span class="p">{}</span>  <span class="c1"># this allows an empty route to behave as an empty dict</span>
</code></pre></div></td></tr></table></div>
          </details>

  

  <div class="doc doc-children">







<div class="doc doc-object doc-attribute">



<h3 id="pam.activity.Route.distance" class="doc doc-heading">
<code class="highlight language-python"><span class="n">distance</span><span class="p">:</span> <span class="nb">float</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#pam.activity.Route.distance" class="headerlink" title="Permanent link">#</a></h3>


  <div class="doc doc-contents ">
  </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="pam.activity.Route.exists" class="doc doc-heading">
<code class="highlight language-python"><span class="n">exists</span><span class="p">:</span> <span class="nb">bool</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#pam.activity.Route.exists" class="headerlink" title="Permanent link">#</a></h3>


  <div class="doc doc-contents ">
  </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="pam.activity.Route.is_routed" class="doc doc-heading">
<code class="highlight language-python"><span class="n">is_routed</span><span class="p">:</span> <span class="nb">bool</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#pam.activity.Route.is_routed" class="headerlink" title="Permanent link">#</a></h3>


  <div class="doc doc-contents ">
  </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="pam.activity.Route.is_teleported" class="doc doc-heading">
<code class="highlight language-python"><span class="n">is_teleported</span><span class="p">:</span> <span class="nb">bool</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#pam.activity.Route.is_teleported" class="headerlink" title="Permanent link">#</a></h3>


  <div class="doc doc-contents ">
  </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="pam.activity.Route.is_transit" class="doc doc-heading">
<code class="highlight language-python"><span class="n">is_transit</span><span class="p">:</span> <span class="nb">bool</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#pam.activity.Route.is_transit" class="headerlink" title="Permanent link">#</a></h3>


  <div class="doc doc-contents ">
  </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="pam.activity.Route.network_route" class="doc doc-heading">
<code class="highlight language-python"><span class="n">network_route</span><span class="p">:</span> <span class="nb">list</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#pam.activity.Route.network_route" class="headerlink" title="Permanent link">#</a></h3>


  <div class="doc doc-contents ">
  </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="pam.activity.Route.transit" class="doc doc-heading">
<code class="highlight language-python"><span class="n">transit</span><span class="p">:</span> <span class="nb">dict</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#pam.activity.Route.transit" class="headerlink" title="Permanent link">#</a></h3>


  <div class="doc doc-contents ">
  </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="pam.activity.Route.type" class="doc doc-heading">
<code class="highlight language-python"><span class="nb">type</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#pam.activity.Route.type" class="headerlink" title="Permanent link">#</a></h3>


  <div class="doc doc-contents ">
  </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="pam.activity.Route.xml" class="doc doc-heading">
<code class="highlight language-python"><span class="n">xml</span> <span class="o">=</span> <span class="n">xml_elem</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#pam.activity.Route.xml" class="headerlink" title="Permanent link">#</a></h3>


  <div class="doc doc-contents ">
  </div>

</div>



<div class="doc doc-object doc-function">



<h3 id="pam.activity.Route.get" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">default</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span></code>

<a href="#pam.activity.Route.get" class="headerlink" title="Permanent link">#</a></h3>


  <div class="doc doc-contents ">

      <details class="quote">
        <summary>Source code in <code>pam/activity.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1151</span>
<span class="normal">1152</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">get</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">xml</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">default</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>



  </div>

  </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="pam.activity.RouteV11" class="doc doc-heading">
<code class="highlight language-python"><span class="n">RouteV11</span><span class="p">(</span><span class="n">xml_elem</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span></code>

<a href="#pam.activity.RouteV11" class="headerlink" title="Permanent link">#</a></h2>


  <div class="doc doc-contents ">
      <p class="doc doc-class-bases">
        Bases: <code><a class="autorefs autorefs-internal" title="pam.activity.Route" href="#pam.activity.Route">Route</a></code></p>



          <details class="quote">
            <summary>Source code in <code>pam/activity.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1167</span>
<span class="normal">1168</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">xml_elem</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
    <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">xml_elem</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
          </details>

  

  <div class="doc doc-children">







<div class="doc doc-object doc-attribute">



<h3 id="pam.activity.RouteV11.is_transit" class="doc doc-heading">
<code class="highlight language-python"><span class="n">is_transit</span><span class="p">:</span> <span class="nb">bool</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#pam.activity.RouteV11.is_transit" class="headerlink" title="Permanent link">#</a></h3>


  <div class="doc doc-contents ">
  </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="pam.activity.RouteV11.transit" class="doc doc-heading">
<code class="highlight language-python"><span class="n">transit</span><span class="p">:</span> <span class="nb">dict</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#pam.activity.RouteV11.transit" class="headerlink" title="Permanent link">#</a></h3>


  <div class="doc doc-contents ">
  </div>

</div>





  </div>

  </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="pam.activity.Trip" class="doc doc-heading">
        <code>Trip</code>


<a href="#pam.activity.Trip" class="headerlink" title="Permanent link">#</a></h2>


  <div class="doc doc-contents ">
      <p class="doc doc-class-bases">
        Bases: <code><a class="autorefs autorefs-internal" title="pam.activity.Leg" href="#pam.activity.Leg">Leg</a></code></p>




  </div>

</div>




  </div>

  </div>

</div>





                
              </article>
            </div>
          
          
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": "../..", "features": [], "search": "../../assets/javascripts/workers/search.208ed371.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": {"provider": "mike"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.b4d07000.min.js"></script>
      
    
  </body>
</html>